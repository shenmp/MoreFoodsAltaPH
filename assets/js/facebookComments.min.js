"use strict";
define("facebookComments", ["lodash", "core", "react", "socialCommon", "santaProps"], function(e, o, i, t, n) {
    var s = o.compMixins,
        r = ["xfbml.render", "xfbml.resize", "comment.create", "comment.remove"];
    return {
        displayName: "WFacebookComment",
        mixins: [s.skinBasedComp, s.timeoutsMixin, t.facebookComponentMixin, t.socialCompMixin],
        scriptDesc: null,
        propTypes: {
            id: n.Types.Component.id.isRequired,
            isMobileView: n.Types.isMobileView.isRequired,
            compData: n.Types.Component.compData.isRequired,
            compProp: n.Types.Component.compProp.isRequired,
            registerReLayoutPending: n.Types.Layout.registerReLayoutPending.isRequired
        },
        statics: {
            useSantaTypes: !0
        },
        getInitialState: function() {
            return {
                ready: !1,
                lastEventTimeStamp: Date.now()
            }
        },
        commentsAreReady: function() {
            this.props.registerReLayoutPending(this.props.id), this.setState({
                lastEventTimeStamp: Date.now()
            })
        },
        subscribeToFacebookEvents: function() {
            e.forEach(r, function(e) {
                window.FB.Event.subscribe(e, this.commentsAreReady)
            }.bind(this))
        },
        getHref: function() {
            return this.getSocialUrl()
        },
        componentDidMount: function() {
            window.fbAsyncInit = this.subscribeToFacebookEvents, window.FB && this.subscribeToFacebookEvents()
        },
        componentWillUnmount: function() {
            window.FB && e.forEach(r, function(e) {
                window.FB.Event.unsubscribe(e, this.commentsAreReady)
            }.bind(this))
        },
        getSkinProperties: function() {
            return {
                facebook: {
                    children: i.DOM.div({
                        className: "fb-comments",
                        "data-href": this.getHref(),
                        "data-width": this.props.isMobileView ? 320 : this.props.compProp.width,
                        "data-numposts": this.props.compProp.numPosts,
                        "data-colorscheme": this.props.compProp.colorScheme,
                        "data-mobile": !1
                    })
                }
            }
        }
    }
});
//# sourceMappingURL=facebookComments.min.js.map