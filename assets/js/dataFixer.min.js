"use strict";
define("dataFixer/helpers/CompsMigrationHelper", ["lodash", "coreUtils"], function(e, t) {
    function n(e) {
        this.migrationMap = e
    }
    return n.prototype.getComponentData = function(e, t) {
        return t.dataQuery && e.data.document_data[t.dataQuery.replace("#", "")]
    }, n.prototype.setComponentData = function(n, i, o, r) {
        var a = i.dataQuery || e.get(r, [i.id, "dataQuery"]) || t.guidUtils.getUniqueId("dataItem", "-");
        a = a.replace("#", ""), i.dataQuery = "#" + a, o.id = a, n.data.document_data[a] = o, e.set(r, [i.id, "dataQuery"], a)
    }, n.prototype.deleteComponentData = function(e, t) {
        var n = t.dataQuery && t.dataQuery.replace("#", "");
        n && e.data.document_data[n] && delete e.data.document_data[n]
    }, n.prototype.getComponentDesignData = function(e, t) {
        return t.designQuery && e.data.design_data[t.designQuery.replace("#", "")]
    }, n.prototype.deleteComponentDesignData = function(e, t) {
        var n = t.designQuery && t.designQuery.replace("#", "");
        n && e.data.design_data[n] && delete e.data.design_data[n]
    }, n.prototype.getComponentProperties = function(e, t) {
        return t.propertyQuery && e.data.component_properties[t.propertyQuery.replace("#", "")]
    }, n.prototype.deleteComponentProperties = function(e, t) {
        var n = t.propertyQuery && t.propertyQuery.replace("#", "");
        n && e.data.component_properties[n] && delete e.data.component_properties[n], t.propertyQuery && delete t.propertyQuery
    }, n.prototype.setComponentDesignData = function(n, i, o, r) {
        var a = i.designQuery || e.get(r, [i.id, "designQuery"]) || t.guidUtils.getUniqueId("dataItem", "-");
        if (a = a.replace("#", ""), i.designQuery = "#" + a, o.id = a, e.isObject(o.background)) {
            var s = e.clone(o.background);
            s.id = (s.id || t.guidUtils.getUniqueId("dataItem", "-")).replace("#", ""), o.background = "#" + s.id, n.data.design_data[s.id] = s
        }
        n.data.design_data[a] = o, e.set(r, [i.id, "designQuery"], i.designQuery)
    }, n.prototype.setComponentProperties = function(n, i, o, r) {
        var a = i.propertyQuery || e.get(r, [i.id, "propertyQuery"]) || t.guidUtils.getUniqueId("propItem", "-");
        a = a.replace("#", ""), i.propertyQuery = a, o.id = a, n.data.component_properties[a] = o, e.set(r, [i.id, "propertyQuery"], a)
    }, n.prototype.migrateComps = function(t, n, i, o) {
        e.forEach(o, function(e) {
            this.migrationMap[e.componentType] && this.migrationMap[e.componentType].call(this, t, n, i, e), this.migrateComps(t, n, i, e.components)
        }.bind(this))
    }, n.prototype.migratePage = function(e) {
        var t = e.structure;
        if (t) {
            var n = {},
                i = t.components || t.children,
                o = t.mobileComponents;
            i && this.migrateComps(e, n, !1, i), o && this.migrateComps(e, n, !0, o)
        }
    }, n
}), define("dataFixer/maps/galleryTypes", [], function() {
    return {
        "wysiwyg.viewer.components.MatrixGallery": {
            propType: "MatrixGalleryProperties"
        },
        "wysiwyg.viewer.components.PaginatedGridGallery": {
            propType: "PaginatedGridGalleryProperties"
        },
        "wysiwyg.viewer.components.SliderGallery": {
            propType: "SliderGalleryProperties"
        },
        "wysiwyg.viewer.components.SlideShowGallery": {
            propType: "SlideShowGalleryProperties"
        },
        "tpa.viewer.components.Masonry": {
            propType: "MasonryProperties"
        },
        "tpa.viewer.components.Accordion": {
            propType: "AccordionProperties"
        },
        "tpa.viewer.components.Impress": {
            propType: "ImpressProperties"
        },
        "tpa.viewer.components.Freestyle": {
            propType: "FreestyleProperties"
        },
        "tpa.viewer.components.Collage": {
            propType: "CollageProperties"
        },
        "tpa.viewer.components.Honeycomb": {
            propType: "HoneycombProperties"
        },
        "tpa.viewer.components.StripShowcase": {
            propType: "StripShowcaseProperties"
        },
        "tpa.viewer.components.StripSlideshow": {
            propType: "StripSlideshowProperties"
        },
        "tpa.viewer.components.Thumbnails": {
            propType: "ThumbnailsProperties"
        },
        "wysiwyg.viewer.components.tpapps.TPA3DGallery": {
            propType: "SlideShowGalleryProperties"
        },
        "wysiwyg.viewer.components.tpapps.TPA3DCarousel": {
            propType: "SlideShowGalleryProperties"
        }
    }
}), define("dataFixer/plugins/galleriesMobileTypeFixer", ["lodash", "dataFixer/helpers/CompsMigrationHelper", "dataFixer/maps/galleryTypes"], function(e, t, n) {
    function i(e, t, i, o) {
        if (i) {
            var r = t[o.id];
            if (r.componentType !== o.componentType) {
                var a = r.componentType;
                o.componentType = a;
                var s = this.getComponentProperties(e, o),
                    u = n[a].propType;
                !a || s && s.type === u || (o.propertyQuery = r.propertyQuery)
            }
        } else t[o.id] = o
    }
    return {
        exec: function(o) {
            var r = e.mapValues(n, function() {
                return i
            });
            new t(r).migratePage(o)
        }
    }
}), define("dataFixer/plugins/pageTopFixer", [], function() {
    return {
        exec: function(e) {
            e.structure = e.structure || {}, e.structure.layout = e.structure.layout || {}, e.structure.layout.y = 0
        }
    }
}), define("dataFixer/helpers/runOnAllCompsRecursively", ["lodash"], function(e) {
    function t(n, i) {
        e.forEach(n, function(n) {
            e.forEach(i, function(e) {
                e(n)
            }), n.components && t(n.components, i)
        })
    }
    return t
}), define("dataFixer/plugins/masterPageFixer", ["lodash", "dataFixer/helpers/runOnAllCompsRecursively"], function(e, t) {
    function n(e) {
        e.SITE_STRUCTURE && (e.masterPage = e.SITE_STRUCTURE), e.masterPage || (e.masterPage = {}), e.masterPage.id = "masterPage", delete e.SITE_STRUCTURE
    }

    function i(t) {
        return 0 === e.get(t, "layout.width")
    }

    function o(t) {
        return 0 === e.get(t, "layout.height")
    }

    function r(t) {
        i(t) && e.set(t, "layout.width", 100), o(t) && e.set(t, "layout.height", 100)
    }

    function a(t) {
        e.forEach(t, function(t) {
            e.forEach(e.get(t, "layout.anchors"), function(e) {
                switch (t.id) {
                    case "SITE_FOOTER":
                        "BOTTOM_PARENT" === e.type && (e.distance = 0);
                        break;
                    case "PAGES_CONTAINER":
                        "BOTTOM_TOP" === e.type && e.locked && e.distance >= 70 && (e.originalValue = 0, e.locked = !1)
                }
            })
        })
    }

    function s(n, a) {
        var s = !1;
        if (e.forEach(["SITE_HEADER", "SITE_FOOTER"], function(t) {
                var r = e.find(n, {
                    id: t
                });
                i(r) && (s = !0), o(r) && (e.set(r, "layout.height", 100), s = !0), e.set(r, "layout.width", a)
            }), s) {
            var u = e.reject(n, {
                id: "PAGES_CONTAINER"
            });
            t(u, [r])
        }
    }

    function u(t, n) {
        var i = t.children,
            o = t.mobileComponents,
            r = e.get(n, "masterPage.renderModifiers.siteWidth", 980);
        c(i), s(i, r), c(o), s(o, 320), a(o)
    }

    function c(t) {
        e.forEach(p, function(n) {
            if (!e.find(t, {
                    id: n.id
                })) {
                var i = e.find(t, {
                    componentType: n.componentType
                });
                i && (i.id = n.id)
            }
        })
    }
    var p = [{
        componentType: "wysiwyg.viewer.components.PagesContainer",
        id: "PAGES_CONTAINER"
    }, {
        componentType: "wysiwyg.viewer.components.FooterContainer",
        id: "SITE_FOOTER"
    }, {
        componentType: "wysiwyg.viewer.components.HeaderContainer",
        id: "SITE_HEADER"
    }];
    return {
        exec: function(e) {
            return e.structure && "Document" === e.structure.type && (e.structure.id = "masterPage", e.structure.componentType = "mobile.core.components.MasterPage", n(e.data.document_data), u(e.structure, e.data.document_data)), e
        }
    }
}), define("dataFixer/plugins/menuFixer", ["lodash"], function(e) {
    function t(t) {
        var n = t.MAIN_MENU,
            i = [];
        return e.forEach(n.items, function(e) {
            if (i.push(e.refId), e.items && e.items.length > 0)
                for (var t = 0; t < e.items.length; t++) i.push(e.items[t].refId)
        }), i
    }

    function n(t, n) {
        var i = t.items[n];
        i.items && i.items.length > 0 && e.forEach(i.items, function(e, n) {
            t.items.push(e), delete i.items[n]
        }), i.items = [], t.items.splice(n, 1)
    }

    function i(t, n) {
        var i = {};
        return e.find(t.items, function(t, o) {
            return i.topIndex = o, e.find(t.items, function(e, t) {
                if (e.refId === n) return i.subIndex = t, !0
            })
        }), i
    }

    function o(t, o) {
        var r = e.findIndex(t.items, {
            refId: o
        });
        if (r >= 0) n(t, r);
        else {
            var a = i(t, o);
            t.items[a.topIndex].items.splice(a.subIndex, 1)
        }
    }

    function r(t, n) {
        var i = t.MAIN_MENU;
        e.forEach(n, function(e) {
            e || o(i, e)
        }), e.pull(n, "", void 0)
    }

    function a(t, n, i) {
        e.forEach(n, function(n) {
            e.includes(i, n.slice(1)) || o(t.MAIN_MENU, n)
        })
    }

    function s(t, n, i) {
        var o = t.MAIN_MENU,
            r = 0 === o.items.length;
        if (!!t.CUSTOM_MAIN_MENU) {
            if (r) return;
            delete t.CUSTOM_MAIN_MENU, delete t.CUSTOM_MENUS
        }
        e.forEach(i, function(t) {
            if (!e.includes(n, "#" + t)) {
                n.push("#" + t);
                var i = {
                    items: [],
                    refId: "#" + t
                };
                o.items.push(i)
            }
        })
    }

    function u(t, n) {
        t && t.mainPage && !e.includes(n, t.mainPage.slice(1)) && (t.mainPage = "#" + n[0])
    }

    function c(e) {
        if (!!e.CUSTOM_MAIN_MENU)
            for (var t = e.CUSTOM_MAIN_MENU.items, n = 0; n < t.length; n++)
                if (!e[t[n].replace("#", "")]) return delete e.CUSTOM_MAIN_MENU, void delete e.CUSTOM_MENUS
    }

    function p(t) {
        return "Document" === e.get(t, "structure.type")
    }
    return {
        exec: function(e, n) {
            var i = e.data.document_data;
            if (p(e) && !e.data.document_data.MAIN_MENU && (e.data.document_data.MAIN_MENU = {
                    items: [],
                    type: "Menu",
                    id: "MAIN_MENU",
                    metaData: {}
                }), i.MAIN_MENU && n) {
                var o = t(i);
                c(i), r(i, o), a(i, o, n), s(i, o, n), u(i.masterPage, n)
            }
        }
    }
}), define("dataFixer/plugins/verticalMenuFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(e) {
        return !!e.data.theme_data.THEME_DATA
    }

    function i(e) {
        g = e.data.theme_data
    }

    function o(t) {
        var n = t.data.document_data,
            i = n.CUSTOM_MAIN_MENU || {
                items: []
            };
        f = e.filter(i.items, function(e) {
            return n[e.replace("#", "")].isVisible
        }).length
    }

    function r(e, t, n, i) {
        var o = u(e, t);
        t.layout.height = i, o.originalHeight = n
    }

    function a(t, n) {
        var i = u(t, n);
        return !e.isUndefined(i.originalHeight)
    }

    function s(e, t) {
        return "wysiwyg.common.components.verticalmenu.viewer.VerticalMenu" === t.componentType && !a(e, t)
    }

    function u(e, t) {
        return e.data.component_properties[t.propertyQuery.replace("#", "")]
    }

    function c(e, t) {
        return e.data.theme_data[t.styleId] || g[t.styleId]
    }

    function p(n, i) {
        var o = c(n, i);
        o || t.log.error("cannot find style");
        var a = parseInt(o.style.properties.sepw || o.style.properties.separatorHeight || 0, 10),
            s = e.includes(w, o.skin),
            u = e.includes(h, o.skin),
            p = i.layout.height;
        r(n, i, p, t.verticalMenuCalculations.getFixedHeight(p, a, s, u, f))
    }

    function d(t, n) {
        e.forEach(n, function(e) {
            s(t, e) && p(t, e), e.components && d(t, e.components)
        })
    }

    function l(e) {
        var t = e.structure;
        t && (t.components && d(e, t.components), t.mobileComponents && d(e, t.mobileComponents), t.children && d(e, t.children))
    }
    var m = !1,
        g = {},
        f = 0,
        y = [],
        w = ["wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonFixedWidthSkin", "wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonSkin", "wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSolidColorSkin"],
        h = ["wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonFixedWidthSkin", "wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonSkin"];
    return {
        exec: function(e) {
            if (n(e))
                for (i(e), o(e), m = !0; y.length > 0;) l(y.pop());
            else m ? l(e) : y.push(e)
        }
    }
}), define("dataFixer/plugins/skinFixer", ["lodash"], function(e) {
    function t(e) {
        e.skin && i[e.skin] && (e.skin = i[e.skin])
    }

    function n(e, i) {
        var o, r, a = e[i] || e.components;
        if (a)
            for (o = 0; o < a.length; o++) t(r = a[o]), n(r, i)
    }
    var i = {
        "mobile.core.skins.InlineSkin": "skins.core.VerySimpleSkin",
        "mobile.core.skins.TwitterTweetSkin": "skins.core.TwitterTweetSkin",
        "mobile.core.skins.ButtonSkin": "skins.core.ButtonSkin",
        "mobile.core.skins.ContactItemSkin": "skins.core.ContactItemSkin",
        "mobile.core.skins.ContactListSkin": "skins.core.ContactListSkin",
        "mobile.core.skins.FacebookCommentSkin": "skins.core.FacebookCommentSkin",
        "mobile.core.skins.GlobalMenuSkin": "skins.core.GlobalMenuSkin",
        "mobile.core.skins.GooglePlusOneSkin": "skins.core.GooglePlusOneSkin",
        "mobile.core.skins.HeaderSkin": "skins.core.HeaderSkin",
        "mobile.core.skins.HomeButtonSkin": "skins.core.HomeButtonSkin",
        "mobile.core.skins.ImageNewSkin": "skins.core.ImageNewSkin",
        "mobile.core.skins.ImageSkin": "skins.core.ImageSkin",
        "mobile.core.skins.MenuButtonSkin": "skins.core.MenuButtonSkin",
        "mobile.core.skins.NetworkItemSkin": "skins.core.NetworkItemSkin",
        "mobile.core.skins.NetworkListSkin": "skins.core.NetworkListSkin",
        "mobile.core.skins.PageTitleSkin": "skins.core.PageTitleSkin",
        "mobile.core.skins.PhotoFullScreenSkin": "skins.core.PhotoFullScreenSkin",
        "mobile.core.skins.PhotoGalleryFullScreenDefaultSkin": "skins.core.PhotoGalleryFullScreenDefaultSkin",
        "mobile.core.skins.PhotoGalleryGridDefaultSkin": "skins.core.PhotoGalleryGridDefaultSkin",
        "mobile.core.skins.PhotoSkin": "skins.core.PhotoSkin",
        "mobile.core.skins.RichTextImageSkin": "skins.core.RichTextImageSkin",
        "mobile.core.skins.RichTextSkin": "skins.core.RichTextSkin",
        "mobile.core.skins.ServiceItemSkin": "skins.core.ServiceItemSkin",
        "mobile.core.skins.ServiceListSkin": "skins.core.ServiceListSkin",
        "mobile.core.skins.SimpleButtonSkin": "skins.core.SimpleButtonSkin",
        "mobile.core.skins.SiteNavigationMenuSkin": "skins.core.SiteNavigationMenuSkin",
        "mobile.core.skins.TwitterFollowSkin": "skins.core.TwitterFollowSkin",
        "mobile.core.skins.FacebookLikeSkin": "skins.core.FacebookLikeSkin",
        "skins.viewer.gallerymatrix.PolaroidCustomHeightSkin": "wysiwyg.viewer.skins.gallerymatrix.PolaroidCustomHeightSkin",
        "skins.viewer.gallerymatrix.PolaroidDisplayerCustomHeightSkin": "wysiwyg.viewer.skins.gallerymatrix.PolaroidDisplayerCustomHeightSkin",
        "skins.viewer.gallerymatrix.TextBottomCustomHeightSkin": "wysiwyg.viewer.skins.gallerymatrix.TextBottomCustomHeightSkin",
        "skins.viewer.gallerymatrix.TextBottomDisplayerCustomHeightSkin": "wysiwyg.viewer.skins.gallerymatrix.TextBottomDisplayerCustomHeightSkin",
        "skins.viewer.galleryslider.SliderGalleryScotchTapeSkin": "wysiwyg.viewer.skins.galleryslider.SliderGalleryScotchTapeSkin",
        "skins.viewer.galleryslider.SliderGalleryIronSkin": "wysiwyg.viewer.skins.galleryslider.SliderGalleryIronSkin",
        "skins.viewer.galleryslider.SliderDisplayerIronSkin": "wysiwyg.viewer.skins.galleryslider.SliderDisplayerIronSkin",
        "skins.viewer.galleryslider.SliderDisplayerScotchTapeSkin": "wysiwyg.viewer.skins.galleryslider.SliderDisplayerScotchTapeSkin",
        "wysiwyg.viewer.skins.gallerymatrix.MatrixGallerySeparateTextBoxSkin": "wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGallerySeparateTextBoxSkin",
        "wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextOnCenterSkin": "wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGalleryTextOnCenterSkin",
        "wysiwyg.viewer.skins.dropmenu.TextOnlyMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.TextSeparatorsMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.SolidColorMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.ShinyMenuINSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.ShinyMenuIINSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.OverlineMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.SeparateBasicMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.SeparateShinyIMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.SeparateShinyIIMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.LinesMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.SeparateLinesMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.PointerMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.RibbonsMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.VerticalRibbonsMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.IndentedMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.SeparateIndentedMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.ArrowRightMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin",
        "wysiwyg.viewer.skins.dropmenu.SloppyBorderMenuNSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.ShinyMenuISkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin",
        "wysiwyg.viewer.skins.menu.ShinyMenuIISkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin",
        "wysiwyg.viewer.skins.menu.TextOnlyMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonBgFixSkin",
        "wysiwyg.viewer.skins.menu.TextSeparatorsMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.SolidColorMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.OverlineMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonHorizontalMenuAdaptationSkin",
        "wysiwyg.viewer.skins.menu.SeparateBasicMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.SeparateShinyIMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.SeparateShinyIIMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonBorderRadiusFixSkin",
        "wysiwyg.viewer.skins.menu.LinesMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonBorderRadiusFixSkin",
        "wysiwyg.viewer.skins.menu.SeparateLinesMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonHorizontalMenuAdaptationSkin",
        "wysiwyg.viewer.skins.menu.PointerMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonHorizontalMenuAdaptationSkin",
        "wysiwyg.viewer.skins.menu.RibbonsMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.IndentedMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.SeparateIndentedMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.ArrowRightMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin",
        "wysiwyg.viewer.skins.menu.SloppyBorderMenuSkin": "wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin",
        "tpa.viewer.skins.TPAMasonrySkin": "wysiwyg.viewer.skins.TPAMasonrySkin",
        "tpa.viewer.skins.TPA3DCarouselSkin": "wysiwyg.viewer.skins.TPA3DCarouselSkin",
        "tpa.viewer.skins.TPA3DGallerySkin": "wysiwyg.viewer.skins.TPA3DGallerySkin",
        "tpa.viewer.skins.TPAAccordionSkin": "wysiwyg.viewer.skins.TPAAccordionSkin",
        "tpa.viewer.skins.TPACollageSkin": "wysiwyg.viewer.skins.TPACollageSkin",
        "tpa.viewer.skins.TPAEcomGallerySkin": "wysiwyg.viewer.skins.TPAEcomGallerySkin",
        "tpa.viewer.skins.TPAFreestyleSkin": "wysiwyg.viewer.skins.TPAFreestyleSkin",
        "tpa.viewer.skins.TPAHoneycombSkin": "wysiwyg.viewer.skins.TPAHoneycombSkin",
        "tpa.viewer.skins.TPAImpressSkin": "wysiwyg.viewer.skins.TPAImpressSkin",
        "tpa.viewer.skins.TPAStripShowcaseSkin": "wysiwyg.viewer.skins.TPAStripShowcaseSkin",
        "tpa.viewer.skins.TPAStripSlideshowSkin": "wysiwyg.viewer.skins.TPAStripSlideshowSkin",
        "tpa.viewer.skins.TPAThumbnailsSkin": "wysiwyg.viewer.skins.TPAThumbnailsSkin",
        "tpa.common.skins.TPAPreloaderSkin": "wysiwyg.viewer.skins.TPAPreloaderSkin",
        "tpa.common.skins.TPAUnavailableMessageOverlaySkin": "wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin"
    };
    return {
        exec: function(i) {
            var o, r = i.structure;
            r && (n(r, "children"), n(r, "mobileComponents"), t(r)), (o = i.data && i.data.theme_data) && e.forEach(o, function(e) {
                t(e)
            })
        }
    }
}), define("dataFixer/plugins/stylesFixer", ["lodash"], function(e) {
    function t(e, t, n) {
        return e[n.replace("llt_", "llf_")] = t, e
    }

    function n(t) {
        t.style && e.forEach(t.style.properties, function(e, t, n) {
            "string" == typeof e && (n[t] = e.replace(/(\d)x/g, "$1px"))
        })
    }

    function i() {
        return {
            type: "TopLevelStyle",
            id: "v2",
            metaData: {
                isPreset: !1,
                schemaVersion: "1.0",
                isHidden: !1
            },
            style: {
                properties: {
                    brd: "color_15",
                    brw: "0px",
                    rd: "0px",
                    shd: "0 1px 4px rgba(0, 0, 0, 0.6);"
                },
                propertiesSource: {
                    brd: "theme",
                    brw: "value",
                    rd: "value",
                    shd: "value"
                },
                groups: {}
            },
            componentClassName: "",
            pageId: "",
            compId: "",
            styleType: "system",
            skin: "wysiwyg.viewer.skins.video.VideoDefault"
        }
    }

    function o(t) {
        if (!t.v2) {
            var n = i();
            t.v2 = e.cloneDeep(t.vl) || n
        }
    }

    function r(t) {
        e.forOwn(t, function(e) {
            s["*"](e), s[e.skin] && s[e.skin](e)
        })
    }
    var a = function(n) {
            n.style.properties = e.reduce(n.style.properties, t, {}), n.style.propertiesSource = e.reduce(n.style.propertiesSource, t, {})
        },
        s = {
            "*": function(e) {
                "THEME_DATA" !== e.id && (e.style || (e.style = {
                    properties: {},
                    propertiesSource: {},
                    groups: {}
                }))
            },
            "wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat": a,
            "wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon": a
        };
    return {
        exec: function(t) {
            var i = t.data && t.data.theme_data;
            e.isEmpty(i) || (o(i), r(i), e.forEach(i, function(e) {
                n(e)
            }))
        }
    }
}), define("dataFixer/plugins/bgImageStripDataFixer", ["lodash"], function(e) {
    function t(e) {
        return e && "wysiwyg.viewer.components.BgImageStrip" === e.componentType
    }

    function n(e) {
        return e && e.dataQuery && e.dataQuery.replace("#", "")
    }

    function i(e) {
        return e.uri.slice(0 - s.length) === s
    }

    function o(e, o, r) {
        if (t(r)) {
            var a = n(r),
                s = a && o[a];
            s && (s.title = s.title || "", i(s) || (e[r.id] = a))
        }
    }

    function r(e, n, i) {
        if (t(i)) {
            var o = e[i.id];
            o ? i.dataQuery = "#" + o : delete i.dataQuery
        }
    }

    function a(t, n) {
        e.forEach(t, function(e) {
            n(e), a(e.components, n)
        })
    }
    var s = "add_image_thumb.png";
    return {
        exec: function(e) {
            var t = e.structure,
                n = t && (t.components || t.children),
                i = t && t.mobileComponents;
            if (n) {
                var s = {};
                a(n, o.bind(null, s, e.data.document_data)), a(n, r.bind(null, s, e.data.document_data)), a(i, r.bind(null, s, e.data.document_data))
            }
        }
    }
}), define("dataFixer/plugins/compFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(e, t) {
        var n = t.componentType,
            i = x[n];
        i && (t.componentType = i.comp, i.dataQuery && (t.dataQuery = i.dataQuery), i.callback && i.callback(e))
    }

    function i(e, t) {
        "wysiwyg.viewer.components.ItunesButton" === t.componentType && (t.layout.height = Math.round(t.layout.width / 2.75))
    }

    function o(e, t) {
        return e.data.component_properties[t.propertyQuery]
    }

    function r(e, t) {
        return t.dataQuery && e.data.document_data[t.dataQuery.replace("#", "")]
    }

    function a(e, t, n) {
        e.data.component_properties[t.propertyQuery] = n
    }

    function s(e, n, i) {
        var o = t.guidUtils.getUniqueId("dataItem", "-");
        n.dataQuery = "#" + o, i.id = o, e.data.document_data[o] = i
    }

    function u(t) {
        if (t.components.length > 0) {
            var n = e.map(t.components, function(e) {
                return e.layout.y + e.layout.height
            });
            return e.max(n)
        }
        return 0
    }

    function c(t) {
        var n = e.find(t.structure.children, {
            id: "PAGES_CONTAINER"
        });
        return n.layout.y + n.layout.height
    }

    function p(e, t) {
        "SITE_FOOTER" !== t.id || t.layout || (t.layout = {
            anchors: [],
            fixedPosition: !1,
            height: u(t),
            rotationInDegrees: 0,
            scale: 1,
            width: 320,
            x: 0,
            y: c(e)
        })
    }

    function d(e, t) {
        if (!r(e, t)) switch (t.componentType) {
            case "wysiwyg.viewer.components.svgshape.SvgShape":
                s(e, t, {
                    link: null,
                    type: "SvgShape"
                });
                break;
            case "wysiwyg.viewer.components.WFacebookComment":
                return void s(e, t, {
                    type: "WFacebookComment",
                    urlFormat: "hashBang"
                });
            case "wysiwyg.viewer.components.WFacebookLike":
                return void s(e, t, {
                    type: "WFacebookLike",
                    urlFormat: "hashBang"
                })
        }
    }

    function l(e, t) {
        var n = r(e, t);
        if (n) switch (t.componentType) {
            case "wysiwyg.viewer.components.ClipArt":
                return void(n.title = "");
            case "wysiwyg.viewer.components.FacebookShare":
            case "wysiwyg.viewer.components.VKShareButton":
            case "wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":
            case "wysiwyg.viewer.components.WTwitterTweet":
            case "wysiwyg.viewer.components.WFacebookComment":
            case "wysiwyg.viewer.components.WFacebookLike":
                return void(n.urlFormat = n.urlFormat || "hashBang")
        }
    }

    function m(e, t, n) {
        "wysiwyg.common.components.anchor.viewer.Anchor" === n.componentType && 0 === n.layout.width && (n.layout.width = e)
    }

    function g(e, t) {
        if (!o(e, t)) switch (t.componentType) {
            case "wysiwyg.viewer.components.menus.DropDownMenu":
                a(e, t, {
                    alignButtons: "center",
                    alignText: "center",
                    sameWidthButtons: !1,
                    moreButtonLabel: "More",
                    moreItemHeight: 15,
                    stretchButtonsToMenuWidth: !0,
                    type: "HorizontalMenuProperties"
                });
                break;
            case "wysiwyg.viewer.components.mobile.TinyMenu":
                t.propertyQuery = "TINY_MENU", a(e, t, {
                    direction: "left",
                    type: "TinyMenuProperties",
                    id: "TINY_MENU",
                    metaData: {
                        isPreset: !1,
                        schemaVersion: "1.0",
                        isHidden: !1
                    }
                })
        }
    }

    function f(e, t, n) {
        e.properties[n.id] = o(t, n)
    }

    function y(e, t, n) {
        !o(t, n) && e.properties[n.id] && a(t, n, e.properties[n.id])
    }

    function w(e, t) {
        var n = o(e, t);
        if (t.propertyQuery && n) switch (t.componentType) {
            case "wysiwyg.viewer.components.WFacebookLike":
            case "wysiwyg.viewer.components.PayPalButton":
            case "wysiwyg.viewer.components.GoogleMap":
                n.language || (n.language = "en");
                break;
            case "wysiwyg.viewer.components.WRichText":
                "WRichTextProperties" !== n.type && delete t.propertyQuery
        }
    }

    function h(t, n, i) {
        e.forEach(n, function(n) {
            e.forEach(i, function(e) {
                e(t, n)
            }), n.components && h(t, n.components, i)
        })
    }

    function v(t, o, r) {
        h(t, r, [n, i, d, g, w, l, e.partial(m, 1920), e.partial(f, o)])
    }

    function T(e, t, n) {
        e.pageContainsStructuresWithoutJsonAnchors = e.pageContainsStructuresWithoutJsonAnchors || !n.layout || !n.layout.anchors
    }

    function k(e, t) {
        t.layout && delete t.layout.anchors
    }

    function S(t, o, r) {
        var a = {
            pageContainsStructuresWithoutJsonAnchors: !1
        };
        h(t, r, [n, i, d, g, w, l, p, e.partial(m, 320), e.partial(y, o), e.partial(T, a)]), a.pageContainsStructuresWithoutJsonAnchors && h(t, r, [k])
    }
    var x = {
        "wysiwyg.viewer.components.HorizontalMenu": {
            comp: "wysiwyg.viewer.components.menus.DropDownMenu",
            dataQuery: "#MAIN_MENU"
        }
    };
    return {
        exec: function(e) {
            var t = e.structure;
            if (t) {
                var n = {
                        properties: {}
                    },
                    i = t.components || t.children,
                    o = t.mobileComponents;
                i && v(e, n, i), o && S(e, n, o)
            }
        }
    }
}), define("dataFixer/plugins/galleryFixer", ["lodash"], function(e) {
    var t = ["GalleryExpandProperties", "MatrixGalleryProperties", "PaginatedGridGalleryProperties", "SliderGalleryProperties", "SlideShowGalleryProperties"],
        n = function(t) {
            return (e.isUndefined(t.galleryImageOnClickAction) || "unset" === t.galleryImageOnClickAction) && (!1 === t.expandEnabled ? t.galleryImageOnClickAction = "disabled" : t.galleryImageOnClickAction = "zoomMode"), t
        },
        i = function(t, n, i) {
            return e(t).pickBy(function(t) {
                return e.includes(n, t.type)
            }).mapValues(i).value()
        };
    return {
        exec: function(e) {
            i(e.data.component_properties, t, n)
        }
    }
}), define("dataFixer/helpers/behaviorsMigrationHelper", ["coreUtils"], function(e) {
    function t(t) {
        return {
            id: e.guidUtils.getUniqueId("behavior", "-"),
            type: "ObsoleteBehaviorsList",
            items: t
        }
    }
    return {
        createBehaviorsDataItem: t
    }
}), define("dataFixer/plugins/behaviorsDataFixer", ["lodash", "coreUtils", "dataFixer/helpers/behaviorsMigrationHelper"], function(e, t, n) {
    function i(n) {
        var i = t.dataUtils.getAllCompsInStructure(n, !1);
        return e.pickBy(i, "behaviors")
    }

    function o(n, i) {
        var o = t.dataUtils.getAllCompsInStructure(n, !0);
        return e.pickBy(o, function(e) {
            return i[e.id]
        })
    }

    function r(e, t, n) {
        e.behaviorQuery = t.id, n && (n.behaviorQuery = e.behaviorQuery)
    }

    function a(t) {
        var a = e.get(t, "data"),
            s = e.get(t, "structure");
        a.behaviors_data = a.behaviors_data || {};
        var u = i(s),
            c = o(s, u);
        e.forEach(u, function(t) {
            var i = n.createBehaviorsDataItem(t.behaviors);
            r(t, i, c[t.id]), delete t.behaviors, e.set(a, ["behaviors_data", i.id], i)
        })
    }
    return {
        exec: a
    }
}), define("dataFixer/plugins/behaviorsFixer", ["lodash", "dataFixer/plugins/behaviorsDataFixer"], function(e, t) {
    function n(e) {
        return ["behaviors_data", e.behaviorQuery, "items"]
    }

    function i(t) {
        return e.has(t, "behaviors_data")
    }

    function o(t, o, r) {
        var a = JSON.stringify(t);
        i(r) ? e.set(r, n(o), a) : o.behaviors = a
    }

    function r(t, o) {
        return i(o) ? e.get(o, n(t), "[]") : t.behaviors || "[]"
    }

    function a(t, n) {
        var a = [],
            s = r(t, n),
            u = JSON.parse(s);
        if (e.isEmpty(u)) i(n) ? delete t.behaviorQuery : delete t.behaviors;
        else {
            if (e.isArray(u)) {
                var c = !1;
                return e.forEach(u, function(n) {
                    "prefetchPages" === e.get(n, "behavior.name") && e.get(n, "action.sourceId") !== t.id && (n.action.sourceId = t.id, c = !0)
                }), void(c && o(u, t, n))
            }
            e.forEach(u, function(t, n) {
                e.forEach(t, function(t, i) {
                    e.forEach(t, function(t) {
                        var o = e.assign({
                            targetId: i,
                            action: n
                        }, t);
                        "screenIn" !== n && "pageIn" !== n || (o.targetId = ""), a.push(o)
                    })
                })
            }), o(a, t, n)
        }
    }

    function s(t, n) {
        e.forEach(t, function(e) {
            a(e, n), e.components && s(e.components, n)
        })
    }
    return {
        exec: function(e) {
            t.exec(e);
            var n = e.structure;
            n && (n.components && s(n.components, e.data), n.mobileComponents && s(n.mobileComponents, e.data), n.children && s(n.children, e.data))
        }
    }
}), define("dataFixer/plugins/connectionsDataFixer", ["lodash"], function(e) {
    return {
        exec: function(t) {
            var n = e.get(t, "data");
            n.connections_data = n.connections_data || {}
        }
    }
}), define("dataFixer/plugins/fiveGridLineLayoutFixer", ["lodash"], function(e) {
    function t(i) {
        e.forEach(i, function(i) {
            if (e.has(n, i.skin)) {
                var o = n[i.skin];
                i.layout = e.mapValues(i.layout, function(e, t) {
                    return o[t] ? Math.max(e, o[t]) : e
                })
            }
            i.components && t(i.components)
        })
    }
    var n = {
        "wysiwyg.viewer.skins.line.FadeLine": {
            width: 90
        },
        "wysiwyg.viewer.skins.line.FadeNotchBottomLine": {
            width: 60
        },
        "wysiwyg.viewer.skins.line.FadeNotchTopLine": {
            width: 60
        },
        "wysiwyg.viewer.skins.line.ShadowBottomLine": {
            width: 200
        },
        "wysiwyg.viewer.skins.line.ShadowTopLine": {
            width: 200
        }
    };
    return {
        exec: function(e) {
            var n = e.structure;
            n && (n.components && t(n.components), n.children && t(n.children), n.mobileComponents && t(n.mobileComponents))
        }
    }
}), define("dataFixer/plugins/toPageAnchorsFixer", ["lodash"], function(e) {
    function t(t) {
        var n = e.head(t);
        return !!e.get(n, "layout.anchors")
    }
    return {
        exec: function(n) {
            var i = n.structure;
            if (i && i.components && !e.isEmpty(i.components) && t(i.components)) {
                var o, r = e.maxBy(i.components, function(t) {
                    var n = -1 * Number.MAX_VALUE;
                    return t.layout && e.isNumber(t.layout.y) && e.isNumber(t.layout.height) && (n = t.layout.y + t.layout.height), n
                });
                r.layout && r.layout.anchors && (o = e.find(r.layout.anchors, {
                    type: "BOTTOM_PARENT"
                })), o || (r.layout = r.layout || {}, r.layout.anchors = r.layout.anchors || [], r.layout.anchors.push({
                    distance: 0,
                    type: "BOTTOM_PARENT",
                    targetComponent: n.structure.id,
                    locked: !0,
                    originalValue: n.structure.layout.height,
                    topToTop: r.layout.y
                }))
            }
        }
    }
}), define("dataFixer/helpers/anchorCyclesHelper", ["lodash"], function(e) {
    function t(e) {
        return e && e.layout && e.layout.y + e.layout.height
    }

    function n(e) {
        return e.layout && e.layout.anchors || []
    }

    function i(n, i, o) {
        var r;
        switch (n.type) {
            case s.BOTTOM_BOTTOM:
                r = t(o);
                break;
            case s.BOTTOM_TOP:
                r = e.get(o, "layout.y");
                break;
            default:
                return !1
        }
        return !e.isUndefined(r) && r - t(i) < 0
    }

    function o(e) {
        return e.type === s.BOTTOM_BOTTOM || e.type === s.BOTTOM_TOP
    }

    function r(t, i, a, s) {
        if (s[i.id]) return !1;
        s[i.id] = !0;
        var u = n(i);
        return u = e.filter(u, o), e.some(u, function(e) {
            return e.targetComponent === t.id || r(t, a[e.targetComponent], a, s)
        })
    }

    function a(t) {
        if (!e.isEmpty(t)) {
            var s = e.keyBy(t, "id");
            e.forEach(t, function(t) {
                var u = n(t);
                e.remove(u, function(e) {
                    return o(e) && i(e, t, s[e.targetComponent]) && r(t, s[e.targetComponent], s, {})
                }), a(t.components)
            })
        }
    }
    var s = {
        BOTTOM_BOTTOM: "BOTTOM_BOTTOM",
        BOTTOM_TOP: "BOTTOM_TOP"
    };
    return {
        fixBottomTopBottomBottomCycles: a
    }
}), define("dataFixer/plugins/wrongAnchorsFixer", ["lodash", "dataFixer/helpers/anchorCyclesHelper"], function(e, t) {
    function n(e) {
        T[e.componentType] && (e.layout.anchors = [])
    }

    function i(e) {
        "TOP_TOP" === e.type && (e.locked = !0)
    }

    function o(e, t, n) {
        var i = (n || 0) * Math.PI / 180;
        return parseInt(Math.abs(t * Math.sin(i)) + Math.abs(e * Math.cos(i)), 10)
    }

    function r(e, t, n) {
        return parseInt(e - (n - t) / 2, 10)
    }

    function a(e) {
        return e.layout && e.layout.y + e.layout.height
    }

    function s(e) {
        return e.layout && e.layout.anchors || []
    }

    function u(t, n, i, o, r) {
        if (!(r[t.id] || a(t) > i)) {
            r[t.id] = !0;
            var c = s(t);
            e.remove(c, function(e) {
                if (e.targetComponent === n.id) return !0;
                if ("BOTTOM_PARENT" !== e.type) {
                    if (!o[e.targetComponent]) return !0;
                    u(o[e.targetComponent], n, i, o, r)
                }
                return !1
            })
        }
    }

    function c(t, n, i) {
        if ("BOTTOM_TOP" === t.type) {
            var o = s(i[t.targetComponent]);
            e.remove(o, {
                targetComponent: n.id
            });
            var r = e.filter(o, {
                    type: "TOP_TOP"
                }),
                c = a(n) + 10;
            e.forEach(r, function(e) {
                i[e.targetComponent] && u(i[e.targetComponent], n, c, i, {})
            })
        }
    }

    function p(t, n) {
        "Document" === t.type && e.forEach(n, function(e) {
            "SITE_STRUCTURE" === e.targetComponent && (e.targetComponent = "masterPage")
        })
    }

    function d(t, n, i) {
        n = e.reject(n, {
            type: "BOTTOM_PARENT"
        }), e.forEach(n, function(n) {
            var o = i[n.targetComponent];
            if (o) {
                var r = e.filter(s(o), {
                    targetComponent: t.id,
                    type: n.type
                });
                e.forEach(r, function(i) {
                    var r = t.layout.y < o.layout.y ? o : t,
                        a = t.layout.y < o.layout.y ? i : n;
                    e.remove(r.layout.anchors, function(e) {
                        return e === a
                    })
                })
            }
        })
    }

    function l(t) {
        e.forEach(t, function(n) {
            var i = s(n);
            i = e.reject(i, {
                type: "BOTTOM_PARENT"
            }), e.remove(i, function(n) {
                return !e.some(t, {
                    id: n.targetComponent
                })
            })
        })
    }

    function m(t, n, i) {
        var a = n.id,
            s = i[t.targetComponent];
        if ("BOTTOM_PARENT" === t.type && (s = t.targetComponent === a ? n : null), !s) return !1;
        if ("BOTTOM_BOTTOM" === t.type && v[s.componentType]) return !1;
        if ("BOTTOM_PARENT" !== t.type && (T[s.componentType] || "wysiwyg.viewer.components.HeaderContainer" === s.componentType && s.layout && !0 === s.layout.fixedPosition)) return !1;
        var u;
        if (s.layout && e.isNumber(s.layout.height) && e.isNumber(s.layout.y)) {
            var c = s.layout,
                p = o(c.height, c.width, c.rotationInDegrees),
                d = r(c.y, c.height, p);
            u = "BOTTOM_PARENT" === t.type || "BOTTOM_BOTTOM" === t.type ? p : d
        } else u = 0;
        return t.originalValue = Math.min(t.originalValue, u), !0
    }

    function g(t) {
        e.remove(t, function(e) {
            return null === e.distance || isNaN(e.distance)
        })
    }

    function f(e, t) {
        !!t && n(e)
    }

    function y(e, t) {
        return f(e, t), w(e, t)
    }

    function w(t, o) {
        var r = o ? t[o] : t.components;
        if (!e.isEmpty(r)) {
            var a = e.transform(r, function(e, t) {
                e[t.id] = t
            }, {});
            l(r), e.forEach(r, function(o) {
                var r = s(o);
                g(r), n(o), p(t, r), d(o, r, a), e.remove(r, function(e) {
                    i(e);
                    var n = m(e, t, a);
                    return n && c(e, o, a), !n
                }), w(o)
            })
        }
    }

    function h(t) {
        var n = e.head(t);
        return !!e.get(n, "layout.anchors")
    }
    var v = {
            "wysiwyg.common.components.anchor.viewer.Anchor": !0,
            "wysiwyg.common.components.subscribeform.viewer.SubscribeForm": !0,
            "wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget": !0,
            "wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer": !0,
            "wixapps.integration.components.AppPart": !0,
            "wixapps.integration.components.AppPart2": !0,
            "wixapps.integration.components.common.minipart": !0,
            "wysiwyg.common.components.onlineclock.viewer.OnlineClock": !0,
            "wysiwyg.common.components.weather.viewer.Weather": !0,
            "wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton": !0,
            "wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow": !0,
            "wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer": !0,
            "wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton": !0,
            "wysiwyg.viewer.components.ContactForm": !0,
            "wysiwyg.viewer.components.FacebookShare": !0,
            "wysiwyg.viewer.components.FiveGridLine": !0,
            "wysiwyg.viewer.components.FlickrBadgeWidget": !0,
            "wysiwyg.viewer.components.ItunesButton": !0,
            "wysiwyg.viewer.components.LinkBar": !0,
            "wysiwyg.viewer.components.PayPalButton": !0,
            "wysiwyg.viewer.components.PinterestFollow": !0,
            "wysiwyg.viewer.components.VKShareButton": !0,
            "wysiwyg.viewer.components.WFacebookComment": !0,
            "wysiwyg.viewer.components.WGooglePlusOne": !0,
            "wysiwyg.viewer.components.mobile.TinyMenu": !0
        },
        T = {
            "wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton": !0,
            "wysiwyg.viewer.components.tpapps.TPAGluedWidget": !0,
            "mobile.core.components.Page": !0,
            "wixapps.integration.components.AppPage": !0
        };
    return {
        exec: function(n) {
            var i = n.structure,
                o = "components";
            i && ("Document" === i.type && ((i = e.clone(n.structure)).id = "masterPage", n.structure = i, o = "children"), h(i[o]) && y(i, o), h(i.mobileComponents) && (y(i, "mobileComponents"), t.fixBottomTopBottomBottomCycles(i.mobileComponents)))
        }
    }
}), define("dataFixer/plugins/addMissingAnchorsOfMasterPage", ["lodash"], function(e) {
    function t(e) {
        return e * Math.PI / 180
    }

    function n(e) {
        if (!e.rotationInDegrees) return e.height;
        var n = t(e.rotationInDegrees);
        return parseInt(Math.abs(e.width * Math.sin(n)) + Math.abs(e.height * Math.cos(n)), 10)
    }

    function i(e) {
        if (!e.rotationInDegrees) return e.y;
        var t = n(e);
        return parseInt(e.y - (t - e.height) / 2, 10)
    }

    function o(t) {
        return e.maxBy(t, function(e) {
            return i(e.layout)
        })
    }

    function r(t) {
        var n = t.pagesContainer,
            i = t.header;
        n && i && (e.remove(n.layout.anchors, {
            targetComponent: "SITE_HEADER",
            type: "TOP_TOP"
        }), e.remove(i.layout.anchors, {
            targetComponent: "PAGES_CONTAINER",
            type: "TOP_TOP"
        }))
    }

    function a(t, r) {
        var a = r.pagesContainer,
            s = r.header,
            u = r.footer,
            c = a && a.components && e.find(a.components, {
                id: "SITE_PAGES"
            });
        if (!c || !c.layout || c.layout.anchors && 0 !== c.layout.anchors.length || (c.layout.anchors = [{
                distance: 0,
                locked: !0,
                originalValue: 0,
                targetComponent: "PAGES_CONTAINER",
                type: "BOTTOM_PARENT"
            }]), a && a.layout && (!a.layout.anchors || 0 === a.layout.anchors.length) && u && u.layout && !u.layout.fixedPosition && (a.layout.anchors = [{
                distance: 10,
                locked: !0,
                originalValue: 0,
                targetComponent: "SITE_FOOTER",
                type: "BOTTOM_TOP"
            }]), s && !e.find(t, function(t) {
                return e.find(t.layout.anchors, {
                    type: "BOTTOM_PARENT",
                    targetComponent: "masterPage"
                })
            })) {
            var p = o(t);
            if (!p.layout.anchors) return;
            p.layout.anchors.push({
                distance: 0,
                locked: !0,
                originalValue: i(p.layout) + n(p.layout) + (s ? n(s.layout) : 0),
                targetComponent: "masterPage",
                type: "BOTTOM_PARENT"
            })
        }
    }

    function s(e) {
        return !(e.length && e[0].layout && e[0].layout.anchors)
    }

    function u(t) {
        var n = {};
        return e.forEach(t, function(e) {
            switch (e.id) {
                case "SITE_HEADER":
                    return n.header = e, !(n.footer && n.pagesContainer);
                case "SITE_FOOTER":
                    return n.footer = e, !(n.header && n.pagesContainer);
                case "PAGES_CONTAINER":
                    return n.pagesContainer = e, !(n.header && n.footer);
                default:
                    return !0
            }
        }), n
    }

    function c(t) {
        if (t && !e.isEmpty(t) && !s(t)) {
            var n = u(t);
            r(n), a(t, n)
        }
    }
    return {
        exec: function(e) {
            var t = e.structure;
            t && "Document" === t.type && (c(t.children), c(t.mobileComponents))
        },
        test: {
            getBoundingHeight: n,
            getBoundingY: i,
            getLowestComp: o
        }
    }
}), define("dataFixer/plugins/customSiteMenuFixer", ["lodash"], function(e) {
    function t(t, i) {
        return e.map(t, function(e) {
            return n(i, e)
        })
    }

    function n(e, n) {
        var o = y + g++,
            r = e[n.refId.replace("#", "")];
        return e[o] = {
            id: o,
            label: r.title,
            isVisible: !r.hidePage,
            isVisibleMobile: void 0 !== r.mobileHidePage ? !r.mobileHidePage : !r.hidePage,
            items: t(n.items, e),
            link: i(e, n.refId),
            type: "BasicMenuItem",
            metaData: {}
        }, "#" + o
    }

    function i(e, t) {
        var n = w + f++;
        return e[n] = {
            id: n,
            type: "PageLink",
            pageId: t,
            metaData: {}
        }, "#" + n
    }

    function o(e, t) {
        return t && e[t.replace("#", "")]
    }

    function r(e, t) {
        t.link = "#CUSTOM_MENU_HEADER"
    }

    function a(e, t) {
        var n = o(e, t.link);
        return n && "PageLink" === n.type && !o(e, n.pageId)
    }

    function s(t, n) {
        e.forEach(n.items, function(e) {
            var n = o(t, e);
            n.link && !a(t, n) || r(e, n), s(t, n)
        })
    }

    function u(t) {
        e(t.data.document_data).filter({
            type: "Menu"
        }).map("id").forEach(function(e) {
            delete t.data.document_data[e]
        })
    }

    function c(e) {
        return e && e.structure && "Page" === e.structure.type
    }

    function p(e) {
        return e.replace("#", "")
    }

    function d(t, n) {
        var i = t.CUSTOM_MAIN_MENU.items,
            o = e(t).filter({
                type: "BasicMenuItem"
            }).map("link").compact().map(p).map(function(e) {
                return t[e]
            }).map("pageId").compact().map(p).value(),
            r = e.difference(n, o);
        e.forEach(r, function(e) {
            t[e].isPopup || i.push(l(t, e))
        })
    }

    function l(e, t) {
        var n = y + g++,
            o = e[t];
        return e[n] = {
            id: n,
            label: o.title,
            isVisible: !o.hidePage,
            isVisibleMobile: void 0 !== o.mobileHidePage ? !o.mobileHidePage : !o.hidePage,
            items: [],
            link: i(e, "#" + t),
            type: "BasicMenuItem",
            metaData: {}
        }, "#" + n
    }

    function m(t, n) {
        var i = e.filter(t, function(e) {
                return e.id && 0 === e.id.indexOf(n)
            }),
            o = -1;
        return e.forEach(i, function(e) {
            var t = Number(e.id.replace(n, ""));
            t > o && (o = t)
        }), ++o
    }
    var g = 0,
        f = 0,
        y = "bmi",
        w = "pglk";
    return {
        exec: function(n, i) {
            if (c(n)) u(n);
            else {
                var o = n.data.document_data;
                g = m(o, y), f = m(o, w), n.data.document_data.CUSTOM_MAIN_MENU || (n.data.document_data.CUSTOM_MAIN_MENU = {
                    id: "CUSTOM_MAIN_MENU",
                    items: t(n.data.document_data.MAIN_MENU.items, n.data.document_data),
                    name: "Custom Main Menu",
                    type: "CustomMenu",
                    metaData: {}
                }), n.data.document_data.CUSTOM_MENUS ? e.includes(n.data.document_data.CUSTOM_MENUS.menus, "#CUSTOM_MAIN_MENU") || n.data.document_data.CUSTOM_MENUS.menus.push("#CUSTOM_MAIN_MENU") : n.data.document_data.CUSTOM_MENUS = {
                    id: "CUSTOM_MENUS",
                    menus: ["#CUSTOM_MAIN_MENU"],
                    type: "CustomMenusCollection",
                    metaData: {}
                }, d(o, i), o.CUSTOM_MAIN_MENU.items = e.uniq(o.CUSTOM_MAIN_MENU.items), s(o, o.CUSTOM_MAIN_MENU), n.data.document_data.MAIN_MENU.items.length > 0 && (n.data.document_data.MAIN_MENU.items = [])
            }
        }
    }
}), define("dataFixer/plugins/sitePagesFixer", ["lodash"], function(e) {
    function t(t) {
        var n;
        if (t.structure.children) {
            var i = e.find(t.structure.children, {
                id: "PAGES_CONTAINER"
            });
            i && !e.isEmpty(i.components) && (n = e.find(i.components, {
                id: "SITE_PAGES"
            }))
        }
        return n
    }

    function n(t) {
        var n;
        if (t.structure.mobileComponents) {
            var i = e.find(t.structure.mobileComponents, {
                id: "PAGES_CONTAINER"
            });
            i && !e.isEmpty(i.components) && (n = e.find(i.components, {
                id: "SITE_PAGES"
            }))
        }
        return n
    }

    function i(t) {
        e.isEmpty(t.components) || (t.components = [])
    }

    function o(e) {
        e.layout && (e.layout.y = 0)
    }
    return {
        exec: function(e) {
            if (e.structure && "Document" === e.structure.type) {
                var r = t(e),
                    a = n(e);
                r && (i(r), o(r)), a && (i(a), o(a))
            }
            return e
        }
    }
}), define("dataFixer/plugins/linkRefDataFixer", ["lodash", "coreUtils"], function(e, t) {
    return {
        exec: function(n) {
            var i, o = {
                    toFix: ["FlashComponent", "SiteButton", "Image"],
                    newNames: ["LinkableFlashComponent", "LinkableButton", "Image"],
                    originalLink: ["TextLink", "Link"]
                },
                r = ["href", "text", "target", "icon", "linkType"],
                a = {
                    oldValues: ["same", "other"],
                    newValues: ["_self", "_blank"]
                },
                s = function(t) {
                    var n = e.indexOf(o.toFix, t.type),
                        i = o.newNames[n],
                        a = e.defaults({
                            type: i
                        }, e.omit(t, r)),
                        s = u(t, !0);
                    return s && (a.link = g(s.id), v[s.id] = s), t.type === a.type && (a.metaData.schemaVersion = "2.0"), a
                },
                u = function(e, t) {
                    var n = (e.linkType || "").toLowerCase(),
                        i = t ? w() : e.id;
                    switch (n) {
                        case "page":
                            return p(i, e);
                        case "website":
                            return c(i, e);
                        case "email":
                            return l(i, e);
                        case "document":
                            return d(i, e);
                        case "login":
                            return m(i, e);
                        case "admin_login":
                        case "free_link":
                        case "":
                        default:
                            return null
                    }
                },
                c = function(e, t) {
                    var n = {};
                    n.id = e, n.type = "ExternalLink", n.target = f(t.target);
                    var i = t.href;
                    return i ? (n.url = i, n) : null
                },
                p = function(e, t) {
                    var n = {};
                    n.id = e, n.type = "PageLink";
                    var i = t.href;
                    if (!i) return null;
                    var o = i.lastIndexOf("/");
                    return o < 0 && (o = i.lastIndexOf("|")), i = i.substr(o + 1), n.pageId = g(i), n
                },
                d = function(e, t) {
                    var n, i, o = {};
                    o.type = "DocumentLink", o.id = e;
                    var r = t.href;
                    return r ? (n = r.substr(r.lastIndexOf("/") + 1), -1 !== (i = n.indexOf("?dn=")) && (n = n.substring(0, i)), o.docId = n, o.name = t.text, o) : null
                },
                l = function(e, n) {
                    var i = {};
                    i.id = e, i.type = "EmailLink";
                    var o = n.href;
                    if (!o || !o.toLowerCase) return null;
                    t.stringUtils.startsWith(o, "mailto:", !0) && (o = o.substr("mailto:".length));
                    var r = o.split("?");
                    if (i.recipient = r[0], r[1]) {
                        var a = y(r[1]);
                        a.subject && (i.subject = a.subject), a.body && (i.body = a.body)
                    }
                    return i
                },
                m = function(e, n) {
                    var i = {};
                    i.id = e, i.type = "LoginToWixLink";
                    var o = n.text;
                    return o && t.stringUtils.startsWith(o, "{") && (o = JSON.parse(o), i.postLoginUrl = o.postLoginUrl, i.postSignupUrl = o.postSignupUrl, i.dialog = o.type), i
                },
                g = function(e) {
                    return e ? e && t.stringUtils.startsWith(e, "#") ? e : "#" + e : null
                },
                f = function(t) {
                    var n = e.indexOf(a.oldValues, t);
                    return e.includes(a.newValues, t) ? t : -1 !== n ? a.newValues[n] : a.newValues[1]
                },
                y = function(e) {
                    for (var t, n = {}, i = /([^&=]+)=([^&]*)/g; t = i.exec(e);) n[t[1]] = t[2];
                    return n
                },
                w = function() {
                    var t, i = e.keys(n.data.document_data);
                    do {
                        t = (t = (new Date).getTime().toString(36) + "_" + Math.round(99999 * Math.random()).toString(36)).replace(/\s/g, "_")
                    } while (i[t]);
                    return t
                },
                h = n.data.document_data,
                v = {};
            i = function(t) {
                return e.filter(t, function(t) {
                    var n = !(t.type === o.toFix[2]) || "2.0" !== t.metaData.schemaVersion;
                    return !t.link && e.includes(o.toFix, t.type) && n
                })
            }(h), e.forEach(i, function(e) {
                var t = s(e);
                t && (h[e.id] = t)
            }), i = function(t) {
                return e.filter(t, function(t) {
                    return t.linkType && e.includes(o.originalLink, t.type)
                })
            }(h), e.forEach(i, function(e) {
                var t = u(e);
                t && (h[e.id] = t)
            }), e.assign(h, v)
        }
    }
}), define("dataFixer/plugins/fromDocumentToThemeData", [], function() {
    return {
        exec: function(e) {
            var t = e.data;
            t.document_data.THEME_DATA && (t.theme_data.THEME_DATA || (t.theme_data.THEME_DATA = t.document_data.THEME_DATA), delete t.document_data.THEME_DATA)
        }
    }
}), define("dataFixer/plugins/tpaGluedWidgetDataFixer", ["lodash"], function(e) {
    function t(t) {
        e.forEach(t.structure.children, function(e) {
            e.componentType === n && (e.layout.fixedPosition = !0)
        })
    }
    var n = "wysiwyg.viewer.components.tpapps.TPAGluedWidget";
    return {
        exec: function(n) {
            "masterPage" === e.get(n, "structure.id") && t(n)
        }
    }
}), define("dataFixer/plugins/tpaAddChatAppDataFixer", ["lodash", "experiment"], function(e, t) {
    function n(t, n) {
        var o = e.find(t, {
            appDefinitionId: h
        });
        if (o && !c(o) && !u(n)) {
            var d = e.get(o, "widgets." + v),
                l = p("comp", "-"),
                m = p("dataItem", "-"),
                g = p("propItem", "-"),
                f = i(l, m, g, d);
            n.structure.children.push(f), n.data.document_data[m] = r(o, m), n.data.component_properties[g] = a(d), n.data.theme_data[f.styleId] || (n.data.theme_data[f.styleId] = s(f.styleId))
        }
    }

    function i(t, n, i, o, r) {
        return {
            type: "Component",
            styleId: r || "tpagw0",
            id: t,
            dataQuery: "#" + n,
            skin: "wysiwyg.viewer.skins.TPAWidgetSkin",
            layout: {
                width: e.get(o, "defaultWidth") || 320,
                height: e.get(o, "defaultHeight") || 250,
                x: e.get(o, "x") || 0,
                y: e.get(o, "y") || 0,
                scale: 1,
                rotationInDegrees: 0,
                fixedPosition: e.get(o, "fixedPosition") || !0
            },
            propertyQuery: i,
            componentType: "wysiwyg.viewer.components.tpapps.TPAGluedWidget"
        }
    }

    function o(e, t, n, o) {
        return i(e, t = f(t), n = f(n), {
            x: 10,
            y: 10,
            width: 0,
            height: 5,
            fixedPosition: !1
        }, o)
    }

    function r(e, t) {
        return {
            type: "TPAWidget",
            id: t,
            metaData: {
                isPreset: !1,
                schemaVersion: "1.0",
                isHidden: !1
            },
            applicationId: e.applicationId,
            widgetId: v
        }
    }

    function a(t) {
        return {
            type: "TPAGluedProperties",
            metaData: {
                schemaVersion: "1.0"
            },
            placement: e.get(t, "gluedOptions.placement"),
            verticalMargin: e.get(t, "gluedOptions.verticalMargin"),
            horizontalMargin: e.get(t, "gluedOptions.horizontalMargin")
        }
    }

    function s(e) {
        return {
            type: "TopLevelStyle",
            styleType: "system",
            compId: "",
            componentClassName: "wysiwyg.viewer.components.tpapps.TPAGluedWidget",
            pageId: "",
            skin: "wysiwyg.viewer.skins.TPAWidgetSkin",
            style: {
                groups: {},
                properties: {},
                propertiesSource: {}
            },
            id: e,
            metaData: {
                isPreset: !1,
                schemaVersion: "1.0",
                isHidden: !1
            }
        }
    }

    function u(t) {
        return e.find(t.structure.children, function(n) {
            if (!n.dataQuery) return !1;
            var i = t.data.document_data[n.dataQuery.replace("#", "")];
            return e.get(i, "widgetId") === v
        })
    }

    function c(t) {
        return !0 === e.get(t, "permissions.revoked")
    }

    function p(e, t) {
        return d(k, e, t, Date.now())
    }

    function d(e, t, n, i) {
        t = t || "", n = n || "";
        var o = i;
        return o === e.lastGeneratedId ? e.counter++ : (e.lastGeneratedId = o, e.counter = 0), t + n + Number(e.lastGeneratedId).toString(36) + (e.counter || "")
    }

    function l(t, n) {
        var i = e.find(n, {
            appDefinitionId: h
        });
        t && t.structure.id === T && i && !e.get(i, "permissions.revoked") && u(t) && m(t.data, t.structure.children, i) && !m(t.data, t.structure.mobileComponents, i) && y(t, g(t.data.document_data, t.structure.children, i))
    }

    function m(e, t, n) {
        return !!g(e.document_data, t, n)
    }

    function g(t, n, i) {
        for (var o = [].concat(n); !e.isEmpty(o);) {
            var r = o.shift();
            if (r.componentType === w) {
                var a = t[f(r.dataQuery)];
                if (Number(a.applicationId) === Number(i.applicationId)) return r
            }
            e.isEmpty(r.components) || (o = o.concat(r.components))
        }
        return null
    }

    function f(e) {
        return e && "#" === e[0] ? e.substr(1) : e
    }

    function y(t, n) {
        var i = t.structure.mobileComponents,
            r = e.find(i, {
                id: "SITE_FOOTER"
            }),
            a = n.dataQuery,
            s = n.propertyQuery,
            u = n.styleId;
        r && e.isArray(r.components) ? r.components.push(o(n.id, a, s, u)) : i.push(o(n.id, a, s, u))
    }
    var w = "wysiwyg.viewer.components.tpapps.TPAGluedWidget",
        h = "14517e1a-3ff0-af98-408e-2bd6953c36a2",
        v = "14517f3f-ffc5-eced-f592-980aaa0bbb5c",
        T = "masterPage",
        k = {
            lastGeneratedId: void 0,
            counter: 0
        };
    return {
        exec: function(i, o, r, a, s, u, c) {
            var p = e.get(c, "clientSpecMap");
            if ("masterPage" === i.structure.id) {
                n(p, i);
                var d = e.get(c, "siteMetaData.quickActions.configuration.quickActionsMenuEnabled");
                t.isOpen("sv_qab", {
                    rendererModel: c
                }) && e.get(i, "structure.id") === T && !d && l(i, p)
            }
        }
    }
}), define("dataFixer/imageService/imageTransformDataFixers", ["lodash", "imageClientApi"], function(e, t) {
    function n(e) {
        return (e || "").toLowerCase().trim()
    }

    function i(e) {
        var t = n(e.bgRepeat),
            i = n(e.bgSize),
            o = d[t];
        return l[i] && l[i](o)
    }

    function o(e) {
        return e = n(e), m[e]
    }

    function r(e) {
        return g[e] || g[""]
    }

    function a(e) {
        return f[e] || f[""]
    }

    function s(e) {
        return y[e] || y[""]
    }

    function u(e) {
        return e === c.TILE ? c.LEGACY_STRIP_TILE : e === c.TILE_HORIZONTAL ? c.LEGACY_STRIP_TILE_HORIZONTAL : e === c.TILE_VERTICAL ? c.LEGACY_STRIP_TILE_VERTICAL : e === c.SCALE_TO_FILL ? c.LEGACY_STRIP_SCALE_TO_FILL : e === c.SCALE_TO_FIT ? c.LEGACY_STRIP_SCALE_TO_FIT : e === c.FIT_AND_TILE ? c.LEGACY_STRIP_FIT_AND_TILE : e === c.LEGACY_ORIGINAL_SIZE ? c.LEGACY_STRIP_ORIGINAL_SIZE : e
    }
    var c = t.fittingTypes,
        p = t.alignTypes,
        d = {
            "repeat-x": c.TILE_HORIZONTAL,
            "repeat no_repeat": c.TILE_HORIZONTAL,
            "repeat no-repeat": c.TILE_HORIZONTAL,
            "repeat-y": c.TILE_VERTICAL,
            "no_repeat repeat": c.TILE_VERTICAL,
            "no-repeat repeat": c.TILE_VERTICAL,
            repeat: c.TILE,
            "repeat repeat": c.TILE,
            "": ""
        };
    Object.freeze(d);
    var l = {
        auto: function(e) {
            return e || c.LEGACY_ORIGINAL_SIZE
        },
        cover: function() {
            return c.SCALE_TO_FILL
        },
        contain: function(e) {
            return e ? c.FIT_AND_TILE : c.SCALE_TO_FIT
        },
        "": function() {
            return c.SCALE_TO_FILL
        }
    };
    Object.freeze(l);
    var m = {
        "center center": p.CENTER,
        center: p.CENTER,
        "50% 50%": p.CENTER,
        "top center": p.TOP,
        "center top": p.TOP,
        "50% 0%": p.TOP,
        "bottom center": p.BOTTOM,
        "center bottom": p.BOTTOM,
        "50% 100%": p.BOTTOM,
        "center right": p.RIGHT,
        "right center": p.RIGHT,
        "100% 50%": p.RIGHT,
        "center left": p.LEFT,
        "left center": p.LEFT,
        "0% 50%": p.LEFT,
        "left top": p.TOP_LEFT,
        "top left": p.TOP_LEFT,
        "0% 0%": p.TOP_LEFT,
        "right top": p.TOP_RIGHT,
        "top right": p.TOP_RIGHT,
        "100% 0%": p.TOP_RIGHT,
        "left bottom": p.BOTTOM_LEFT,
        "bottom left": p.BOTTOM_LEFT,
        "0% 100%": p.BOTTOM_LEFT,
        "right bottom": p.BOTTOM_RIGHT,
        "bottom right": p.BOTTOM_RIGHT,
        "100% 100%": p.BOTTOM_RIGHT,
        "": p.CENTER
    };
    Object.freeze(m);
    var g = function() {
        var e = {};
        return e[c.LEGACY_STRIP_TILE_HORIZONTAL] = "repeat-x", e[c.TILE_HORIZONTAL] = "repeat-x", e[c.LEGACY_STRIP_TILE_VERTICAL] = "repeat-y", e[c.TILE_VERTICAL] = "repeat-y", e[c.LEGACY_STRIP_TILE] = "repeat", e[c.TILE] = "repeat", e[c.FIT_AND_TILE] = "repeat", e[""] = "no-repeat", e
    }();
    Object.freeze(g);
    var f = function() {
        var e = {};
        return e[c.LEGACY_ORIGINAL_SIZE] = "auto", e[c.LEGACY_STRIP_ORIGINAL_SIZE] = "auto", e[c.SCALE_TO_FILL] = "cover", e[c.LEGACY_STRIP_SCALE_TO_FILL] = "cover", e[c.SCALE_TO_FIT] = "contain", e[c.LEGACY_STRIP_SCALE_TO_FIT] = "contain", e[c.FIT_AND_TILE] = "contain", e[c.LEGACY_STRIP_FIT_AND_TILE] = "contain", e[""] = "auto", e
    }();
    Object.freeze(f);
    var y = function() {
        var e = {};
        return e[p.TOP] = "center top", e[p.CENTER] = "center", e[p.BOTTOM] = "center bottom", e[p.TOP_LEFT] = "left top", e[p.LEFT] = "left center", e[p.BOTTOM_LEFT] = "left bottom", e[p.TOP_RIGHT] = "right top", e[p.RIGHT] = "right center", e[p.BOTTOM_RIGHT] = "right bottom", e[""] = "center", e
    }();
    return Object.freeze(y), {
        cssToFittingType: i,
        cssToAlignType: o,
        fittingTypeToBgRepeat: r,
        fittingTypeToBgSize: a,
        alignTypeToBgPosition: s,
        migrateToLegacyFittings: u
    }
}), define("dataFixer/plugins/compsWithImagesDataFixer", ["lodash", "dataFixer/imageService/imageTransformDataFixers"], function(e, t) {
    function n(t) {
        e.forEach(t, function(e) {
            var t = o[e.type];
            t && t(e)
        })
    }

    function i(t) {
        e.noop(t)
    }
    var o = {
        BgImageStripProperties: function(e) {
            e.fittingType = t.cssToFittingType({
                bgSize: e.bgSize,
                bgRepeat: e.bgRepeat
            }), e.fittingType = t.migrateToLegacyFittings(e.fittingType), e.alignType = t.cssToAlignType(e.bgPosition), e.type = "BgImageStripUnifiedProperties", delete e.bgSize, delete e.bgRepeat, delete e.bgPosition, delete e.bgUrl
        }
    };
    return {
        exec: function(t) {
            var o = t.data.component_properties,
                r = t.data.document_data;
            e.isEmpty(o) || n(o), e.isEmpty(r) || i(r)
        }
    }
}), define("dataFixer/plugins/appPartCustomizationsFixer", ["lodash"], function(e) {
    function t(t) {
        e(n).values().forEach(function(n) {
            e(t.data.document_data).filter(n.filterAppPart).forEach(function(t) {
                t.appLogicCustomizations = e(t.appLogicCustomizations).map(function(t) {
                    return e.find([t], n.filterAppLogicCustomization) ? n.modify(t) : t
                }).compact().value()
            })
        })
    }
    var n = {
        faq: {
            filterAppPart: {
                appPartName: "f2c4fc13-e24d-4e99-aadf-4cff71092b88",
                viewName: "ExpandQuestions"
            },
            filterAppLogicCustomization: {
                type: "AppPartCustomization",
                forType: "Category",
                view: "ToggleMobile",
                key: "comp.initialState",
                fieldId: "toggle",
                format: "Mobile"
            },
            modify: function(t) {
                return e.assign(t, {
                    fieldId: "vars",
                    key: "initialState"
                })
            }
        }
    };
    return {
        exec: t
    }
}), define("dataFixer/plugins/backgroundMediaConverter", ["lodash", "imageClientApi", "dataFixer/imageService/imageTransformDataFixers", "coreUtils"], function(e, t, n, i) {
    function o(t, n) {
        var i = e.filter(t, function(e) {
                return "Page" === e.type || "AppPage" === e.type
            }),
            o = e.map(i, "id");
        e.some(i, function(e) {
            return e.pageBackgrounds && e.pageBackgrounds.desktop.ref
        }) ? a(t) : c(t, n.siteBg, n.mobileBg && "[siteBg]" !== n.mobileBg ? n.mobileBg : n.siteBg, o)
    }

    function r(e) {
        a(e)
    }

    function a(t) {
        var n = e.filter(t, {
            type: h
        });
        e.forEach(n, function(e) {
            s(t, e)
        })
    }

    function s(e, t) {
        var n = t.id,
            o = i.guidUtils.getUniqueId(v + k);
        u(e, l(t), n, o)
    }

    function u(t, n, i, o) {
        t[i] = e.assign({
            id: i
        }, n.bgItem), n.imageItem && (t[i].mediaRef = "#" + o, t[o] = e.assign({
            id: o
        }, n.imageItem))
    }

    function c(t, n, o, r) {
        var a = d(n),
            s = d(o);
        e.forEach(r, function(e) {
            var n = i.guidUtils.getUniqueId(T, k),
                o = i.guidUtils.getUniqueId(T, k),
                r = n.replace(T, v),
                u = o.replace(T, v);
            p(t, a, e, n, r, "desktop"), p(t, s, e, o, u, "mobile")
        })
    }

    function p(e, t, n, i, o, r) {
        e[n].pageBackgrounds = e[n].pageBackgrounds || {
            desktop: "",
            mobile: ""
        }, e[n].pageBackgrounds[r] = {
            ref: "#" + i,
            custom: !0,
            isPreset: !1
        }, u(e, t, i, o)
    }

    function d(t) {
        return g(m.apply(this, e.compact(t.split(" "))))
    }

    function l(e) {
        return g(m.apply(this, [e.url, e.imagesizew, e.imagesizeh, e.positionx, e.positiony, e.width, e.repeatx, e.repeaty, e.attachment, e.color, e.metaData]))
    }

    function m(e, t, n, i, o, r, a, s, u, c, p) {
        return p = p || {}, {
            imageId: e,
            imageW: t,
            imageH: n,
            x: i,
            y: o,
            width: r,
            repeatX: a,
            repeatY: s,
            attachment: u,
            color: c,
            metaData: {
                isPreset: p.isPreset || !1,
                schemaVersion: "2.0",
                isHidden: p.isHidden || !1
            }
        }
    }

    function g(e) {
        var t = {
                bgItem: {}
            },
            i = "rgb(255,255,255)",
            o = n.cssToAlignType(e.x + " " + e.y),
            r = n.cssToFittingType({
                bgRepeat: e.repeatX + " " + e.repeatY,
                bgSize: e.width
            }),
            a = "fixed" === e.attachment ? "fixed" : "scroll";
        return r = f(r), e.color && "none" !== e.color && (i = e.color), e.imageId && "none" !== e.imageId && (t.imageItem = {
            type: "Image",
            uri: e.imageId,
            width: parseInt(e.imageW, 10),
            height: parseInt(e.imageH, 10),
            metaData: {
                isPreset: !1,
                schemaVersion: "1.0",
                isHidden: !1
            }
        }), t.bgItem = {
            type: "BackgroundMedia",
            color: i,
            alignType: o,
            fittingType: r,
            scrollType: a,
            metaData: e.metaData
        }, t
    }

    function f(e) {
        var n = {};
        return n[t.fittingTypes.TILE] = t.fittingTypes.LEGACY_BG_FIT_AND_TILE, n[t.fittingTypes.TILE_HORIZONTAL] = t.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL, n[t.fittingTypes.TILE_VERTICAL] = t.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL, n[t.fittingTypes.LEGACY_ORIGINAL_SIZE] = t.fittingTypes.LEGACY_BG_NORMAL, n[e] || e
    }

    function y(e) {
        e.siteBg = w(e.siteBg), e.mobileBg && "[siteBg]" !== e.mobileBg && (e.mobileBg = w(e.mobileBg))
    }

    function w(t) {
        var n = e.compact(t.split(" ")),
            i = m.apply(this, n).color;
        return i && (i = (i = i.replace("[", "{")).replace("]", "}"), n[9] = i), n.join(" ")
    }
    var h = "BackgroundImage",
        v = "bgImage",
        T = "mediaBg",
        k = "-";
    return {
        exec: function(t) {
            if (t.structure) {
                var n = t.data.theme_data && t.data.theme_data.THEME_DATA,
                    i = t.data.document_data,
                    a = e.some(i, {
                        type: "BackgroundMedia"
                    }),
                    s = e.some(i, {
                        type: h
                    });
                a && !s || ("Document" === t.structure.type ? (y(n), o(i, n)) : r(i))
            }
        }
    }
}), define("dataFixer/plugins/backgroundMediaUndefinedFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(e, n) {
        return t.guidUtils.getUniqueId(n.id, "_") + e
    }

    function i(t, n) {
        n[t] = e.assign({
            id: t
        }, r)
    }

    function o(t) {
        var o = e.filter(t, function(e) {
            return "Page" === e.type || "AppPage" === e.type
        });
        e.forEach(o, function(o) {
            var r;
            e.defaults(o, a), o.pageBackgrounds.mobile.ref || (i(r = n("_mobile_bg", o), t), o.pageBackgrounds.mobile.ref = "#" + r), o.pageBackgrounds.desktop.ref || (i(r = n("_desktop_bg", o), t), o.pageBackgrounds.desktop.ref = "#" + r)
        })
    }
    var r = {
            alignType: "center",
            color: "{color_11}",
            fittingType: "fill",
            scrollType: "scroll",
            type: "BackgroundMedia"
        },
        a = {
            pageBackgrounds: {
                desktop: {
                    custom: !0,
                    isPreset: !0,
                    ref: null
                },
                mobile: {
                    custom: !0,
                    isPreset: !0,
                    ref: null
                }
            }
        };
    return {
        exec: function(t) {
            if (t.structure) {
                var n = t.data.document_data;
                e.some(n, {
                    type: "BackgroundMedia"
                }) && o(n)
            }
        }
    }
}), define("dataFixer/plugins/backgroundMediaRefDuplicationFixer", ["lodash"], function(e) {
    function t(t, n, i) {
        i[t] = e.assign({
            id: t
        }, e.omit(n, "id"))
    }

    function n(e, t, n) {
        return e + "_" + t + "_" + n
    }

    function i(i, o, r, a, s) {
        if (0 !== i[o].indexOf("#" + a)) {
            var u = e.cloneDeep(s[i[o].replace("#", "")]),
                c = n(a, r, o);
            t(c, u, s), i[o] = "#" + c
        }
    }

    function o(e, t, n) {
        var o, r = n[t.pageBackgrounds[e].ref.replace("#", "")];
        r && r.mediaRef && ("WixVideo" === (o = n[r.mediaRef.replace("#", "")]).type && i(o, "posterImageRef", e, t.id, n), r.imageOverlay && i(r, "imageOverlay", e, t.id, n), i(r, "mediaRef", e, t.id, n))
    }

    function r(e, t) {
        e.pageBackgrounds && (o("mobile", e, t), o("desktop", e, t))
    }
    return {
        exec: function(t) {
            if (t.structure) {
                var n = t.data.document_data,
                    i = e.filter(n, function(e) {
                        return "Page" === e.type || "AppPage" === e.type
                    });
                e.forEach(i, function(e) {
                    r(e, n)
                })
            }
        }
    }
}), define("dataFixer/plugins/stripContainerBgEffectFixer", ["lodash", "dataFixer/helpers/behaviorsMigrationHelper"], function(e, t) {
    function n(t, n) {
        var i = e.get(n, [t.behaviorQuery, "items"], "[]");
        return JSON.parse(i)
    }

    function i(e, t) {
        var n, i;
        return i = e.designQuery.replace("#", ""), n = t[i].background.replace("#", ""), t[n]
    }

    function o(o, r, a) {
        var s, p;
        if (e.includes(u, o.componentType)) {
            var d = i(o, r);
            if (p = d.scrollType, d.scrollType = "none", "scroll" !== p && "none" !== p) {
                s = n(o, a), (s = e.reject(s, {
                    name: "ContainerFixedBg",
                    action: "bgScrub"
                })).push(c[p]);
                var l = JSON.stringify(s);
                if (o.behaviorQuery) e.set(a, [o.behaviorQuery, "items"], l);
                else {
                    var m = t.createBehaviorsDataItem(l);
                    e.set(a, m.id, m), o.behaviorQuery = m.id
                }
            }
        }
    }

    function r(t, o, r) {
        var a;
        e.includes(u, t.componentType) && (i(t, o).scrollType = "none", a = n(t, r), a = e.reject(a, {
            name: "ContainerFixedBg",
            action: "bgScrub"
        }), e.isEmpty(a) ? (delete t.behaviors, delete t.behaviorQuery) : e.set(r, [t.behaviorQuery, "items"], JSON.stringify(a)))
    }

    function a(t, n, i) {
        e.forEach(t, function(e) {
            o(e, n, i), e.components && a(e.components, n, i)
        })
    }

    function s(t, n, i) {
        e.forEach(t, function(e) {
            r(e, n, i), e.components && s(e.components, n, i)
        })
    }
    var u = ["wysiwyg.viewer.components.StripContainer", "wysiwyg.viewer.components.StripContainerSlideShowSlide"],
        c = {
            fixed: {
                action: "bgScrub",
                name: "BackgroundReveal",
                duration: 1,
                delay: 0
            },
            parallax: {
                action: "bgScrub",
                name: "BackgroundParallax",
                duration: 1,
                delay: 0
            }
        };
    return {
        exec: function(e) {
            var t, n = e.structure;
            if (n) {
                t = e.data.design_data;
                var i = e.data.behaviors_data;
                n.components && a(n.components, t, i), n.children && a(n.children, t, i), n.mobileComponents && s(n.mobileComponents, t, i)
            }
        }
    }
}), define("dataFixer/plugins/documentMediaFixer", ["lodash"], function(e) {
    return {
        exec: function(t) {
            if ("Page" === t.structure.type) {
                var n = t.structure.components,
                    i = t.data.document_data;
                e.forEach(n, function(t) {
                    if (e.includes(t.componentType, "DocumentMedia")) {
                        var n = t.dataQuery,
                            o = i[n.replace("#", "")];
                        0 === o.uri.indexOf("media/") && (o.uri = o.uri.replace("media/", ""))
                    }
                })
            }
            return t
        }
    }
}), define("dataFixer/plugins/pinterestFollowFixer", ["lodash"], function(e) {
    var t = function(t) {
        t.urlChoice = e.includes(t.urlChoice, "pinterest.com") ? t.urlChoice : "www.pinterest.com/" + t.urlChoice
    };
    return {
        exec: function(n) {
            return e(n.data.document_data).pickBy({
                type: "PinterestFollow"
            }).mapValues(t).value()
        }
    }
}), define("dataFixer/plugins/blogPageMenuFixer", ["lodash"], function(e) {
    function t(e) {
        var t = n(e);
        t && i(e, "#" + t)
    }

    function n(t) {
        var n = e.findKey(t, function(e) {
            return e.appPageId && "7326bfbb-4b10-4a8e-84c1-73f776051e10" === e.appPageId
        });
        if (!n) return null;
        var i = e.findKey(t, function(e) {
            return e.pageId && e.pageId === "#" + n
        });
        return e.findKey(t, function(e) {
            return e.link && e.link === "#" + i
        })
    }

    function i(t, n) {
        var i = t.CUSTOM_MAIN_MENU && t.CUSTOM_MAIN_MENU.items;
        e.forEach(i, function(i) {
            var o = t[i.replace("#", "")].items,
                r = e.indexOf(o, n);
            if (-1 !== r) return o.splice(r, 1), t.CUSTOM_MAIN_MENU.items.push(n), !1
        })
    }
    return {
        exec: function(e) {
            return e.structure && "Document" === e.structure.type && t(e.data.document_data), e
        }
    }
}), define("dataFixer/plugins/appPartMediaInnerCustomizationFormatFixer", ["lodash", "coreUtils"], function(e, t) {
    var n = {
        exec: function(i) {
            i.data && i.data.document_data && e(i.data.document_data).filter(function(e) {
                return n.isAppPartType(e.type)
            }).forEach(function(n) {
                e(n.appLogicCustomizations).compact().groupBy("view").filter(function(e, n) {
                    return t.appPartMediaInnerViewNameUtils.isMediaInnerViewName(n)
                }).forEach(function(t) {
                    e(t).groupBy("fieldId").filter(function(t) {
                        return e.isEqual(e.map(t, "format"), [""])
                    }).forEach(function(t) {
                        e.forEach(t, function(e) {
                            e.format = "*"
                        })
                    })
                })
            })
        },
        isAppPartType: function(e) {
            return "AppPart" === e
        }
    };
    return n
}), define("dataFixer/plugins/appPartReadMoreValueCustomizationFormatFixer", ["lodash", "coreUtils"], function(e, t) {
    var n = {
        exec: function(t) {
            t.data && e(t.data.document_data).filter(function(t) {
                return t.type === n.getAppPartType() && e.includes(n.getBlogFeedAppPartNames(), t.appPartName)
            }).forEach(function(t) {
                var i = t.appLogicCustomizations;
                e(i).compact().filter(function(t) {
                    return t.fieldId === n.getReadMoreValueCustomizationFieldId() && t.key === n.getReadMoreValueCustomizationKey() && "" === t.format && e.includes(n.getAffectedReadMoreValueCustomizationViews(), t.view)
                }).forEach(function(t) {
                    e.remove(i, {
                        fieldId: t.fieldId,
                        format: "*",
                        key: t.key,
                        view: t.view
                    }), t.format = "*"
                })
            })
        },
        getAppPartType: function() {
            return "AppPart"
        },
        getBlogFeedAppPartNames: function() {
            return [t.blogAppPartNames.FEED, t.blogAppPartNames.CUSTOM_FEED]
        },
        getReadMoreValueCustomizationFieldId: function() {
            return "ReadMoreBtn"
        },
        getReadMoreValueCustomizationKey: function() {
            return "value"
        },
        getAffectedReadMoreValueCustomizationViews: function() {
            return ["MediaLeft", "MediaLeftPage", "MediaRight", "MediaRightPage", "MediaZigzag", "MediaZigzagPage", "Masonry", "MasonryPage"]
        }
    };
    return n
}), define("dataFixer/plugins/appPartTagsValueCustomizationFormatFixer", ["lodash"], function(e) {
    return {
        exec: function(t) {
            e(t.data.document_data).filter({
                type: "AppPart"
            }).forEach(function(t) {
                e(t.appLogicCustomizations).filter({
                    fieldId: "tagsValue",
                    forType: "Post",
                    format: "",
                    key: "value",
                    view: "SinglePostMediaTop"
                }).forEach(function(e) {
                    e.format = "*"
                })
            })
        }
    }
}), define("dataFixer/plugins/appPartDuplicateCustomizationFixer", ["lodash"], function(e) {
    function t(t) {
        var n = e.omit(t, "value");
        return JSON.stringify(n)
    }
    return {
        exec: function(n) {
            e(n.data.document_data).filter({
                type: "AppPart"
            }).forEach(function(e) {
                for (var n = e.appLogicCustomizations, i = n.length, o = {}; i;) {
                    var r = t(n[i -= 1]);
                    o[r] ? n.splice(i, 1) : o[r] = !0
                }
            })
        }
    }
}), define("dataFixer/plugins/blogCustomFeedPostsPerPageCustomizationFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(t) {
        return "Array" === t.forType && "comp.itemsPerPage" === t.key && e.includes(["", "*"], t.format) && e.includes(["paginatedlist", "columnBlog"], t.fieldId) && e.includes(["MediaTop", "MediaBottom", "MediaLeft", "MediaRight", "MediaZigzag", "Masonry"], t.view)
    }
    return {
        exec: function(i) {
            e(i.data.document_data).filter({
                type: "AppPart",
                appPartName: t.blogAppPartNames.CUSTOM_FEED
            }).forEach(function(t) {
                e(t.appLogicCustomizations).filter(n).forEach(function(t) {
                    e.assign(t, {
                        fieldId: "vars",
                        format: "*",
                        key: "itemsPerPage"
                    })
                })
            })
        }
    }
}), define("dataFixer/plugins/blogDateAndAuthorHiddenCustomizationFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(t) {
        return "Post" === t.forType && "comp.hidden" === t.key && ("date" === t.fieldId || "author" === t.fieldId) && e.includes(["MediaTop", "MediaBottom", "MediaLeft", "MediaRight", "MediaZigzag", "Masonry", "MediaTopPage", "MediaBottomPage", "MediaLeftPage", "MediaRightPage", "MediaZigzagPage", "MasonryPage", "SinglePostMediaBottom", "SinglePostMediaTop"], t.view)
    }
    return {
        exec: function(i) {
            e(i.data.document_data).filter(function(n) {
                return "AppPart" === n.type && e.includes([t.blogAppPartNames.CUSTOM_FEED, t.blogAppPartNames.FEED, t.blogAppPartNames.SINGLE_POST], n.appPartName)
            }).forEach(function(t) {
                e(t.appLogicCustomizations).filter(n).forEach(function(t) {
                    e.assign(t, {
                        fieldId: "dateAndAuthor"
                    })
                })
            })
        }
    }
}), define("dataFixer/plugins/blogDateAlignmentCustomizationFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(t) {
        return "Post" === t.forType && "layout.spacerBefore" === t.key && "date" === t.fieldId && e.includes(["MediaTop", "MediaBottom", "MediaLeft", "MediaRight", "MediaZigzag", "Masonry", "MediaTopPage", "MediaBottomPage", "MediaLeftPage", "MediaRightPage", "MediaZigzagPage", "MasonryPage", "SinglePostMediaBottom", "SinglePostMediaTop"], t.view)
    }
    return {
        exec: function(i) {
            e(i.data.document_data).filter(function(n) {
                return "AppPart" === n.type && e.includes([t.blogAppPartNames.CUSTOM_FEED, t.blogAppPartNames.FEED, t.blogAppPartNames.SINGLE_POST], n.appPartName)
            }).forEach(function(t) {
                e(t.appLogicCustomizations).filter(n).forEach(function(t) {
                    e.assign(t, {
                        fieldId: "vars",
                        key: "dateAndAuthorPosition",
                        value: "0" === t.value ? "left" : "right"
                    })
                })
            })
        }
    }
}), define("dataFixer/plugins/appPartBrokenButtonStyleFixer", ["lodash", "coreUtils"], function(e, t) {
    var n = null;
    return {
        exec: function(i) {
            e.isNull(n) && (n = [], e.forEach(i.data.theme_data, function(t, i, o) {
                e.matches({
                    componentClassName: "wysiwyg.viewer.components.SiteButton",
                    skin: "wysiwyg.viewer.skins.AppPartSkin"
                })(t) && (n.push(i), delete o[i])
            }), setTimeout(function() {
                n = null
            })), e(i.data.document_data).filter(function(n) {
                return "AppPart" === n.type && e.includes(t.blogAppPartNames, n.appPartName)
            }).forEach(function(t) {
                e.remove(t.appLogicCustomizations, function(t) {
                    return "comp.style" === t.key && e.includes(n, t.value)
                })
            })
        }
    }
}), define("dataFixer/plugins/blogDateFormatCustomizationFormatFixer", ["lodash", "coreUtils"], function(e, t) {
    var n = {};
    return n[t.blogAppPartNames.FEED] = ["MediaBottomPage", "MediaLeftPage", "MediaRightPage", "MediaTopPage", "MediaZigzagPage"], n[t.blogAppPartNames.POSTS_LIST] = ["PostsList", "PostsListMediaLeft"], n[t.blogAppPartNames.TICKER] = ["TickerMediaBottom", "TickerMediaTop"], {
        exec: function(i) {
            e(i.data.document_data).filter(function(n) {
                return "AppPart" === n.type && e.includes([t.blogAppPartNames.FEED, t.blogAppPartNames.POSTS_LIST, t.blogAppPartNames.TICKER], n.appPartName)
            }).forEach(function(t) {
                e(t.appLogicCustomizations).filter(function(i) {
                    return "date" === i.fieldId && "Post" === i.forType && !i.format && "comp.format" === i.key && e.includes(n[t.appPartName], i.view)
                }).forEach(function(e) {
                    e.format = "*"
                })
            })
        }
    }
}), define("dataFixer/plugins/contactFormDataFixer", ["lodash", "coreUtils", "translationsUtils"], function(e, t, n) {
    function i(t) {
        return "Template" === e.get(t, "siteInfo.documentType")
    }

    function o(o, r, s, u) {
        var c, p;
        i(u) && (c = t.wixUserApi.getLanguage(r.cookie, s), (p = n.contactFormTranslations[c]) && e.forOwn(o, function(t) {
            "ContactForm" === t.type && e.forEach(a, function(e) {
                t[e] = p[e] || t[e]
            })
        }))
    }

    function r(t) {
        e.forOwn(t, function(e) {
            "ContactForm" === e.type && (e.onSubmitBehavior || (e.onSubmitBehavior = "message"))
        })
    }
    var a = ["addressFieldLabel", "emailFieldLabel", "errorMessage", "messageFieldLabel", "nameFieldLabel", "phoneFieldLabel", "subjectFieldLabel", "submitButtonLabel", "successMessage", "validationErrorMessage"];
    return {
        exec: function(e, t, n, i, a, s, u) {
            var c = e.data.document_data;
            o(c, n, i, u), r(c)
        }
    }
}), define("dataFixer/plugins/subscribeFormDataFixer", ["lodash", "coreUtils", "translationsUtils"], function(e, t, n) {
    function i(t) {
        return "Template" === e.get(t, "siteInfo.documentType")
    }

    function o(o, r, s, u) {
        var c, p;
        i(u) && (c = t.wixUserApi.getLanguage(r.cookie, s), (p = n.subscribeFormTranslations[c]) && e.forOwn(o, function(t) {
            "SubscribeForm" === t.type && e.forEach(a, function(e) {
                t[e] = p[e] || t[e]
            })
        }))
    }

    function r(t) {
        e.forOwn(t, function(e) {
            "SubscribeForm" === e.type && (e.onSubmitBehavior || (e.onSubmitBehavior = "message"))
        })
    }
    var a = ["emailFieldLabel", "errorMessage", "firstNameFieldLabel", "lastNameFieldLabel", "phoneFieldLabel", "submitButtonLabel", "subscribeFormTitle", "successMessage", "validationErrorMessage"];
    return {
        exec: function(e, t, n, i, a, s, u) {
            var c = e.data.document_data;
            o(c, n, i, u), r(c)
        }
    }
}), define("dataFixer/plugins/pageDataFixer", ["lodash"], function(e) {
    function t(t) {
        return "Page" === e.get(t, "structure.type")
    }

    function n(t) {
        e(t.data.document_data).filter({
            type: "Page"
        }).map("id").forEach(function(e) {
            delete t.data.document_data[e]
        })
    }

    function i(t) {
        e.forEach(t.data.document_data, function(e) {
            "#SITE_STRUCTURE" === e.pageId && (e.pageId = "#masterPage")
        })
    }

    function o(e) {
        t(e) && n(e), i(e)
    }
    return {
        exec: o
    }
}), define("dataFixer/plugins/groupFixer", ["lodash"], function(e) {
    function t(e) {
        e.componentType === i && (e.skin = o)
    }

    function n(i) {
        e.forEach(i, function(e) {
            t(e), n(e.components)
        })
    }
    var i = "wysiwyg.viewer.components.Group",
        o = "wysiwyg.viewer.components.GroupSkin";
    return {
        exec: function(e) {
            var t = e.structure;
            if (t) {
                var i = t.components || t.children,
                    o = t.mobileComponents;
                i && n(i), o && n(o)
            }
        }
    }
}), define("dataFixer/plugins/textSecurityFixer", ["lodash"], function(e) {
    function t(t) {
        return e(t).pickBy(function(t) {
            return e.includes(o, t.type)
        }).mapValues(function(e) {
            return e.text = n(e.text), e.text = i(e.text), e
        }).value()
    }

    function n(e) {
        return e && e.replace(/(<object[^>]*>)(.*?)(<\/object>)/gi, "")
    }

    function i(e) {
        return e && e.replace(/<img[^>]*(onerror|onload|onmouseenter|onmousemove|onmouseleave|onmouseover|onmouseup|onmouseout)[^>]*\/?>(<\/img>)?/gi, "")
    }
    var o = ["RichText", "Text", "StyledText", "MediaRichText"];
    return {
        exec: function(e) {
            var n = e.data.document_data;
            n && t(n)
        }
    }
}), define("dataFixer/plugins/pageUriSeoFixer", ["lodash", "coreUtils"], function(e, t) {
    var n = e.matchesProperty(["structure", "type"], "Page"),
        i = e.matchesProperty("format", t.siteConstants.URL_FORMATS.SLASH);
    return {
        exec: function(t, o, r, a, s) {
            i(s) && !n(t) && e.forEach(s.pageIdToResolvedUriSEO, function(e, n) {
                t.data.document_data[n].pageUriSEO = e.curr
            })
        }
    }
}), define("dataFixer/plugins/migrateStripToColumnsContainer", ["lodash", "dataFixer/helpers/CompsMigrationHelper", "coreUtils"], function(e, t, n) {
    function i() {
        return {
            type: "MediaContainerDesignData",
            id: n.guidUtils.getUniqueId("dataItem", "-"),
            background: {
                id: n.guidUtils.getUniqueId("dataItem", "-"),
                type: "BackgroundMedia",
                mediaRef: null,
                alignType: "center",
                fittingType: "fill",
                colorOpacity: 0,
                colorOverlay: "",
                colorOverlayOpacity: 1,
                imageOverlay: "",
                scrollType: "none",
                color: "#FFFFFF"
            }
        }
    }

    function o() {
        return {
            columnsMargin: 0,
            frameMargin: 0,
            fullWidth: !0,
            rowMargin: 0,
            siteMargin: 0,
            type: "StripColumnsContainerProperties"
        }
    }

    function r() {
        return {
            type: "ColumnProperties",
            alignment: 50
        }
    }

    function a(t, i) {
        return {
            id: e.get(i, [t.id, "mediaId"], n.guidUtils.getUniqueId("media")),
            type: "Container",
            layout: {
                width: t.layout.width,
                height: t.layout.height,
                x: 0,
                y: 0,
                scale: 1,
                rotationInDegrees: 0,
                anchors: [{
                    distance: 0,
                    topToTop: 0,
                    originalValue: 0,
                    type: "BOTTOM_PARENT",
                    locked: !0,
                    targetComponent: t.id
                }],
                fixedPosition: !1
            },
            components: t.components,
            componentType: "wysiwyg.viewer.components.Column",
            styleId: "strc1"
        }
    }

    function s(t, n) {
        e.forEach(t.components, function(t) {
            var i = e.get(t, ["layout", "anchors"], []);
            e.forEach(i, function(e) {
                "BOTTOM_PARENT" === e.type && (e.targetComponent = n.id)
            })
        })
    }

    function u(t, n) {
        t.behaviors && (n.behaviors = e.clone(t.behaviors), delete t.behaviors), t.behaviorQuery && (n.behaviorQuery = t.behaviorQuery, delete t.behaviorQuery)
    }

    function c(t, n, c, p) {
        p.componentType = "wysiwyg.viewer.components.StripColumnsContainer", delete p.skin, p.styleId = "strc1", this.setComponentProperties(t, p, o(), n);
        var d = a(p, n);
        if (s(p, d), u(p, d), e.set(n, [p.id, "mediaId"], d.id), this.setComponentProperties(t, d, r(), n), d.designQuery = p.designQuery, delete p.designQuery, c) p.layout.width = 320, p.designQuery = e.get(n, [p.id, "designQuery"]), this.deleteComponentData(t, p);
        else {
            p.layout.width = 980;
            var l = i();
            this.setComponentDesignData(t, p, l, n)
        }
        delete p.dataQuery, p.components = [d]
    }
    var p = new t({
        "wysiwyg.viewer.components.StripContainer": c
    });
    return {
        exec: p.migratePage.bind(p)
    }
}), define("dataFixer/plugins/tinyMenuSkinBackgroundFixer", ["lodash"], function(e) {
    function t(t) {
        function i(t, n, i) {
            e.isUndefined(t) || e.isUndefined(t[n]) || (t[i] = t[i] || t[n])
        }
        if (t.skin === n && !e.isUndefined(t.style) && !e.isUndefined(t.style.properties)) {
            var o = [
                    ["bg", "bgDrop"],
                    ["bg", "bgOpen"],
                    ["txt", "bordercolor"],
                    ["txt", "iconcolor"],
                    ["bordercolor", "borderColorSelected"]
                ],
                r = t.style.properties,
                a = t.style.propertiesSource;
            e.forEach(o, function(e) {
                var t = e[0],
                    n = e[1];
                i(r, t, n), i(a, t, n), i(r, t = "alpha-" + t, n = "alpha-" + n), i(a, t, n)
            })
        }
    }
    var n = "wysiwyg.viewer.skins.mobile.TinyMenuSkin";
    return {
        exec: function(n) {
            var i = n.data && n.data.theme_data;
            e.isEmpty(i) || e.forEach(i, t)
        }
    }
}), define("dataFixer/plugins/tinyMenuLayoutFixer", ["lodash"], function(e) {
    function t(n) {
        var i = e.find(n, {
            id: "TINY_MENU"
        });
        return i ? (i.layout.fixedPosition && i.layout.x > 320 && (i.layout.x = 250), !0) : e.some(n, function(n) {
            return !e.isEmpty(n.components) && t(n.components)
        })
    }
    return {
        exec: function(n) {
            "masterPage" === e.get(n, ["structure", "id"]) && t(n.structure.mobileComponents)
        }
    }
}), define("dataFixer/plugins/designDataFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(e) {
        return "wysiwyg.viewer.components.StripContainer" === e.componentType
    }

    function i(t) {
        return !e.isUndefined(t.designQuery)
    }

    function o(n, i, o) {
        return e.isUndefined(o) && (o = t.guidUtils.getUniqueId("dataItem", "-")), i[o] = {
            id: o,
            type: "MediaContainerDesignData",
            metaData: {
                isPreset: !1,
                schemaVersion: "1.0",
                isHidden: !1
            }
        }, n.designQuery = "#" + o, o
    }

    function r(e, t, n) {
        return t[n] = e[n], delete e[n], t[n]
    }

    function a(t, n, i, o) {
        var a = i[t];
        if (!e.isUndefined(a.background)) {
            var s = a.background.slice(1),
                u = r(i, o, s);
            if (!e.isUndefined(u.mediaRef)) {
                var c = r(i, o, u.mediaRef.slice(1));
                "WixVideo" === c.type && r(i, o, c.posterImageRef.slice(1)), e.isUndefined(c.originalImageDataRef) || r(i, o, c.originalImageDataRef.slice(1)), e.isUndefined(c.link) || delete c.link
            }
            return e.isUndefined(u.imageOverlay) || r(i, o, u.imageOverlay.slice(1)), delete a.background, o[n].background = "#" + s, s
        }
    }

    function s(t, n, i, r, s) {
        var u = s.dataQuery.slice(1),
            c = o(s, n);
        i[u] = c;
        var p = a(u, c, t, n);
        e.isUndefined(p) || (r[u] = p)
    }

    function u(t, n, i, r) {
        var a = r.dataQuery.slice(1),
            s = i[a],
            u = "mobile_" + n[a];
        o(r, t, u), e.isUndefined(s) || (t[u].background = "#" + s)
    }

    function c(t, o, r, a) {
        var c = {},
            p = {},
            d = e.filter(t, n);
        e(d).reject(i).forEach(e.partial(s, r, a, p, c)), e(o).filter(function(e) {
            return n(e) && !i(e)
        }).forEach(e.partial(u, a, p, c))
    }

    function p(t) {
        return e.isUndefined(t.components) ? e.isUndefined(t.children) ? [] : t.children : t.components
    }

    function d(t) {
        for (var n = e.clone(t) || [], i = []; n.length > 0;) {
            var o = n.pop();
            i.push(o);
            var r = p(o);
            e.forEach(r, function(e) {
                n.push(e)
            })
        }
        return i
    }

    function l(e) {
        return d(p(e.structure))
    }

    function m(e) {
        return d(e.structure.mobileComponents)
    }
    return {
        exec: function(e) {
            var t = l(e),
                n = m(e);
            e.data.design_data = e.data.design_data || {}, c(t, n, e.data.document_data, e.data.design_data)
        }
    }
}), define("dataFixer/plugins/homePageLoginDataFixer", ["lodash"], function(e) {
    function t(e) {
        e.metaData && "2.0" === e.metaData.schemaVersion || (e.sendMail = !0)
    }

    function n(n) {
        e.forEach(n, function(e) {
            "LoginToWixLink" !== e.type && "HomePageLogin" !== e.type || t(e)
        })
    }
    return {
        exec: function(t) {
            var i = t.data.document_data;
            e.isEmpty(i) || n(i)
        }
    }
}), define("dataFixer/plugins/characterSetsFixer", ["lodash"], function(e) {
    return {
        exec: function(t) {
            return t.structure && "Document" === t.structure.type && e.isEmpty(t.data.document_data.masterPage.characterSets) && (t.data.document_data.masterPage.characterSets = ["latin"]), t
        }
    }
}), define("dataFixer/plugins/popupPropsTempDataFixer", ["lodash"], function(e) {
    return {
        exec: function(t) {
            var n = e.get(t, ["data", "component_properties", t.structure.id]);
            n && n.popup && (e.forEach(["desktop", "mobile"], function(t) {
                var i = n[t],
                    o = n.popup[t];
                (i || o) && e.set(n, [t, ["popup"]], e.assign(i || {}, o || {}))
            }), delete n.popup)
        }
    }
}), define("dataFixer/plugins/blogSelectionSharerCustomizationsFixer", ["lodash", "coreUtils"], function(e, t) {
    return {
        exec: function(n) {
            e(n.data.document_data).filter({
                type: "AppPart",
                appPartName: t.blogAppPartNames.SINGLE_POST
            }).forEach(function(t) {
                var n = e.find(t.appLogicCustomizations, {
                    forType: "Post",
                    fieldId: "vars",
                    key: "selectionSharerExperimentOpen",
                    view: t.viewName
                });
                n || (n = {
                    forType: "Post",
                    fieldId: "vars",
                    key: "selectionSharerExperimentOpen",
                    view: t.viewName,
                    type: "AppPartCustomization",
                    format: ""
                }, t.appLogicCustomizations.push(n))
            })
        }
    }
}), define("dataFixer/plugins/quickActionBarDataFixer", ["lodash", "experiment"], function(e, t) {
    function n(t) {
        return e.find(t.structure.mobileComponents, {
            id: "QUICK_ACTION_BAR"
        })
    }

    function i(e) {
        e.structure.mobileComponents.push({
            type: "Component",
            id: "QUICK_ACTION_BAR",
            componentType: "wysiwyg.viewer.components.QuickActionBar",
            components: [],
            styleId: "quickActionBarStyle",
            layout: {
                fixedPosition: !0,
                width: 50,
                height: 50,
                x: 254
            },
            activeModes: {}
        })
    }

    function o(t) {
        n(t).styleId = "quickActionBarStyle", e.assign(t.data.theme_data, {
            quickActionBarStyle: {
                type: "TopLevelStyle",
                id: "quickActionBarStyle",
                metaData: {
                    isPreset: !1,
                    schemaVersion: "1.0",
                    isHidden: !1
                },
                skin: "wysiwyg.viewer.skins.quickActionBar.floatingSkin",
                style: {
                    properties: {
                        controlButtonBG: "#fff",
                        controlButtonFG: "#4682b4",
                        controlButtonBorderSize: "0",
                        controlButtonBorderColor: "rgba(255, 255, 255, 0)",
                        actionsBorderSize: "0",
                        actionsBorderColor: "rgba(255, 255, 255, 0)"
                    },
                    propertiesSource: {
                        controlButtonBG: "value",
                        controlButtonFG: "value",
                        controlButtonBorderSize: "value",
                        controlButtonBorderColor: "value",
                        actionsBorderSize: "value",
                        actionsBorderColor: "value"
                    },
                    groups: {}
                },
                componentClassName: "wysiwyg.viewer.components.QuickActionBar",
                pageId: "",
                compId: "",
                styleType: "custom"
            }
        })
    }

    function r(t) {
        n(t).propertyQuery = "quickActionBarProps", e.assign(t.data.component_properties, {
            quickActionBarProps: {
                type: "QuickActionBarProperties",
                metaData: {
                    isPreset: !1,
                    schemaVersion: "1.0",
                    isHidden: !1
                },
                colorScheme: "brand",
                invertColors: !0,
                alignment: "right",
                hideText: !0
            }
        })
    }

    function a(e) {
        return !!n(e)
    }

    function s(t) {
        var n = e.find(t, {
            appDefinitionId: "14517e1a-3ff0-af98-408e-2bd6953c36a2"
        });
        return !e.isUndefined(n) && !e.get(n, "permissions.revoked")
    }

    function u(t) {
        return e.get(t, "quickActions.configuration.quickActionsMenuEnabled", !1)
    }
    return {
        exec: function(n, c, p, d, l, m, g) {
            "masterPage" === n.structure.id && t.isOpen("sv_qab", {
                rendererModel: g
            }) && s(e.get(g, "clientSpecMap")) && !a(n) && !u(e.get(g, "siteMetaData")) && (i(n), o(n), r(n))
        }
    }
}), define("dataFixer/plugins/boxSlideShowDataFixer", ["lodash", "coreUtils", "translationsUtils"], function(e, t, n) {
    function i(t) {
        return "Template" === e.get(t, "siteInfo.documentType")
    }

    function o(o, a, s, u) {
        var c, p;
        i(u) && (c = a ? t.wixUserApi.getLanguage(a.cookie, s) : "en", (p = n.boxSlideShowTranslation[c]) && e.forOwn(o, function(e) {
            if ("boxSlideShowSlide" === e.type || "StripContainerSlideShowSlide" === e.type) {
                var t = e.title ? e.title.split(" ")[1] : "";
                e.title = p[r] && t ? p[r].replace("<%= curr_slide %>", t) : e.title
            }
        }))
    }
    var r = "BOXSLIDESHOW_Regular_Slideshow_Slides_New_Slide_Label";
    return {
        exec: function(e, t, n, i, r, a, s) {
            o(e.data.document_data, n, i, s)
        }
    }
}), define("dataFixer/plugins/appPartMobileFeedMediaDateHiddenFixer", ["lodash", "coreUtils"], function(e, t) {
    var n = {
        exec: function(i) {
            e.forEach(i.data.document_data, function(e) {
                e.appPartName && e.appPartName === t.blogAppPartNames.FEED && n.fixMobileDateCustomization(e)
            })
        },
        fixMobileDateCustomization: function(t) {
            e.forEach(t.appLogicCustomizations, function(e) {
                "date" === e.fieldId && "Mobile" === e.format && "Post" === e.forType && "comp.hidden" === e.key && (e.fieldId = "dateAndAuthor")
            })
        }
    };
    return n
}), define("dataFixer/plugins/migrateTestWidgetToControllers", ["lodash", "dataFixer/helpers/CompsMigrationHelper"], function(e, t) {
    function n(t, n, i, o) {
        var r = this.getComponentData(t, o);
        if ("140a95be-b2e7-3854-96c3-403f44d9e58a" === r.widgetId) {
            o.componentType = "platform.components.AppController", r = {
                applicationId: r.applicationId,
                widgetId: r.widgetId,
                controllerType: r.widgetId,
                settings: JSON.stringify({
                    compId: o.id
                })
            }, this.setComponentData(t, o, r, n);
            var a = t.data.connections_data;
            e.forEach(a, function(t) {
                e.startsWith(t.items[0].role, "button") && t.items.push({
                    controllerId: r.id,
                    role: "buttonRole",
                    type: "ConnectionItem"
                }), e.startsWith(t.items[0].role, "gallery") && t.items.push({
                    controllerId: r.id,
                    role: "galleryRole",
                    type: "ConnectionItem"
                }), e.startsWith(t.items[0].role, "datePicker") && t.items.push({
                    controllerId: r.id,
                    role: "datePickerRole",
                    type: "ConnectionItem"
                })
            })
        }
    }
    var i = new t({
        "wysiwyg.viewer.components.tpapps.TPAWidget": n
    });
    return {
        exec: function(e) {
            "undefined" != typeof window && window.queryUtil && window.queryUtil.isParameterTrue("isWixCodeIntegration") && i.migratePage.call(i, e)
        }
    }
}), define("dataFixer/plugins/originalImageDataRefFixer", ["lodash", "coreUtils"], function(e, t) {
    function n(e) {
        return "Image" === e.type
    }

    function i(e, t) {
        return "undefined" !== t && "null" !== t && e.length > 1
    }

    function o(n, i) {
        var o = i + "_" + t.guidUtils.getUniqueId(),
            r = e.cloneDeep(n[i]);
        return r.id = o, r
    }
    return {
        exec: function(t) {
            var r = e.get(t, ["data", "document_data"]);
            r && e(r).pickBy(n).groupBy("originalImageDataRef").pickBy(i).forOwn(function(t, n) {
                var i = e.tail(t),
                    a = n.replace("#", "");
                e.forEach(i, function(e) {
                    var t = o(r, a);
                    r[t.id] = t, e.originalImageDataRef = "#" + t.id
                })
            })
        }
    }
}), define("dataFixer/plugins/tpaPublicAPIWidgetDataFixer", ["lodash", "experiment"], function(e, t) {
    function n(t, n) {
        var i = t.data.document_data[n.dataQuery.replace("#", "")];
        return {
            widgetId: e.get(i, "widgetId"),
            applicationId: e.get(i, "applicationId")
        }
    }
    return {
        exec: function(i, o, r, a, s, u, c) {
            t.isOpen("sv_tpaAddPublicAPI", {
                rendererModel: c
            }) && e.forEach(i.structure.components, function(t) {
                if ("wysiwyg.viewer.components.tpapps.TPAWidget" === t.componentType) {
                    var o = n(i, t),
                        r = e.get(c, "clientSpecMap[" + o.applicationId + "].widgets", []);
                    e.forEach(r, function(e) {
                        e.publicAPI = {
                            restart: ""
                        }
                    })
                }
            })
        }
    }
}), define("dataFixer/core/fixPageData", ["lodash", "loggingUtils", "dataFixer/plugins/galleriesMobileTypeFixer", "dataFixer/plugins/pageTopFixer", "dataFixer/plugins/masterPageFixer", "dataFixer/plugins/menuFixer", "dataFixer/plugins/verticalMenuFixer", "dataFixer/plugins/skinFixer", "dataFixer/plugins/stylesFixer", "dataFixer/plugins/bgImageStripDataFixer", "dataFixer/plugins/compFixer", "dataFixer/plugins/galleryFixer", "dataFixer/plugins/behaviorsFixer", "dataFixer/plugins/connectionsDataFixer", "dataFixer/plugins/fiveGridLineLayoutFixer", "dataFixer/plugins/toPageAnchorsFixer", "dataFixer/plugins/wrongAnchorsFixer", "dataFixer/plugins/addMissingAnchorsOfMasterPage", "dataFixer/plugins/customSiteMenuFixer", "dataFixer/plugins/sitePagesFixer", "dataFixer/plugins/linkRefDataFixer", "dataFixer/plugins/fromDocumentToThemeData", "dataFixer/plugins/tpaGluedWidgetDataFixer", "dataFixer/plugins/tpaAddChatAppDataFixer", "dataFixer/plugins/compsWithImagesDataFixer", "dataFixer/plugins/appPartCustomizationsFixer", "dataFixer/plugins/backgroundMediaConverter", "dataFixer/plugins/backgroundMediaUndefinedFixer", "dataFixer/plugins/backgroundMediaRefDuplicationFixer", "dataFixer/plugins/stripContainerBgEffectFixer", "dataFixer/plugins/documentMediaFixer", "dataFixer/plugins/pinterestFollowFixer", "dataFixer/plugins/blogPageMenuFixer", "dataFixer/plugins/appPartMediaInnerCustomizationFormatFixer", "dataFixer/plugins/appPartReadMoreValueCustomizationFormatFixer", "dataFixer/plugins/appPartTagsValueCustomizationFormatFixer", "dataFixer/plugins/appPartDuplicateCustomizationFixer", "dataFixer/plugins/blogCustomFeedPostsPerPageCustomizationFixer", "dataFixer/plugins/blogDateAndAuthorHiddenCustomizationFixer", "dataFixer/plugins/blogDateAlignmentCustomizationFixer", "dataFixer/plugins/appPartBrokenButtonStyleFixer", "dataFixer/plugins/blogDateFormatCustomizationFormatFixer", "dataFixer/plugins/contactFormDataFixer", "dataFixer/plugins/subscribeFormDataFixer", "dataFixer/plugins/pageDataFixer", "dataFixer/plugins/groupFixer", "dataFixer/plugins/textSecurityFixer", "dataFixer/plugins/pageUriSeoFixer", "dataFixer/plugins/migrateStripToColumnsContainer", "dataFixer/plugins/tinyMenuSkinBackgroundFixer", "dataFixer/plugins/tinyMenuLayoutFixer", "dataFixer/plugins/designDataFixer", "dataFixer/plugins/homePageLoginDataFixer", "dataFixer/plugins/characterSetsFixer", "dataFixer/plugins/popupPropsTempDataFixer", "dataFixer/plugins/blogSelectionSharerCustomizationsFixer", "dataFixer/plugins/quickActionBarDataFixer", "dataFixer/plugins/boxSlideShowDataFixer", "dataFixer/plugins/appPartMobileFeedMediaDateHiddenFixer", "dataFixer/plugins/migrateTestWidgetToControllers", "dataFixer/plugins/originalImageDataRefFixer", "dataFixer/plugins/tpaPublicAPIWidgetDataFixer"], function(e, t, n, i, o, r, a, s, u, c, p, d, l, m, g, f, y, w, h, v, T, k, S, x, I, M, _, P, F, b, E, C, A, O, B, L, N, D, U, R, G, H, Q, z, V, W, q, Y, Z, j, J, K, X, $, ee, te, ne, ie, oe, re, ae, se) {
    var ue = e.compact([n, o, _, P, F, r, h, a, s, u, c, p, d, l, m, ne, g, f, y, w, v, T, k, i, S, x, I, M, K, b, E, C, A, O, B, L, D, U, R, N, G, H, Q, z, V, W, q, Y, Z, j, J, X, ee, $, te, ie, oe, re, ae, se]);
    return Object.freeze(ue),
        function(n, i, o, r, a, s, u) {
            var c = n.structure.id;
            return c = c ? 5 === c.length || 4 === c.length ? "" : " " + c : " masterPage", t.performance.time("Fix page" + c, function() {
                var t = n.data || {};
                return t.document_data = t.document_data || {}, t.theme_data = t.theme_data || {}, t.component_properties = t.component_properties || {}, n.data = t, e.forEach(ue, function(e) {
                    e.exec(n, i, o, r, a, s, u)
                }), n
            }, s)
        }
}), define("dataFixer/plugins/deprecatedSiteModelMigrater", ["lodash", "coreUtils", "dataFixer/core/fixPageData"], function(e, t, n) {
    function i(e) {
        switch (e) {
            case "wysiwyg.viewer.components.WSiteStructure":
                return "Document";
            case "mobile.core.components.Page":
                return "Page";
            case "wixapps.integration.components.Area":
            case "mobile.core.components.Container":
            case "wysiwyg.viewer.components.HeaderContainer":
            case "wysiwyg.viewer.components.FooterContainer":
            case "wysiwyg.viewer.components.PagesContainer":
            case "wysiwyg.viewer.components.ScreenWidthContainer":
            case "wysiwyg.viewer.components.StripContainer":
                return "Container"
        }
        return "Component"
    }

    function o(e) {
        return parseInt(e || 0, 10)
    }

    function r(t, n, r, a, s) {
        var u = e(a).map("name").invokeMap("toLowerCase").zipObject(e.map(a, "value")).value();
        "Page" === i(u.comp) && (n.page = u.id), t.pagesData[n.page] = t.pagesData[n.page] || {
            structure: {},
            data: {},
            theme_data: {}
        };
        var c = t.pagesData[n.page].structure = t.pagesData[n.page].structure || {};
        if (e.has(n.childrenIndex, n.page)) {
            for (var p = 0; p < n.childrenIndex[n.page].length; p++) c = c.components[n.childrenIndex[n.page][p]];
            var d = {};
            n.childrenIndex[n.page].push(c.components.length), c.components.push(d), c = d
        } else n.childrenIndex[n.page] = [];
        c.componentType = u.comp, c.type = i(u.comp), c.id = u.id, c.components = [], c.skin = u.skin, c.styleId = u.styleid, u.dataquery && (c.dataQuery = u.dataquery), c.propertyQuery = u.propertyquery, c.layout = {
            width: o(u.width),
            height: o(u.height),
            x: o(u.x),
            y: o(u.y),
            anchors: t.wixAnchors[u.id] || []
        }
    }

    function a(e, t, n) {
        0 === t.childrenIndex[t.page].length ? t.page = "masterPage" : t.childrenIndex[t.page].pop()
    }

    function s(i) {
        i.pagesData = {};
        var o = e.get(i, "wixData.document_data.SITE_STRUCTURE.mainPage") || e.get(i, "wixData.document_data.masterPage.mainPage"),
            s = o && o.slice(1);
        i.pagesData.masterPage = {
            data: i.wixData
        }, i.pagesData.masterPage.structure = {};
        var u = {
            page: "masterPage",
            childrenIndex: {}
        };
        t.htmlParser(i.wixHtmlRaw, {
            start: r.bind(void 0, i, u),
            end: a.bind(void 0, i, u)
        });
        var c = e.keys(i.pagesData),
            p = e.without(c, "masterPage");
        i.pagesData.masterPage.data.document_data.MAIN_MENU = i.pagesData.masterPage.data.document_data.MAIN_MENU || {
            items: [],
            type: "Menu",
            id: "MAIN_MENU",
            metaData: {}
        }, e.forEach(c, function(e) {
            i.pagesData[e] = n(i.pagesData[e], p, i.requestModel, i.currentUrl, i.urlFormatModel)
        }), i.publicModel.pageList = {
            mainPageId: s,
            pages: e.map(p, function(t) {
                return e.chain(i).get(["pagesData", "masterPage", "data", "document_data", t]).pick(["title", "pageUriSEO"]).assign({
                    pageId: t
                }).value()
            })
        }
    }
    return s
}), define("dataFixer/plugins/fixBackgroundData", ["lodash", "imageClientApi", "dataFixer/imageService/imageTransformDataFixers"], function(e, t, n) {
    function i(t) {
        var n = t.getMasterPageData(),
            i = n.theme_data,
            s = n.document_data,
            u = e(s).filter({
                type: "BackgroundImage"
            }).map("id").value();
        r(s) || (o(s) ? a(i, s) : e.forEach(u, function(e) {
            d(s[e])
        }))
    }

    function o(t) {
        return !t[e.find(t, {
            type: "Page"
        }).id].pageBackgrounds
    }

    function r(t) {
        var n = e.find(t, {
            type: "Page"
        });
        return t[n.id].pageBackgrounds && "BackgroundMediaUnified" === t[n.id].pageBackgrounds.type
    }

    function a(t, n) {
        var i = e(n).filter({
                type: "Page"
            }).map("id").value(),
            o = t.THEME_DATA.siteBg || "none 0 0 center center auto repeat repeat scroll none",
            r = ("[siteBg]" === t.THEME_DATA.mobileBg ? t.THEME_DATA.siteBg : t.THEME_DATA.mobileBg) || "none 0 0 center center auto repeat repeat scroll none",
            a = u(o),
            c = u(r);
        a.id = "customBgImg" + s(), c.id = "customBgImg" + s([a.id]), n[a.id] = a, n[c.id] = c, e.forEach(i, function(e) {
            n[e].pageBackgrounds = {
                desktop: {
                    custom: !0,
                    isPreset: !1,
                    ref: "#" + a.id
                },
                mobile: {
                    custom: !0,
                    isPreset: !1,
                    ref: "#" + c.id
                }
            }
        })
    }

    function s(t) {
        var n = "";
        for (t = t || []; e.includes(t, n);) n = e.random(0, 99999).toString(36).replace(" ", "_");
        return n
    }

    function u(t) {
        var n = e.compact(t.split(" "));
        return p.apply(this, n)
    }

    function c(e) {
        var n = {};
        return n[t.fittingTypes.TILE] = t.fittingTypes.LEGACY_BG_FIT_AND_TILE, n[t.fittingTypes.TILE_HORIZONTAL] = t.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL, n[t.fittingTypes.TILE_VERTICAL] = t.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL, n[t.fittingTypes.ORIGINAL_SIZE] = t.fittingTypes.LEGACY_BG_NORMAL, n[e] || e
    }

    function p(e, t, i, o, r, a, s, u, p, d, l, m) {
        var g = n.cssToAlignType(o + " " + r),
            f = n.cssToFittingType({
                bgRepeat: s + " " + u,
                bgSize: a
            });
        return f = c(f), l = l || {}, d && "none" !== d || (d = "rgba(0,0,0,0)"), {
            type: "BackgroundMediaUnified",
            alignType: g,
            fittingType: f,
            attachment: p,
            imageWidth: Number(t),
            imageHeight: Number(i),
            mediaType: "image",
            uri: e,
            color: d,
            metaData: {
                isHidden: l.isHidden || !1,
                isPreset: l.isPreset || !1,
                schemaVersion: 2
            },
            id: m
        }
    }

    function d(e) {
        var t = [e.url, e.imagesizew, e.imagesizeh, e.positionx, e.positiony, e.width, e.repeatx, e.repeaty, e.attachment, e.color, e.metaData, e.id];
        return p.apply(this, t)
    }
    return {
        fixBackgroundData: i,
        migrateBgDataItem: d,
        migrateBgString: u
    }
}), define("dataFixer", ["dataFixer/core/fixPageData", "dataFixer/plugins/deprecatedSiteModelMigrater", "dataFixer/plugins/fixBackgroundData", "dataFixer/imageService/imageTransformDataFixers", "dataFixer/helpers/anchorCyclesHelper"], function(e, t, n, i, o) {
    return {
        fix: e,
        deprecatedSiteModelMigrater: t,
        fixBackgroundData: n,
        imageTransformDataFixers: i,
        anchorCyclesHelper: o
    }
});
//# sourceMappingURL=dataFixer.min.js.map