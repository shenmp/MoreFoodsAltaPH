"use strict";
var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
    return typeof e
} : function(e) {
    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
};
define("layout/util/dataPreparationsForAnchors", ["lodash", "coreUtils", "experiment"], function(e, t, i) {
    function o() {
        return {
            flat: {},
            sortingY: {},
            minHeight: {},
            shrinkableContainer: {},
            ignoreOriginalValue: {},
            noHeightChange: {},
            containerHeightMargin: {},
            currentHeight: {},
            currentY: {},
            heightDiff: {},
            topDiff: {},
            locked: {},
            valueForFirstLockedAnchor: {}
        }
    }

    function n(e) {
        return "Document" === e.type || "wysiwyg.viewer.components.PagesContainer" === e.componentType
    }

    function r(e, t, i) {
        var o = e.id;
        e.layout && e.layout.rotationInDegrees && (t.noHeightChange[o] = !0), i.shrinkableContainer[o] ? t.shrinkableContainer[o] = !0 : n(e, i) && (t.ignoreOriginalValue[o] = !0)
    }

    function a(e, i, o) {
        return t.boundingLayout.getBoundingHeight({
            height: e,
            width: i,
            rotationInDegrees: o
        })
    }

    function s(e, i, o, n) {
        return t.boundingLayout.getBoundingY({
            y: e,
            height: i,
            width: o,
            rotationInDegrees: n
        })
    }

    function u(e, t, o) {
        var n, r = e.id,
            u = e.layout ? e.layout.rotationInDegrees : 0,
            c = o.height[r];
        n = i.isOpen("sv_partialReLayout") || i.isOpen("layout_verbs_with_anchors") ? o.top[r] : o.top && void 0 !== o.top[r] ? o.top[r] : e.layout && e.layout.y || 0, t.currentHeight[e.id] = u ? a(c, o.width[r], u) : c, t.heightDiff[r] = t.currentHeight[e.id] - c, t.currentY[r] = u ? s(n, c, o.width[r], u) : n, t.topDiff[r] = n - t.currentY[r]
    }

    function c(i, o, n, a, s, h) {
        if (e.has(n.height, i.id)) {
            r(i, o, n), u(i, o, n), o.minHeight[i.id] = l(i, o), o.currentHeight[i.id] = Math.max(o.currentHeight[i.id], o.minHeight[i.id]), o.collapsed[i.id] && (o.currentHeight[i.id] = 0), o.flat[i.id] = i;
            var d = a + o.currentY[i.id] - s,
                g = o.currentHeight[i.id];
            if (o.sortingY[i.id] = d, o.valueForFirstLockedAnchor[i.id] = {
                    pusherId: null,
                    value: -Number.MAX_VALUE
                }, !o.collapsed[i.id]) {
                var p = t.dataUtils.getChildrenData(i, h);
                e.forEach(p, function(e) {
                    c(e, o, n, d, g || 5e3, h)
                })
            }
        }
    }

    function l(e, t) {
        var i = e.id;
        return i && !h(i) ? Math.max(t.minHeight[i] || 0, b) : t.minHeight[i] || 0
    }

    function h(t) {
        return t && e.includes(C, t)
    }

    function d(e, t, i, o) {
        c(e, t, i, 0, 0, o)
    }

    function g(e, t, i) {
        return {
            distance: i,
            type: e,
            targetComponent: t,
            locked: !0,
            notEnforcingMinValue: !0
        }
    }

    function p(t, i, o, n) {
        var r = t;
        return t.$cloned || ((r = e.clone(r)).layout = e.clone(r.layout), r.layout.anchors = e.clone(r.layout.anchors), r.$cloned = !0), r.layout.anchors.push(g("TOP_TOP", i, o), g("BOTTOM_BOTTOM", i, n)), r
    }

    function m(t) {
        e.forEach(t, function(i, o) {
            if (i.layout && i.layout.anchors) {
                var n = e.filter(i.layout.anchors, {
                    type: "LOCK_BOTTOM"
                });
                e.isEmpty(n) || (e.forEach(n, function(e) {
                    t[o] = p(t[o], e.targetComponent, e.topToTop, e.distance), t[e.targetComponent] = p(t[e.targetComponent], o, -1 * e.topToTop, -1 * e.distance)
                }), e.remove(t[o].layout.anchors, {
                    type: "LOCK_BOTTOM"
                }))
            }
        })
    }

    function f(t) {
        return "wysiwyg.viewer.components.PopupContainer" === e.get(t, "components[0].componentType")
    }

    function y(t, i, n) {
        var r = o();
        r.containerHeightMargin = i.containerHeightMargin || {}, r.minHeight = e.clone(i.minHeight || {}), r.collapsed = e.clone(i.collapsed || {}), r.injectedAnchors = i.injectedAnchors || {}, r.__isPopup = f(t), d(t, r, i, n), m(r.flat);
        var a = e.sortBy(e.keys(r.flat), function(e) {
            return r.sortingY[e]
        });
        return delete r.sortingY, {
            structureData: r,
            sortedIds: a
        }
    }

    function w(t, i) {
        e.forEach(i.flat, function(e, o) {
            t.height[o] = i.currentHeight[o] - i.heightDiff[o], t.top[o] = i.currentY[o] + i.topDiff[o]
        })
    }

    function v(i, o, n, r) {
        if (!e.has(i.height, r.id)) return 0;
        o = o || 0, o += i.top[r.id];
        var a = t.dataUtils.getChildrenData(r, n);
        return a = e.reject(a, {
            layout: {
                fixedPosition: !0
            }
        }), Math.max(o + i.height[r.id], Math.max.apply(null, e.map(a, e.partial(v, i, o, n))))
    }
    var C = ["WIX_ADS"],
        b = 5;
    return {
        getDataForAnchorsAndSort: y,
        fixMeasureMap: w,
        maxMeasureMapHeight: v
    }
}), define("layout/util/anchors", ["lodash", "layout/util/dataPreparationsForAnchors"], function(e, t) {
    function i(e, t, i, o) {
        return t !== i && (o.dirty[e] = !0, o.changedCompsMap[e] = o.flat[e]), o.dirty[e]
    }

    function o(t, i, o, n) {
        var r = o[n.targetComponent],
            a = o[i];
        n.notEnforcingMinValue && !e.isEmpty(a) && (n.notEnforcingMinValue = !1), r[i] = t;
        var s = Math.max.apply(null, e.values(r));
        return n.notEnforcingMinValue && delete r[i], s
    }

    function n(e, t, i, o, n) {
        var r = e.targetComponent,
            a = t.valueForFirstLockedAnchor[r];
        a && (e.locked || null === n ? (a.pusherId && (i[r] = {}, i[r][a.pusherId] = a.value), delete t.valueForFirstLockedAnchor[r]) : (a.pusherId = o, a.value = Math.max(n, a.value)))
    }

    function r(e) {
        return e % 1
    }

    function a(e, t) {
        return t -= r(t - e)
    }

    function s(t, i) {
        return e.has(t.currentHeight, i)
    }

    function u(e, t, i, o) {
        var n;
        return o.shrinkableContainer[i] ? n = t : e.locked ? n = t + e.distance : (n = t + g, o.ignoreOriginalValue[i] || (n = Math.max(n, e.originalValue))), n
    }

    function c(t, i, o, n) {
        var r = t;
        return e.isNumber(n.minHeight[i]) && t < n.minHeight[i] && (r = n.minHeight[i], o.notEnforcingMinValue && (o.notEnforcingMinValue = !1, n.dirty[i] = !0, n.changedCompsMap[i] = n.flat[i])), r
    }

    function l(e, t, i) {
        return "masterPage" === e ? [] : i.injectedAnchors[e] || t[e] || []
    }

    function h(t, i, o, n, r, a) {
        for (var s = !1, u = t.length, c = 0; c < u;) {
            var h = function(t) {
                var u = l(t, n, o),
                    c = Number.MAX_VALUE;
                return !o.dirty[t] || r && !m[t] || e.forEach(u, function(e) {
                    if (f[e.type] && o.flat[e.targetComponent] && (!r || m[e.targetComponent])) {
                        e.targetComponent === a && (s = !0);
                        var n = f[e.type](t, e, o) ? i[e.targetComponent] : Number.MAX_VALUE;
                        c = Math.min(n, c)
                    }
                }), o.dirty[t] = !1, c
            }(t[c]);
            c = Math.min(c + 1, h)
        }
        return s
    }

    function d(i, o, n, r, a, s, u, c) {
        var l = t.getDataForAnchorsAndSort(i, o, r),
            d = l.structureData,
            g = l.sortedIds,
            m = e.invert(g);
        d.dirty = {}, d.toTopAnchorsY = {}, d.toBottomAnchorsHeight = {}, d.locked = s, d.changedCompsMap = d.flat, d.ignoreBottomBottom = !!c, e.forEach(d.flat, function(e, t) {
            d.dirty[t] = !0, d.toTopAnchorsY[t] = {}, d.toBottomAnchorsHeight[t] = {}
        }), u && (d.changedCompsMap = e.pick(d.flat, e.keys(u)));
        var f = h(g, m, d, n, a, i.id);
        return t.fixMeasureMap(o, d), !f && e.includes(p, i.type) && (o.height[i.id] = t.maxMeasureMapHeight(o, 0, r, i), d.changedCompsMap[i.id] = d.flat[i.id]), d.changedCompsMap
    }
    var g = 10,
        p = ["Page", "Document"],
        m = {
            SITE_FOOTER: !0,
            SITE_HEADER: !0,
            SITE_PAGES: !0,
            PAGES_CONTAINER: !0,
            masterPage: !0,
            SITE_BACKGROUND: !0
        },
        f = {};
    return f.TOP_TOP = function(t, r, u) {
        var c = r.targetComponent;
        if (!s(u, c) || !s(u, t)) return !1;
        if (e.has(u.locked, c)) return !1;
        var l = u.currentY[c],
            h = u.currentY[t] + r.distance;
        return n(r, u, u.toTopAnchorsY, t, null), h = o(h, t, u.toTopAnchorsY, r), h = a(l, h), u.currentY[c] = h, i(c, l, h, u)
    }, f.BOTTOM_TOP = function(t, r, u) {
        var c = r.targetComponent;
        if (!s(u, c) || !s(u, t)) return !1;
        if (e.has(u.locked, c)) return !1;
        var l = u.currentY[c],
            h = u.currentHeight[t] + u.currentY[t],
            d = null;
        return r.locked ? h += r.distance : (d = h + g, h = u.valueForFirstLockedAnchor[c] ? Math.max(h + g, r.originalValue) : d), h = Math.max(h, u.currentY[t] + u.currentHeight[t] / 2), n(r, u, u.toTopAnchorsY, t, d), h = o(h, t, u.toTopAnchorsY, r), h = a(l, h), u.currentY[c] = h, i(c, l, h, u)
    }, f.BOTTOM_PARENT = function(t, n, r) {
        var a = n.targetComponent;
        if (!s(r, a) || !s(r, t)) return !1;
        if (e.has(r.locked, a)) return !1;
        if (r.flat[a].layout && r.flat[a].layout.rotationInDegrees) return !1;
        var l = r.currentHeight[a],
            h = u(n, r.currentHeight[t] + r.currentY[t] + (r.containerHeightMargin[a] || 0), a, r);
        return h = c(h, a, n, r), h = o(h, t, r.toBottomAnchorsHeight, n), r.currentHeight[a] = h, i(a, l, h, r)
    }, f.BOTTOM_BOTTOM = function(t, n, r) {
        if (r.ignoreBottomBottom) return !1;
        var a = n.targetComponent;
        if (!s(r, a) || !s(r, t)) return !1;
        if (e.has(r.locked, a)) return !1;
        if (r.flat[a].layout && r.flat[a].layout.rotationInDegrees) return !1;
        var l = r.currentHeight[a],
            h = u(n, r.currentHeight[t] + r.currentY[t] - r.currentY[a], a, r);
        return h = c(h, a, n, r), h = o(h, t, r.toBottomAnchorsHeight, n), r.currentHeight[a] = h, i(a, l, h, r)
    }, {
        enforceAnchors: d,
        HARD_WIRED_COMPS: m
    }
}), define("layout/util/reduceDistancesAlgorithm/sortByAnchors", ["lodash"], function(e) {
    function t(t, i) {
        var o = e.reduce(t, function(t, o) {
            var n = i[o.id];
            return e.forEach(n, function(e) {
                t[e.targetComponent] = !0
            }), t
        }, {});
        return e.filter(t, function(e) {
            return !o[e.id]
        })
    }

    function i(t, i) {
        return e.has(t, i)
    }

    function o(o, n) {
        function r(t, o) {
            if (i(a, t)) {
                var s = e.max([a[t], o + 1]);
                a[t] = s;
                var u = e.map(n[t], "targetComponent");
                e.forEach(u, function(e) {
                    r(e, s)
                })
            }
        }
        var a = e.reduce(o, function(e, t) {
                return e[t.id] = 0, e
            }, {}),
            s = t(o, n);
        return e.forEach(s, function(e) {
            r(e.id, 0)
        }), e.sortBy(o, function(e) {
            return a[e.id]
        })
    }
    return o
}), define("layout/util/reduceDistancesAlgorithm/anchorsTypes", [], function() {
    return {
        TOP_TOP: "TOP_TOP",
        BOTTOM_TOP: "BOTTOM_TOP",
        BOTTOM_PARENT: "BOTTOM_PARENT"
    }
}), define("layout/util/reduceDistancesAlgorithm/createAnchorsDataManager", ["lodash", "layout/util/reduceDistancesAlgorithm/anchorsTypes"], function(e, t) {
    function i(i, o, r, a) {
        function s(e) {
            h.from[e.fromComp] = h.from[e.fromComp] || [], h.from[e.fromComp].push(e), h.to[e.targetComponent] = h.to[e.targetComponent] || [], h.to[e.targetComponent].push(e)
        }

        function u(t) {
            a[t.targetComponent] && (t = e.assign({}, t, {
                locked: !0,
                distance: 0
            })), d.from[t.fromComp] = t, d.to[t.targetComponent] = d.to[t.targetComponent] || [], d.to[t.targetComponent].push(t)
        }

        function c(t) {
            return r ? n[t.fromComp] && n[t.targetComponent] : e.has(o, t.fromComp) && e.has(o, t.targetComponent)
        }
        var l = e.flatten(e.values(i)),
            h = {
                from: {},
                to: {}
            },
            d = {
                from: {},
                to: {}
            },
            g = e.filter(l, c);
        return e.forEach(g, function(e) {
            e.type === t.BOTTOM_PARENT ? u(e) : s(e)
        }), {
            anchors: g,
            siblingsAnchors: h,
            childToParentAnchors: d
        }
    }

    function o(t, o, n, r) {
        var a = i(t, o, n, r);
        e.merge(this, {
            getComponentPushers: function(e) {
                return a.siblingsAnchors.to[e] || []
            },
            getComponentAnchorToParent: function(e) {
                return a.childToParentAnchors.from[e]
            }
        })
    }
    var n = {
        SITE_FOOTER: !0,
        SITE_HEADER: !0,
        SITE_PAGES: !0,
        PAGES_CONTAINER: !0,
        masterPage: !0,
        SITE_BACKGROUND: !0
    };
    return function(e, t, i, n) {
        return new o(e, t, i, n)
    }
}), define("layout/util/reduceDistancesAlgorithm/createMeasureMapManager", ["lodash", "coreUtils"], function(e, t) {
    function i(e, i, o) {
        return t.boundingLayout.getBoundingHeight({
            height: e,
            width: i,
            rotationInDegrees: o
        })
    }

    function o(e, i, o, n) {
        return t.boundingLayout.getBoundingY({
            y: e,
            height: i,
            width: o,
            rotationInDegrees: n
        })
    }

    function n(t, n) {
        return e(n).pickBy(function(t) {
            return e.get(t, "layout.rotationInDegrees")
        }).mapValues(function(e, n) {
            var r = t.top[n],
                a = t.height[n],
                s = t.width[n];
            return {
                heightDiff: i(a, s, e.layout.rotationInDegrees) - a,
                yDiff: o(r, a, s, e.layout.rotationInDegrees) - r
            }
        }).value()
    }

    function r(t, i) {
        function o(t) {
            return e.get(u, [t, "yDiff"], 0)
        }

        function r(t) {
            return e.get(u, [t, "heightDiff"], 0)
        }
        var s = t,
            u = n(t, i);
        e.merge(this, {
            get: function() {
                return s
            },
            getComponentTop: function(t) {
                if (!e.isUndefined(s.top[t])) return s.top[t] + o(t)
            },
            getComponentHeight: function(t) {
                if (!e.isUndefined(s.height[t])) return s.collapsed[t] ? 0 : s.height[t] + r(t)
            },
            getComponentMinHeight: function(t) {
                return s.collapsed[t] ? 0 : e.max([s.minHeight[t], a])
            },
            getContainerHeightMargin: function(e) {
                return s.containerHeightMargin[e] || 0
            },
            isCollapsed: function(e) {
                return Boolean(s.collapsed[e])
            },
            isShrinkableContainer: function(e) {
                return Boolean(s.shrinkableContainer[e])
            },
            getComponentWidth: function(e) {
                return s.width[e]
            },
            getSiteWidth: function() {
                return s.width.site
            },
            getClientSize: function() {
                return {
                    width: s.clientWidth,
                    height: s.clientHeight
                }
            },
            setComponentTop: function(e, t) {
                s.top[e] = t - o(e)
            },
            setComponentHeight: function(e, t) {
                s.height[e] = t - r(e)
            }
        })
    }
    var a = 5;
    return function(e, t) {
        return new r(e, t)
    }
}), define("layout/util/reduceDistancesAlgorithm/createOriginalValuesManager", ["lodash"], function(e) {
    function t(t, i) {
        e.merge(this, {
            getOriginalTop: function(o) {
                return e.get(t, [o, "top"]) || i[o].y
            },
            getOriginalHeight: function(o) {
                return e.get(t, [o, "height"]) || i[o].height
            }
        })
    }
    return function(e, i) {
        return new t(e, i)
    }
}), define("layout/util/reduceDistancesAlgorithm/generateEnforceData", ["lodash", "coreUtils", "siteUtils", "layout/util/reduceDistancesAlgorithm/sortByAnchors", "layout/util/reduceDistancesAlgorithm/createAnchorsDataManager", "layout/util/reduceDistancesAlgorithm/createMeasureMapManager", "layout/util/reduceDistancesAlgorithm/createOriginalValuesManager"], function(e, t, i, o, n, r, a) {
    function s(t) {
        function i(t) {
            o[t.id] = t, e.forEach(t.children, i)
        }
        var o = {};
        return i(t), o
    }

    function u(i, n, r) {
        function a(i) {
            var s = m[i.id],
                u = t.dataUtils.getChildrenKey(i, r),
                c = i[u],
                l = e.omit(i, u);
            if (s) {
                var h = e.reduce(c, function(t, i) {
                    return e.includes(s, i.id) && t.push(a(i)), t
                }, []);
                l.children = o(h, n)
            } else l.children = [];
            return l
        }
        return e.find(m.ROOT, function(e) {
            return e === i.id
        }) ? a(i) : null
    }

    function c(i, n, r, a) {
        function s(i) {
            var u = t.dataUtils.getChildrenKey(i, a),
                c = i[u],
                l = e.omit(i, u),
                h = Boolean(n.collapsed[i.id]) ? [] : e(c).filter(function(t) {
                    return e.has(n.height, t.id)
                }).map(s).value();
            return l.children = o(h, r), l
        }
        return s(i)
    }

    function l(e, t, i, o, n) {
        return o ? u(e, i, n) : c(e, t, i, n)
    }

    function h(t, i, o, n) {
        var r = e.get(o, [t.id, n]);
        return e.merge({}, r, i.injectedAnchors)
    }

    function d(e, t, i, o) {
        return n(e, o, i, t.shrinkableContainer)
    }

    function g(t, i, o, n) {
        var r = e.get(i, [t.id, o]);
        return a(r, n)
    }

    function p(o, n) {
        return e.mapValues(o, function(o) {
            if (o.layout) {
                var r = e.cloneDeep(o.layout);
                if (e.assign(r, t.boundingLayout.getBoundingLayout(o.layout)), i.layout.isVerticallyStretchedToScreen(r)) {
                    r.isVerticallyStretchedToScreen = !0;
                    var a = {
                            width: n.clientWidth,
                            height: n.clientHeight
                        },
                        s = n.width.site;
                    r.minHeight = i.positionAndSize.getHeightInPixelsRounded(o.layout, null, a, s), delete r.docked.top, delete r.docked.bottom
                }
                return r
            }
        })
    }
    var m = {
        ROOT: ["masterPage", "SITE_BACKGROUND"],
        masterPage: ["SITE_HEADER", "PAGES_CONTAINER", "SITE_FOOTER"],
        PAGES_CONTAINER: ["SITE_PAGES"]
    };
    return function(e, t, o, n, a, u, c) {
        var m = a ? i.constants.VIEW_MODES.MOBILE : i.constants.VIEW_MODES.DESKTOP,
            f = h(e, t, o, m),
            y = l(e, t, f, u, a);
        if (!y) return null;
        var w = s(y),
            v = p(w, t);
        return {
            structure: y,
            flatDataMap: w,
            layoutsMap: v,
            measureMapManager: r(t, w),
            anchorsDataManager: d(f, t, u, w),
            originalValuesManager: g(e, n, m, v),
            lockedCompsMap: c || {}
        }
    }
}), define("layout/util/reduceDistancesAlgorithm/minHeightDataUtils", ["lodash"], function(e) {
    function t(e) {
        var t = e.absoluteHeight;
        if (e.topPercents || e.bottomPercents) {
            var i = 1 - ((e.topPercents || 0) + (e.bottomPercents || 0)) / 100;
            return Math.ceil(t / i)
        }
        return t
    }

    function i(t, i) {
        return e.reduce(t, function(e, t) {
            var o = Math.ceil(t.topPercents / 100 * i),
                n = Math.ceil(t.bottomPercents / 100 * i),
                r = o + t.absoluteHeight + n;
            return r > e ? r : e
        }, i)
    }

    function o(e) {
        return !e.topPercents && !e.bottomPercents
    }

    function n(e, t, i) {
        this.absoluteHeight = e || 0, t && (this.topPercents = t), i && (this.bottomPercents = i)
    }

    function r(e, t, i) {
        return new n(e, t, i)
    }

    function a(e) {
        return new n(e.px, e.pct)
    }

    function s(e) {
        return new n(e.px, null, e.pct)
    }

    function u(t) {
        var i, o;
        return e.isNumber(t.pct) && (t.pct < 0 ? o = 2 * Math.abs(t.pct) : i = 2 * t.pct), new n(2 * Math.abs(t.px), i, o)
    }

    function c(e, t) {
        this.absoluteHeight = e, this.dynamicHeights = t
    }

    function l(t) {
        var i = 0,
            n = [];
        return e.forEach(t, function(e) {
            o(e) ? i = Math.max(i, e.absoluteHeight) : n.push(e)
        }), new c(i, n)
    }
    return n.prototype.clone = function() {
        return new n(this.absoluteHeight, this.topPercents, this.bottomPercents)
    }, n.prototype.addAbsoluteHeight = function(e) {
        return this.absoluteHeight += e, this
    }, n.prototype.addMinHeightData = function(e) {
        this.absoluteHeight += e.absoluteHeight;
        var t = (this.topPercents || 0) + (e.topPercents || 0);
        t && (this.topPercents = t);
        var i = (this.bottomPercents || 0) + (e.bottomPercents || 0);
        return i && (this.bottomPercents = i), this
    }, c.prototype.merge = function(e) {
        return this.dynamicHeights = this.dynamicHeights.concat(e.dynamicHeights), this.absoluteHeight = Math.max(this.absoluteHeight, e.absoluteHeight), this
    }, c.prototype.solve = function() {
        if (e.isEmpty(this.dynamicHeights)) return this.absoluteHeight;
        var o = Math.ceil(e(this.dynamicHeights).map(t).max()),
            n = Math.max(this.absoluteHeight, o);
        return i(this.dynamicHeights, n)
    }, {
        createMinHeightData: r,
        createMinHeightDataForDockedTopData: a,
        createMinHeightDataForDockedBottomData: s,
        createMinHeightDataForVerticallyCenteredDockedData: u,
        createChainMinHeightData: l
    }
}), define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils", [], function() {
    return {
        getAnchorMinDistance: function(e) {
            return e.locked ? e.distance : 10
        }
    }
}), define("layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight", ["lodash", "siteUtils", "layout/util/reduceDistancesAlgorithm/minHeightDataUtils", "layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils", "layout/util/reduceDistancesAlgorithm/anchorsTypes"], function(e, t, i, o, n) {
    function r(e) {
        var o = t.layout.getTopDockData(e);
        return o ? i.createMinHeightDataForDockedTopData(o) : i.createMinHeightData(e.y)
    }

    function a(e, o, n) {
        var a = i.createMinHeightData(),
            s = r(e),
            u = t.layout.isDockedToDirection(e, "top");
        return o || u || !n || s.absoluteHeight < 0 ? s : a
    }

    function s(t, i, r) {
        var a = r.type === n.TOP_TOP ? 0 : i,
            s = o.getAnchorMinDistance(r);
        return e.map(t, function(e) {
            var t = a + s;
            return e.clone().addAbsoluteHeight(t)
        })
    }

    function u(n, r, u, c, l, h) {
        function d(e, t) {
            t && t.locked && (C.isShrinkableContainer = !0), C.chainsMinHeightData.merge(e)
        }

        function g(e, t) {
            var i = h[e];
            return {
                forNonDocked: [a(i, t, !1)],
                forDocked: [a(i, t, !0)]
            }
        }

        function p(t, o) {
            var n = !1,
                r = [],
                a = [];
            if (e.forEach(o, function(e) {
                    e.locked && (n = !0);
                    var t = b[e.fromComp],
                        i = c[e.fromComp];
                    r = r.concat(s(t.forDocked, i, e)), a = a.concat(s(t.forNonDocked, i, e))
                }), !n) {
                var u = l.getOriginalTop(t),
                    h = i.createMinHeightData(u);
                a.push(h)
            }
            return {
                forDocked: r,
                forNonDocked: a
            }
        }

        function m(e) {
            var n, a = t.layout.getBottomDockData(h[e]);
            if (a) n = i.createMinHeightDataForDockedBottomData(a);
            else {
                var s = r.getComponentAnchorToParent(e);
                n = i.createMinHeightData(o.getAnchorMinDistance(s))
            }
            var u = c[e];
            return n.clone().addAbsoluteHeight(u)
        }

        function f(t, o, r) {
            var a = o ? r.forDocked : r.forNonDocked,
                s = m(t, n),
                u = e.map(a, function(e) {
                    return e.clone().addMinHeightData(s)
                });
            return i.createChainMinHeightData(u)
        }

        function y(e, o) {
            var n = t.layout.getVerticallyCenteredDockData(o),
                r = c[e],
                a = i.createMinHeightDataForVerticallyCenteredDockedData(n).addAbsoluteHeight(r);
            return i.createChainMinHeightData([a])
        }

        function w(t) {
            var i = r.getComponentPushers(t),
                o = e.isEmpty(i),
                n = !!u[t];
            return o || n ? g(t, n) : p(t, i)
        }

        function v(e) {
            if (t.layout.isVerticallyCentered(h[e.id])) d(y(e.id, h[e.id]));
            else {
                var i = w(e.id);
                b[e.id] = i;
                var o = r.getComponentAnchorToParent(e.id),
                    n = !!o,
                    a = t.layout.isDockedToDirection(h[e.id], "bottom");
                (a || n) && d(f(e.id, a, i), o)
            }
        }
        var C = {
                value: 0,
                chainsMinHeightData: i.createChainMinHeightData(),
                isShrinkableContainer: !1
            },
            b = {};
        return function() {
            return e.forEach(n.children, v), C.value = C.chainsMinHeightData.solve(), delete C.chainsMinHeightData, C
        }()
    }
    return function(i, o, n, r, a, s) {
        function c(e, t, i) {
            var n = [],
                a = s[e.id];
            if (!a) return n;
            var u = a.aspectRatio || 0,
                c = i || a.isVerticallyStretchedToScreen || u || o.isShrinkableContainer(e.id) || t && t.isShrinkableContainer;
            if (u) {
                var l = o.getComponentWidth(e.id);
                n.push(u * l)
            }
            if (t && (n.push(t.value + o.getContainerHeightMargin(e.id)), !c)) {
                var h = r.getOriginalHeight(e.id);
                n.push(h)
            }
            if (c) {
                var d = o.getComponentMinHeight(e.id),
                    g = a.minHeight || 0;
                n.push(d, g)
            }
            return n
        }

        function l(t, i, n) {
            n ? (i.length && o.setComponentHeight(t, e.max(i)), p[t] = o.getComponentHeight(t)) : p[t] = i.length ? e.max(i) : 0
        }

        function h(e, i) {
            if (o.isCollapsed(e.id)) return o.setComponentHeight(e.id, 0), void(p[e.id] = 0);
            var n = t.layout.isVerticallyStretched(s[e.id]),
                r = c(e, i, n);
            l(e.id, r, !n)
        }

        function d(e) {
            return !o.isCollapsed(e)
        }

        function g(t) {
            var i, o = t.children,
                c = a[t.id];
            !e.isEmpty(o) && d(t.id) && (e.forEach(o, g), c || (i = u(t, n, a, p, r, s))), h(t, i)
        }
        var p = {};
        g(i)
    }
}), define("layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking", ["lodash", "siteUtils", "layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils", "layout/util/reduceDistancesAlgorithm/anchorsTypes"], function(e, t, i, o) {
    function n(e, i, o) {
        var n = o.getComponentHeight(i),
            r = o.getComponentWidth(i),
            a = o.getClientSize(),
            s = o.getSiteWidth();
        return t.positionAndSize.getHeightInPixelsRounded(e, {
            width: r,
            height: n
        }, a, s)
    }

    function r(e, i, o, n) {
        var r = {
                width: n.getComponentWidth(o),
                height: n.getComponentHeight(o)
            },
            a = n.getClientSize(),
            s = n.getComponentHeight(e);
        return t.positionAndSize.getYInPixelsRounded(i, r, a, s)
    }

    function a(t, n, r, a) {
        var s = [],
            u = e.every(n, {
                locked: !1
            });
        return e.forEach(n, function(e) {
            if (u) {
                var n = r.getOriginalTop(t);
                s.push(n)
            }
            var c = a.getComponentTop(e.fromComp) + (e.type === o.TOP_TOP ? 0 : a.getComponentHeight(e.fromComp)) + i.getAnchorMinDistance(e);
            s.push(c)
        }), e.max(s)
    }

    function s(t, n) {
        var r = [];
        return e.some(t, "locked") ? (e.forEach(t, function(e) {
            var t = n.getComponentTop(e.fromComp) + (e.type === o.TOP_TOP ? 0 : n.getComponentHeight(e.fromComp)) + i.getAnchorMinDistance(e);
            r.push(t)
        }), e.max(r)) : null
    }

    function u(e) {
        return t.layout.isDockedToDirection(e, "bottom")
    }
    return function(o, c, l, h, d, g) {
        function p(e, t) {
            var i = r(e.id, g[e.id], t, c);
            c.setComponentTop(e.id, i)
        }

        function m(e, i) {
            if (t.layout.isVerticallyStretched(g[e.id]) && !c.isCollapsed(e.id)) {
                var o = n(g[e.id], i, c);
                c.setComponentHeight(e.id, o)
            }
        }

        function f(e, t) {
            p(e, t.id), m(e, t.id)
        }

        function y(t) {
            var i = l.getComponentPushers(t.id);
            if (!e.isEmpty(i)) {
                var o = s(i, c);
                null !== o && c.setComponentTop(t.id, o)
            }
        }

        function w(t) {
            var i = l.getComponentPushers(t.id);
            if (!d[t.id])
                if (e.isEmpty(i)) c.setComponentTop(t.id, h.getOriginalTop(t.id));
                else {
                    var o = a(t.id, i, h, c);
                    c.setComponentTop(t.id, o)
                }
        }

        function v(i, o) {
            e.forEach(i, function(e) {
                t.layout.isVerticallyDocked(g[e.id]) ? f(e, o) : w(e)
            })
        }

        function C(i, o) {
            e.forEach(i, function(e) {
                var i = t.layout.isDockedToDirection(g[e.id], "top"),
                    n = t.layout.isDockedToDirection(g[e.id], "bottom");
                i || n || y(e, o)
            })
        }

        function b(t) {
            function o(e, t) {
                var i = c.getComponentTop(e),
                    o = t - c.getComponentHeight(e);
                return o >= i ? null : (c.setComponentTop(e, o), a = !0, o)
            }

            function n(t, r) {
                var a = t.fromComp,
                    s = o(a, r - i.getAnchorMinDistance(t));
                if (null !== s) {
                    var u = l.getComponentPushers(a);
                    e.forEach(u, function(e) {
                        n(e, s)
                    })
                }
            }

            function r(t) {
                var i = c.getComponentTop(t),
                    o = l.getComponentPushers(t);
                e.forEach(o, function(e) {
                    n(e, i)
                })
            }
            var a = !1,
                s = e.filter(t, function(e) {
                    return u(g[e.id])
                });
            return e.forEach(s, function(e) {
                r(e.id)
            }), a
        }

        function M(e) {
            return !c.isCollapsed(e)
        }

        function S(t) {
            var i = t.children;
            !e.isEmpty(i) && M(t.id) && (v(i, t), b(i) && C(i, t), e.forEach(i, S))
        }
        S(o)
    }
}), define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm", ["layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight", "layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking"], function(e, t) {
    return {
        enforce: function(i) {
            return e(i.structure, i.measureMapManager, i.anchorsDataManager, i.originalValuesManager, i.lockedCompsMap, i.layoutsMap), t(i.structure, i.measureMapManager, i.anchorsDataManager, i.originalValuesManager, i.lockedCompsMap, i.layoutsMap), i.flatDataMap
        }
    }
}), define("layout/util/layoutAlgorithm", ["lodash", "experiment", "coreUtils", "siteUtils", "layout/util/anchors", "layout/util/reduceDistancesAlgorithm/generateEnforceData", "layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm"], function(e, t, i, o, n, r, a) {
    function s(t, o, n) {
        function r(t) {
            e.has(o.height, t.id) && (a[t.id] = t, e.forEach(i.dataUtils.getChildrenData(t, n), r))
        }
        var a = {};
        return r(t), a
    }
    return {
        enforceStructure: function(i, u, c, l, h, d, g, p, m) {
            var f = h ? o.constants.VIEW_MODES.MOBILE : o.constants.VIEW_MODES.DESKTOP,
                y = e.get(c, [i.id, f]);
            if (y) {
                if (t.isOpen("layout_verbs_with_anchors")) {
                    var w = r(i, u, c, l, h, d, g);
                    return w ? a.enforce(w) : {}
                }
                return n.enforceAnchors(i, u, y, h, d, g, p, m)
            }
            return s(i, u, h)
        }
    }
}), define("layout/util/createDOMPatchers", ["zepto", "lodash", "loggingUtils"], function(e, t, i) {
    function o(t, o, n) {
        t[o] ? e(t[o]).css(n) : i.log.error("Cannot find node with id {" + o + "} to patch css. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")
    }

    function n(t, o, n) {
        t[o] ? e(t[o]).attr(n) : i.log.error("Cannot find node with id {" + o + "} to patch attributes. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")
    }

    function r(e, o, n) {
        e[o] ? t.forEach(t.keys(n), function(t) {
            e[o][t] = n[t]
        }) : i.log.error("Cannot find node with id {" + o + "} to patch events. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")
    }

    function a(o, n, r) {
        if (o[n]) {
            var a = e(o[n]);
            t.forOwn(r, function(e, t) {
                a.data(t, e)
            })
        } else i.log.error("Cannot find node with id {" + n + "} to patch data. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")
    }

    function s(e) {
        return {
            css: t.partial(o, e),
            attr: t.partial(n, e),
            data: t.partial(a, e),
            events: t.partial(r, e)
        }
    }
    return s
}), define("layout/util/rootLayoutUtils", ["lodash", "siteUtils"], function(e, t) {
    return {
        getRootWidth: function(e, i, o) {
            return t.layout.getRootWidth(i, o, e.getSiteWidth())
        },
        getRootLeft: function(e, i, o) {
            return t.layout.getRootLeft(i, o, e.getSiteX())
        }
    }
}), define("layout/util/singleCompLayout", ["lodash", "coreUtils", "siteUtils", "layout/util/rootLayoutUtils", "experiment"], function(e, t, i, o, n) {
    function r(e) {
        return "fixed" === e.position
    }

    function a(e) {
        return i.layout.isHorizontallyStretched(e.layout)
    }

    function s(e) {
        return P[e.componentType]
    }

    function u(e) {
        return i.layout.isVerticallyStretched(e.layout)
    }

    function c(e) {
        return P[e.componentType]
    }

    function l(e, t, i) {
        var o = i.zIndex;
        "auto" !== o && (o = parseFloat(o), isNaN(o) || (e.zIndex[t] = o))
    }

    function h(e, t, i, o) {
        r(o) && (e.fixed[t] = !0, e.top[t] = i.offsetTop, e.left[t] = i.offsetLeft)
    }

    function d(t, i, o, n) {
        var r = e.get(n, "layout.width", 0);
        a(n) ? t.width[i] = o.offsetWidth : s(n) || !e.get(n, "layout.width") ? t.width[i] = Math.max(o.offsetWidth, r) : t.width[i] = r
    }

    function g(e, t, i) {
        e.top[t] = i.offsetTop
    }

    function p(t, i, o, n) {
        var r = e.get(n, "layout.height", 0),
            a = e.get(n, "layout.aspectRatio", 0);
        a && (r = a * t.width[i]), u(n) ? t.height[i] = o.offsetHeight : c(n) || !e.get(n, "layout.height") ? t.height[i] = Math.max(o.offsetHeight, r) : t.height[i] = r
    }

    function m(t, i, o, n) {
        var r = e.get(n, "layout.width", 0),
            a = e.get(n, "layout.height", 0);
        t.width[i] = r, t.height[i] = a
    }

    function f(t, i) {
        var o = i.offsetLeft,
            n = e.get(t, "layout.x", 0);
        return .5 === Math.abs(n - o) ? n : o
    }

    function y(e, t, i, o) {
        if (o.isDeadComp[e]) m(o, e, t, i);
        else {
            var r = window.getComputedStyle(t);
            h(o, e, t, r), l(o, e, r), d(o, e, t, i), p(o, e, t, i), (n.isOpen("layout_verbs_with_anchors") || n.isOpen("sv_partialReLayout")) && g(o, e, t), o.left[e] = f(i, t)
        }
    }

    function w(e) {
        return e.getAttribute("data-dead-comp")
    }

    function v(e, t) {
        if (!e) return !1;
        var i = t(e);
        return i || !1
    }

    function C(e, t, i, o, n, r) {
        var a = t.id,
            s = v(a, i);
        s && (n[a] = s, y(a, s, e, o), w(s) ? o.isDeadComp[a] = !0 : (E[t.type] && E[t.type](a, o, n, r, t), L[t.type] && L[t.type](a, o, n, r, t)))
    }

    function b(t, i, o, n, r) {
        var a = t.id,
            s = v(a, i);
        if (s && !w(s) && D[t.type]) {
            var u = D[t.type];
            "function" == typeof u && (u = u(r, a, n, t)), e.forEach(u, function(s) {
                var u = e.isPlainObject(s),
                    c = u ? s.pathArray : s,
                    l = i.apply(void 0, [a].concat(c)) || i.apply(void 0, [a, "component"].concat(c));
                if (l) {
                    var h = c.join(""),
                        d = a + h;
                    n[d] = l, o.height[d] = l.offsetHeight, o.width[d] = l.offsetWidth, u && L[s.type] && L[s.type](d, o, n, r, t)
                }
            })
        }
    }

    function M(t, o, n, r) {
        var a = {};
        r && (i.layout.isVerticallyDocked(r) && !i.layout.isVerticallyStretchedToScreen(r) || (a.top = x(n.top[t])), i.layout.isVerticallyStretched(r) && !i.layout.isVerticallyStretchedToScreen(r) || (a.height = x(n.height[t])), e.isEmpty(a) || o.css(t, a))
    }

    function S(i, n, r, a, s) {
        var u = a.layout;
        if (u && t.dockUtils.isHorizontalDockToScreen(u)) {
            var c = o.getRootWidth(s, r, a.rootId),
                l = 0 - o.getRootLeft(s, r, a.rootId),
                h = t.dockUtils.getDockedStyle(u, s.getPageBottomMargin(), s.getScreenWidth(), c, l),
                d = e.pick(h, ["left", "width"]);
            r.left[i] = parseInt(d.left, 10), n.css(i, d)
        }
    }

    function I(e, t, i, o, n) {
        var r = e.id;
        M(r, t, o, e.layout), S(r, t, o, e, n);
        var a = o.isDeadComp[r],
            s = !1;
        return !a && A[e.type] ? s = A[e.type](r, i, o, e, n) : !a && B[e.type] && (s = B[e.type](r, t, o, e, n)), s
    }

    function T(e, t, i, o) {
        var n = e.id,
            r = !1;
        return !i.isDeadComp[n] && B[e.type] && (r = B[e.type](n, t, i, e, o)), r
    }
    var x = t.style.unitize,
        A = {},
        L = {},
        P = {},
        D = {},
        E = {},
        B = {};
    return {
        patchWithoutPositioning: T,
        patchComponent: I,
        measureComponent: C,
        measureComponentChildren: b,
        isComponentDead: w,
        registerPatcher: function(e, t) {
            A[e] = t
        },
        registerSAFEPatcher: function(e, t) {
            B[e] = t
        },
        registerPatchers: function(t, i) {
            A[t] = function() {
                var t = arguments;
                e.forEach(i, function(e) {
                    e.apply(null, t)
                })
            }
        },
        registerSAFEPatchers: function(t, i) {
            B[t] = function() {
                var t = arguments;
                e.forEach(i, function(e) {
                    e.apply(null, t)
                })
            }
        },
        registerCustomMeasure: function(e, t) {
            L[e] = t
        },
        registerRequestToMeasureDom: function(e) {
            P[e] = !0
        },
        registerRequestToMeasureChildren: function(e, t) {
            D[e] = t
        },
        registerAdditionalMeasureFunction: function(e, t) {
            E[e] = t
        },
        maps: {
            classBasedMeasureChildren: D,
            classBasedCustomMeasures: L,
            classBasedPatchers: A
        }
    }
}), define("layout/util/bodyNodePatcher", ["zepto", "lodash"], function(e, t) {
    return {
        updateBodyNodeStyle: function(i) {
            var o = e("body"),
                n = e("html");
            if (i.isQaMode() && o.addClass("qa-mode"), i.isMobileView() ? (o.addClass("device-mobile-optimized"), n.addClass("device-mobile-optimized")) : i.isMobileDevice() || i.isTabletDevice() ? o.addClass("device-mobile-non-optimized") : (o.removeClass("device-mobile-optimized").removeClass("device-mobile-non-optimized"), n.removeClass("device-mobile-optimized")), i.isMobileDevice()) {
                var r = t.assign({}, i.os, i.browser),
                    a = t(r).keys().filter(function(e) {
                        return !0 === r[e]
                    }).map(function(e) {
                        return "device-" + e
                    }).join(" ");
                n.addClass(a)
            }
            var s = o.css("overflow"),
                u = i.renderFlags.allowSiteOverflow ? null : "hidden";
            s !== u && o.css("overflow", u)
        }
    }
}), define("layout/util/iframesPatcher", ["zepto", "lodash"], function(e, t) {
    return {
        setIframesSrc: function() {
            var i = e("iframe[data-src]");
            t.forEach(i, function(e) {
                var t = e.getAttribute("src"),
                    i = e.getAttribute("data-src");
                i && (t !== i && e.setAttribute("src", i), e.removeAttribute("data-src"))
            })
        }
    }
}), define("layout/util/layout", ["zepto", "lodash", "layout/util/anchors", "layout/util/layoutAlgorithm", "coreUtils", "loggingUtils", "layout/util/createDOMPatchers", "layout/util/singleCompLayout", "layout/util/bodyNodePatcher", "layout/util/iframesPatcher", "experiment"], function(e, t, i, o, n, r, a, s, u, c, l) {
    function h(e, i) {
        var o = t.last(e),
            r = n.dataUtils.getChildrenData(o, i);
        return t.transform(r, function(e, t) {
            e[t.id] = !0
        }, {})
    }

    function d(e, t, i) {
        return e && Math.max(t, Math.min(i, e))
    }

    function g(e, o) {
        if (l.isOpen("sv_partialReLayout")) return !(!e || e[o.id]);
        var n = e;
        return n && !n[o.id] && !i.HARD_WIRED_COMPS[o.id] && !t.has(Q, o.type)
    }

    function p(e) {
        return e.componentType || e.documentType
    }

    function m(e, i, o) {
        var r = i.getSiteData(),
            a = e.layout,
            s = {
                dataItem: e.dataItem || null,
                propertiesItem: e.propertiesItem || null,
                layout: a,
                styleItem: null,
                id: e.id,
                type: p(e),
                structure: e,
                rootId: o
            };
        return s.layout && (t.isFinite(s.layout.height) && (s.layout.height = d(s.layout.height, n.siteConstants.COMP_SIZE.MIN_HEIGHT, n.siteConstants.COMP_SIZE.MAX_HEIGHT)), t.isFinite(s.layout.width) && (s.layout.width = d(s.layout.width, n.siteConstants.COMP_SIZE.MIN_WIDTH, n.siteConstants.COMP_SIZE.MAX_WIDTH))), e.dataQuery && !s.dataItem && (s.dataItem = r.getDataByQuery(e.dataQuery, o)), e.propertyQuery && !e.propertiesItem && (s.propertiesItem = r.getDataByQuery(e.propertyQuery, o, r.dataTypes.PROPERTIES)), (e.behaviorQuery || e.behaviors) && (s.behaviorsItem = e.behaviors || t.get(r.getDataByQuery(e.behaviorQuery, o, r.dataTypes.BEHAVIORS), "items")), e.designQuery && (s.designDataItem = r.getDataByQuery(e.designQuery, o, r.dataTypes.DESIGN)), e.styleId && (s.styleItem = r.getDataByQuery(e.styleId, o, r.dataTypes.THEME)), s
    }

    function f(e, t) {
        return Boolean(t.collapsed[e])
    }

    function y(e, i, o, n, r, a, u) {
        var c = r.getSiteData(),
            h = [],
            d = t(o).keys().filter(function(e) {
                return !f(e, n)
            }).value();
        return t.forEach(d, function(t) {
            var d = m(o[t], r, a);
            !l.isOpen("sv_partialReLayout") && g(u, d) || s.patchComponent(d, e, i, n, c) && h.push(t)
        }), h
    }

    function w(e, i, o, n, r, s) {
        var u = [],
            c = a(o);
        return t.forEach(e, function(e, t) {
            u = u.concat(y(c, o, n[t], i, r, e.pageId, s))
        }), u
    }

    function v(t, i, o, n, r, a, s) {
        var u = e(i(t.id));
        u.attr("data-leaving") || (u.attr("data-collapsed") ? C(t, i, o, n, r, a, s) : Y[t.componentType] ? b(t, i, o, n, r, a, s) : M(t, i, o, n, r, a, s))
    }

    function C(e, t, i, o, n, r, a) {
        var s = n.getSiteData(),
            u = m(e, n, r);
        g(a, u) || (S(e, t, o), i.collapsed[e.id] = !0, T(u, t, i, o, s, e, a))
    }

    function b(e, t, i, o, n, r, a) {
        var s = n.getSiteData(),
            u = m(e, n, r);
        S(e, t, o), I(u, n, t, i, o, r, a), i.collapsed[e.id] = !1, T(u, t, i, o, s, e, a)
    }

    function M(e, t, i, o, n, r, a) {
        var s = n.getSiteData(),
            u = m(e, n, r);
        S(e, t, o), i.collapsed[e.id] = !1, T(u, t, i, o, s, e, a), I(u, n, t, i, o, r, a)
    }

    function S(e, t, i) {
        var o = t(e.id);
        o && (i[e.id] = o)
    }

    function I(e, i, o, r, a, s, u) {
        var c = i.getSiteData(),
            l = n.dataUtils.getChildrenData(e.structure, c.isMobileView());
        t.forEach(l, function(e) {
            v(e, o, r, a, i, s, u)
        })
    }

    function T(e, t, i, o, n, r, a) {
        g(a, e) || (s.measureComponentChildren(e, t, i, o, n), s.measureComponent(r, e, t, i, o, n))
    }

    function x(e, i, o, n, r) {
        t.forOwn(e, function(e) {
            v(e.structure, e.getDomNodeFunc, i, o, n, e.pageId, r)
        })
    }

    function A(e, i, n, r, a, s) {
        var u, c = {},
            l = n.getSiteData();
        l.originalValuesMap = l.originalValuesMap || {};
        var h = l.isMobileView();
        return e.inner && (u = l.isRootIgnoreBottomBottom(t.get(e, "inner.structure.id")), c.inner = o.enforceStructure(e.inner.structure, i, l.anchorsMap, l.originalValuesMap, h, r, a, s, u), i.height.SITE_PAGES && (i.height.SITE_PAGES = i.height[e.inner.pageId])), t.forOwn(e, function(e, n) {
            "inner" !== n && (u = l.isRootIgnoreBottomBottom(t.get(e, ["structure", "id"])), c[n] = o.enforceStructure(e.structure, i, l.anchorsMap, l.originalValuesMap, h, r, a, s, u))
        }), c
    }

    function L(e, i, o, r, a, s) {
        var u = e.id;
        if (s = s || i.fixed[u], u) {
            var c = i.top[u] || 0,
                l = i.left[u] || 0;
            i.fixed[u] ? (r = c, a = l) : (r += c, a += l), i.absoluteTop[u] = r, i.absoluteLeft[u] = a, s && (i.shownInFixed[u] = !0)
        }
        var h = n.dataUtils.getChildrenData(e, o);
        t.forEach(h, function(e) {
            L(e, i, o, r, a, s)
        })
    }

    function P(e, i, o) {
        var n = t.sortBy(t.keys(e), function(e) {
            return "inner" === e ? 1 : 0
        });
        t.forEach(n, function(t) {
            L(e[t].structure, i, o, "inner" === t ? i.absoluteTop.SITE_PAGES : 0, "inner" === t ? i.absoluteLeft.SITE_PAGES : 0)
        })
    }

    function D(e, i, o, r, a) {
        var u = e.id && i(e.id);
        if (!u || !s.isComponentDead(u)) {
            u && G[e.componentType] && r.push({
                anchorsMap: a,
                structure: e,
                getDomNodeFunc: i,
                domNode: u
            });
            var c = o.getSiteData().isMobileView(),
                l = n.dataUtils.getChildrenData(e, c);
            t.forEach(l, function(e) {
                D(e, i, o, r, a)
            })
        }
    }

    function E(e, o, n, r, a, s, u, c) {
        var l = [],
            h = {},
            d = a.getSiteData(),
            g = d.isMobileView();
        return t.forEach(e, function(e) {
            var n = m(e.structure, a),
                p = G[n.structure.componentType].measure(n, e.domNode, o, r, d, function(t) {
                    v(t, e.getDomNodeFunc, o, r, a, n.rootId, c)
                }, function(t) {
                    return i.enforceAnchors(t, o, e.anchorsMap, g, u, s, c)
                });
            p.needsAdditionalInnerLayout && l.push(e), p.changedCompsMap && t.assign(h, p.changedCompsMap)
        }), t.forEach(e, function(e) {
            var t = m(e.structure, a);
            e.skipPatch || G[t.structure.componentType].patch(t, o, n, r, a.getSiteData())
        }), {
            compsToInnerLayoutAgain: l,
            changedComps: h
        }
    }

    function B(e, i, o, n, r, s, u) {
        var c = n.getSiteData(),
            l = c.getViewMode(),
            h = {},
            d = [];
        t.forOwn(e, function(e) {
            var i = t.get(e, "structure.id"),
                o = t.get(c.anchorsMap, [i, l]);
            D(e.structure, e.getDomNodeFunc, n, d, o)
        }), d.reverse();
        for (var g = d, p = 0, m = a(o); g.length && p < 3;) {
            var f = E(g, i, m, o, n, r, s, u);
            g = f.compsToInnerLayoutAgain, h = t.assign(h, f.changedComps), p++
        }
        return h
    }

    function R(i) {
        var o = (V = e("#SITE_ROOT")).offset() || {
                top: 0
            },
            n = {
                pageBottomByComponents: {},
                collapsed: {},
                height: {},
                width: {},
                availHeight: {},
                availWidth: {},
                innerWidth: {},
                innerHeight: {},
                custom: {},
                containerHeightMargin: {},
                minHeight: {},
                minWidth: {},
                top: {},
                left: {},
                absoluteTop: {},
                absoluteLeft: {},
                fixed: {},
                shownInFixed: {},
                zIndex: {},
                isDeadComp: {},
                siteMarginBottom: t.parseInt(V.css("padding-bottom"), 10) || 0,
                siteOffsetTop: o.top,
                clientWidth: 0,
                skipPatch: {},
                shrinkableContainer: {},
                injectedAnchors: {}
            };
        n.clientWidth = i.getBodyClientWidth(), l.isOpen("onboardingviewportmode") ? n.clientHeight = H(i) : n.clientHeight = window.document.documentElement.clientHeight, n.width.screen = i.getScreenWidth(), n.width.site = i.getSiteWidth(), n.height.screen = n.clientHeight, n.innerHeight.screen = window.innerHeight, n.innerWidth.screen = window.innerWidth;
        var r = i.mobile.getScreenDimensions();
        return n.height.device = r.height, n.width.device = r.width, n.availHeight.device = r.availHeight, n.availWidth.device = r.availWidth, n.devicePixelRatio = i.mobile.getDevicePixelRatio(), n
    }

    function H(e) {
        var i = t.get(e.renderFlags, "onboardingViewportMode", "auto");
        return "parent" === i ? window.parent.document.documentElement.clientHeight : /fixed:/.test(i) ? parseInt(i.split(":")[1], 10) : window.document.documentElement.clientHeight
    }

    function k(e, i) {
        return t.forOwn(i, function(t, i) {
            delete e.top[i]
        }), e
    }

    function O(e, i) {
        var o = q[e.siteId] || {};
        return t.omitBy(o, t.keys(i))
    }

    function W(e, i) {
        var o = t.last(e);
        return o && j[o.componentType] ? j[o.componentType](e, i) : null
    }

    function _(e, i, o) {
        var r = t.last(e),
            a = {};
        i[r.id] && t.assign(a, W(e, o));
        var s = n.dataUtils.getChildrenData(r, o);
        return t.forEach(s, function(n) {
            t.assign(a, _(e.concat([n]), i, o))
        }), a
    }

    function F(e, i, o) {
        var n = {};
        return t.forOwn(i, function(i) {
            t.assign(n, _([i.structure], e, o))
        }), n
    }

    function U(e, o, r, a, s) {
        var u = {};
        return t.assign(u, o, r, i.HARD_WIRED_COMPS, n.arrayUtils.toTrueObj(a)), t.assign(u, F(u, e, s)), u
    }

    function N(e) {
        var i = t(e).values().flatMap(t.keys).value();
        return n.arrayUtils.toTrueObj(i)
    }

    function z(e, t, i, o, n) {
        l.isOpen("sv_reportPerformance") && (r.performance.clearMeasures(Z), r.performance.start(Z));
        var a = t.getSiteData(),
            s = a.isMobileView();
        a.updateScreenSize(), delete e.undefined;
        var u, h = l.isOpen("sv_partialReLayout") ? O(a, n) : {},
            d = !1,
            g = B(e, u = l.isOpen("sv_partialReLayout") ? n ? k(a.measureMap, n) : R(a) : (d = a.measureMap && o && i) ? k(a.measureMap, o) : R(a), h, t, o, i, n);
        n && (n = U(e, n, g, t.getAllRenderedRootIds(), s)), l.isOpen("sv_partialReLayout") ? x(e, u, h, t, n) : x(e, u, h, t, d && o);
        var p = A(e, u, t, i, o, n);
        P(e, u, s);
        var m = w(e, u, h, p, t, !l.isOpen("sv_partialReLayout") && d && o);
        return a.imageLoader.loadAllImages(a), c.setIframesSrc(), q[a.siteId] = h, l.isOpen("sv_reportPerformance") && r.performance.finish(Z, a.isViewerMode(), {
            partialReLayout: l.isOpen("sv_partialReLayout")
        }), {
            componentsToRender: m,
            measureMap: u,
            reLayoutedCompsMap: N(p)
        }
    }
    var V, q = {},
        G = {},
        Y = {},
        Z = "reLayout",
        j = {
            "wysiwyg.viewer.components.Group": h,
            "wysiwyg.viewer.components.BoxSlideShow": h,
            "wysiwyg.viewer.components.StripContainerSlideShow": h,
            "wysiwyg.viewer.components.StripColumnsContainer": h,
            "wysiwyg.viewer.components.Column": function(e, i) {
                var o = e[e.length - 2],
                    r = n.dataUtils.getChildrenData(o, i),
                    a = [o].concat(r);
                return t.transform(a, function(e, t) {
                    e[t.id] = !0
                }, {})
            }
        },
        Q = {
            "mobile.core.components.Page": !0,
            "wysiwyg.viewer.components.StripColumnsContainer": !0,
            "wysiwyg.viewer.components.Column": !0
        };
    return {
        registerLayoutInnerCompsFirst: function(e, t, i) {
            G[e] = {
                measure: t,
                patch: i
            }
        },
        registerMeasureChildrenFirst: function(e, t) {
            Y[e] = t
        },
        registerPatcher: function(e, t) {
            s.registerPatcher(e, t)
        },
        registerSAFEPatcher: function(e, t) {
            s.registerSAFEPatcher(e, t)
        },
        registerSAFEPatchers: function(e, t) {
            s.registerSAFEPatchers(e, t)
        },
        registerPatchers: function(e, t) {
            s.registerPatchers(e, t)
        },
        registerCustomMeasure: function(e, t) {
            s.registerCustomMeasure(e, t)
        },
        registerAdditionalMeasureFunction: function(e, t) {
            s.registerAdditionalMeasureFunction(e, t)
        },
        registerRequestToMeasureDom: function(e) {
            s.registerRequestToMeasureDom(e)
        },
        registerRequestToMeasureChildren: function(e, t) {
            s.registerRequestToMeasureChildren(e, t)
        },
        updateBodyNodeStyle: u.updateBodyNodeStyle,
        reLayout: z,
        measureMediaRichTextInnerComponent: function(e, t, i, o, n, r) {
            s.measureComponentChildren(e, t, i, o, n), s.measureComponent(r, e, t, i, o, n)
        },
        patchWithoutPositioning: s.patchWithoutPositioning,
        enforceAnchors: i.enforceAnchors
    }
}), define("layout/specificComponents/wixHomepageMenuLayout", ["layout/util/layout"], function(e) {
    e.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu", [
        ["buttonsContainer"]
    ]), e.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu", function(e, t) {
        var i = t.height[e + "buttonsContainer"];
        t.height[e] = Math.max(t.height[e], i), t.minHeight[e] = i
    })
}), define("layout/specificComponents/fiveGridLineLayout", ["layout/util/layout", "layout/util/rootLayoutUtils"], function(e, t) {
    var i = function(e, i, o, n, r) {
        var a = o.width.screen,
            s = t.getRootWidth(r, o, n.rootId),
            u = 0,
            c = s,
            l = n.propertiesItem;
        l && l.fullScreenModeOn && (a > s && (u = -(a - s) / 2, c = a), i.css(e, {
            width: c + "px",
            left: u + "px"
        }), o.width[e] = c, o.left[e] = u)
    };
    e.registerSAFEPatcher("wysiwyg.viewer.components.FiveGridLine", i), e.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine", [
        ["line"]
    ]), e.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"), e.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine", function(e, t, i) {
        var o = t.height[e + "line"],
            n = window.getComputedStyle(i[e]),
            r = parseFloat(n.borderBottomWidth);
        t.height[e] = Math.max(5, r, o), t.minHeight[e] = o
    })
}), define("layout/specificComponents/domainSearchLayout", ["lodash", "layout/util/layout"], function(e, t) {
    function i(e, t) {
        var i = e + "content";
        [
            ["width", "minWidth"],
            ["height", "minHeight"]
        ].forEach(function(o) {
            var n = o[0],
                r = o[1];
            t[n][i] > t[n][e] && (t[r] || (t[r] = {}), t[n][e] = t[r][e] = t[n][i])
        })
    }
    return t.registerRequestToMeasureChildren("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar", [
        ["content"]
    ]), t.registerCustomMeasure("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar", i), {}
}), define("layout/specificComponents/registerToMeasureOnly", ["layout/util/layout"], function(e) {
    return e.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"), e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"), e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"), e.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"), e.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"), e.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments"), e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery", [
        ["itemsContainer"]
    ]), {}
}), define("layout/specificComponents/registerToPureDomMeasure", ["layout/util/layout"], function(e) {
    function t(t) {
        e.registerCustomMeasure(t, function(e, t, i) {
            var o = i[e];
            t.height[e] = o.offsetHeight, t.width[e] = o.offsetWidth
        })
    }
    return t("wysiwyg.viewer.components.FlashComponent"), t("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"), t("wysiwyg.viewer.components.WGooglePlusOne"), t("wysiwyg.viewer.components.LinkBar"), t("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"), t("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"), t("wysiwyg.viewer.components.PayPalButton"), t("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"), t("wysiwyg.viewer.components.FlickrBadgeWidget"), t("wysiwyg.viewer.components.WTwitterFollow"), t("wysiwyg.viewer.components.WTwitterTweet"), t("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton"), {}
}), define("layout/specificComponents/areaTooltipLayout", ["layout/util/layout"], function(e) {
    e.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip", function(e, t) {
        var i = e + "content";
        t.custom[e] = t.height[e] / 2 - t.height[i] / 2
    }), e.registerSAFEPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip", function(e, t, i, o) {
        var n, r, a, s;
        if (r = e + "tooltip", i.height[r]) {
            switch (n = e + "content", o.propertiesItem.tooltipPosition) {
                case "top":
                    s = -i.height[n] - 14 + "px", a = 0;
                    break;
                case "right":
                    s = i.custom[e] + "px", a = i.width[e] + 14 + "px";
                    break;
                case "bottom":
                    s = i.height[e] + 14 + "px", a = 0;
                    break;
                case "left":
                    s = i.custom[e] + "px", a = "-414px";
                    break;
                default:
                    return
            }
            t.css(r, {
                top: s,
                left: a
            })
        }
    }), e.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip", [
        ["tooltip"],
        ["content"]
    ])
}), define("layout/specificComponents/menuLayout", ["zepto", "lodash", "layout/util/layout", "siteUtils", "coreUtils"], function(e, t, i, o, n) {
    function r(e) {
        return !isNaN(parseFloat(e)) && isFinite(e)
    }

    function a(e, t) {
        return e + 15 + t.menuBorderY + t.labelPad + t.menuButtonBorder
    }

    function s(e, i, o, n, r, a, s, c, l, h) {
        var d = o.concat("__more__"),
            g = i.custom[e],
            p = g.realWidths,
            m = g.menuItemContainerExtraPixels,
            f = i.width[e];
        if (t.findIndex(d, function(e) {
                return e === n
            }) >= 0 && p) {
            var y = Math.abs(h.getSiteX()) + i.absoluteLeft[e],
                w = u(m, s, l, f, r, c, y, y + f, i.clientWidth);
            return {
                left: w.moreContainerLeft,
                right: w.moreContainerRight,
                bottom: g.needToOpenMenuUp ? a + "px" : "auto"
            }
        }
    }

    function u(e, t, i, o, n, r, a, s, u) {
        var c = "0px",
            l = "auto",
            h = r.left,
            d = r.width;
        return "left" === t ? c = "left" === n ? 0 : h + e.left + "px" : "right" === t ? (l = "right" === n ? 0 : o - h - d - e.right + "px", c = "auto") : "left" === n ? c = h + (d + e.left - i) / 2 + "px" : "right" === n ? (c = "auto", l = (d + e.right - (i + e.width)) / 2 + "px") : c = e.left + h + (d - (i + e.width)) / 2 + "px", "auto" !== c && (c = a + parseInt(c, 10) < 0 ? 0 : c), "auto" !== l && (l = s - parseInt(l, 10) > u ? 0 : l), {
            moreContainerLeft: c,
            moreContainerRight: l
        }
    }

    function c(e, t, i, o, n, r, a) {
        for (var s = 0, u = null, c = i.custom[e].lineHeight[e], l = r - a.height, h = 0; h < o.length; h++) {
            var d = n[h],
                g = d > 0,
                p = e + o[h];
            g ? (s++, u = p, t.css(p, {
                width: d + "px",
                height: l + "px",
                position: "relative",
                "box-sizing": "border-box",
                overflow: "visible"
            }), t.css(p + "label", {
                "line-height": c
            })) : t.css(p, {
                height: "0px",
                overflow: "hidden",
                position: "absolute"
            })
        }
        1 === s && (t.data(e + "moreContainer", {
            listposition: "lonely"
        }), t.data(u, {
            listposition: "lonely"
        }))
    }

    function l(e, i, o, n, u) {
        var c = o.custom[e],
            l = c.hoverState,
            h = M.nonHiddenPageIdsFromMainMenu(n),
            d = h.indexOf(l);
        if (r(c.hoverState) || l === S) {
            if (!o.custom[e].realWidths) return;
            var g = Math.max(u, o.width[-1 !== d ? e + d : e + S]),
                p = a(t.isEmpty(c.moreSubItem) ? 0 : c.lineHeight[c.moreSubItem[0] + "label"], c);
            t.forEach(c.moreSubItem, function(e) {
                i.css(e, {
                    "min-width": g + "px"
                }), i.css(e + "label", {
                    "min-width": "0px",
                    "line-height": p + "px"
                })
            });
            var m = r(c.hoverState) ? c.hoverState : "__more__",
                f = {
                    width: o.width[e + m],
                    left: o.left[e + m]
                },
                y = s(e, o, h, l, c.hoverListPosition, o.height[e], c.alignButtons, f, g, n);
            i.css(e + I, {
                left: y.left,
                right: y.right
            }), i.css(e + "dropWrapper", {
                left: y.left,
                right: y.right,
                bottom: y.bottom
            })
        }
    }

    function h(e, i, o, n, r) {
        var a = o.height[e],
            s = M.nonHiddenPageIdsFromMainMenu(r),
            u = s.concat("__more__"),
            h = o.custom[e];
        m(e, i, h.needToOpenMenuUp);
        var d = h.menuItemContainerExtraPixels,
            g = 0;
        if (h.hoverState === S) {
            var p = h.realWidths.indexOf(0);
            t(h.realWidths).take(p).forEach(function(t, o) {
                var n = e + I + o;
                i.css(n, {
                    display: "none"
                })
            });
            var f = p === s.length - 1;
            i.attr(e + I + p, {
                "data-listposition": f ? "dropLonely" : "top"
            });
            for (var y = p; y < h.realWidths.length - 1; y++) {
                var w = e + I + y + "label";
                g = Math.max(o.width[w], g)
            }
        } else h.hoverState && t.forEach(h.moreSubItem, function(t, i) {
            var n = e + I + i + "label";
            g = Math.max(o.width[n], g)
        });
        l(e, i, o, r, g), h.originalGapBetweenTextAndBtn && t.forEach(u, function(t) {
            h.hasOriginalGapData[t] || i.data(e + t, {
                originalGapBetweenTextAndBtn: h.originalGapBetweenTextAndBtn[e + t]
            })
        }), c(e, i, o, u, h.realWidths, a, d)
    }

    function d(t) {
        var i = t.lastChild;
        return (parseInt(e(i).css("margin-left"), 10) || 0) + (parseInt(e(i).css("margin-right"), 10) || 0)
    }

    function g(e) {
        var t = parseFloat(e);
        return isFinite(t) ? t : 0
    }

    function p(t, i) {
        var o = e(t).css(["border-top-width", "border-bottom-width", "border-left-width", "border-right-width", "padding-top", "padding-bottom", "padding-left", "padding-right", "margin-top", "margin-bottom", "margin-left", "margin-right"]),
            n = g(o["border-top-width"]) + g(o["padding-top"]),
            r = g(o["border-bottom-width"]) + g(o["padding-bottom"]),
            a = g(o["border-left-width"]) + g(o["padding-left"]),
            s = g(o["border-right-width"]) + g(o["padding-right"]);
        return i && (n += g(o["margin-top"]), r += g(o["margin-bottom"]), a += g(o["margin-left"]), s += g(o["margin-right"])), {
            top: n,
            bottom: r,
            left: a,
            right: s,
            height: n + r,
            width: a + s
        }
    }

    function m(e, t, i) {
        t.data(e, {
            dropmode: i ? "dropUp" : "dropDown"
        })
    }

    function f(e) {
        return e.getBoundingClientRect().top > window.innerHeight / 2
    }

    function y(e) {
        var i = M.nonHiddenPageIdsFromMainMenu(e).concat("__more__"),
            o = [
                []
            ],
            n = [
                ["moreContainer"],
                ["itemsContainer"],
                ["dropWrapper"]
            ];
        return t.forEach(o, function(e) {
            n = n.concat(t.map(i, function(t) {
                return [t].concat(e)
            }))
        }), n
    }

    function w(i, o, n, r, a) {
        var s = o.width[i],
            u = o.custom[i];
        u.hasOriginalGapData = {}, u.originalGapBetweenTextAndBtn = {};
        var c = t.map(a, function(n) {
                var a, s = e(r[i + n]).data("originalGapBetweenTextAndBtn");
                return t.isUndefined(s) ? (u.hasOriginalGapData[n] = !1, a = o.width[i + n] - u.labelWidths[i + n + "label"], u.originalGapBetweenTextAndBtn[i + n] = a) : (u.hasOriginalGapData[n] = !0, a = parseInt(s, 10)), o.width[i + n] > 0 ? u.labelWidths[i + n + "label"] + a : 0
            }),
            l = c.pop(),
            h = n.sameWidthButtons,
            d = n.stretchButtonsToMenuWidth,
            g = !1,
            p = u.menuItemContainerMargins,
            m = u.menuItemMarginForAllChildren,
            f = u.menuItemContainerExtraPixels,
            y = M.getMaxWidth(c),
            w = M.getDropDownWidthIfOk(s, h, d, c, p, y, m, f);
        if (!w) {
            for (var v = 1; v <= c.length; v++)
                if (w = M.getDropDownWidthIfOk(s, h, d, c.slice(0, -1 * v).concat(l), p, y, m, f)) {
                    g = !0;
                    break
                }
            w || (g = !0, w = [l])
        }
        if (g) {
            var C = w[w.length - 1];
            for (w = w.slice(0, -1); w.length < a.length;) w.push(0);
            w[w.length - 1] = C
        }
        return {
            realWidths: w,
            moreShown: g
        }
    }

    function v(e, t) {
        return n.style.unitize(e - t.menuBorderY - t.labelPad - t.ribbonEls - t.menuButtonBorder - t.ribbonExtra)
    }

    function C(e) {
        var t = window.getComputedStyle(e);
        return parseInt(t.width, 10) + parseInt(t.paddingLeft, 10) + parseInt(t.paddingRight, 10)
    }

    function b(i, o, n, r, a) {
        var s = e(n[i]),
            u = e("#" + i + "itemsContainer")[0] || n[i + "itemsContainer"],
            c = u.childNodes,
            l = n[i + "moreContainer"],
            h = l.childNodes,
            g = o.custom[i] = {
                alignButtons: s.data("dropalign"),
                hoverListPosition: s.data("drophposition"),
                menuBorderY: parseInt(s.data("menuborder-y"), 10),
                ribbonExtra: parseInt(s.data("ribbon-extra"), 10),
                ribbonEls: parseInt(s.data("ribbon-els"), 10),
                labelPad: parseInt(s.data("label-pad"), 10),
                menuButtonBorder: parseInt(s.data("menubtn-border"), 10),
                menuItemContainerMargins: d(u),
                menuItemContainerExtraPixels: p(u, !0),
                needToOpenMenuUp: f(n[i]),
                menuItemMarginForAllChildren: !a.propertiesItem.stretchButtonsToMenuWidth || "false" !== u.getAttribute("data-marginAllChildren")
            };
        g.moreSubItem = [], g.lineHeight = {}, g.labelWidths = {}, t.forEach(h, function(t) {
            n[t.id] = t;
            var i = e(t).find("p")[0];
            n[i.id] = i, o.width[i.id] = i.offsetWidth, o.height[i.id] = i.offsetHeight, o.left[i.id] = i.offsetLeft, g.lineHeight[i.id] = parseInt(window.getComputedStyle(i).fontSize, 10), g.moreSubItem.push(t.id)
        }), t.forEach(c, function(t) {
            o.left[t.id] = t.offsetLeft;
            var i = e(t).find("p")[0];
            n[i.id] = i, g.labelWidths[i.id] = C(i)
        });
        var m = o.height[i];
        g.lineHeight[i] = v(m, g);
        var y = M.nonHiddenPageIdsFromMainMenu(r).concat("__more__"),
            b = w(i, o, a.propertiesItem, n, y);
        g.realWidths = b.realWidths, g.isMoreShown = b.moreShown, g.hoverState = l.getAttribute("data-hover")
    }
    var M = o.menuUtils,
        S = "__more__",
        I = "moreContainer";
    return i.registerSAFEPatcher("wysiwyg.viewer.components.menus.DropDownMenu", h), i.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu", b), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu", y), {}
}), define("layout/specificComponents/imageLayout", ["lodash", "coreUtils", "layout/util/layout"], function(e, t, i) {
    function o(e, i, o) {
        return t.imageUtils.getImageComputedProperties(e, i.getMediaFullStaticUrl.bind(i), i.currentUrl, i.mobile.getDevicePixelRatio(), o)
    }

    function n(t, i, o) {
        i.css(t + h, e.get(o, ["css", "img"]))
    }

    function r(e, t, i, o, n) {
        var r = i.custom[e] && i.custom[e].isSvgImage,
            a = i.custom[e] && i.custom[e].filterId;
        if (!o.containerWidth || !o.containerHeight || !o.imageData.uri) return null;
        t.css(e + d, {
            width: o.containerWidth,
            height: o.containerHeight
        }), r && (t.attr(e + d, n.attr.container), t.attr(e + h, n.attr.img), t.attr(e + h, {
            "xlink:href": n.uri,
            filter: "url(#" + a + ")"
        }))
    }

    function a(t) {
        return e.pickBy(t, function(e) {
            return "" !== e
        })
    }

    function s(t, i, o, n, r) {
        var s = a(i),
            u = t.css.container,
            c = e.assign({
                position: "absolute",
                width: o,
                height: n
            }, u, s);
        return e.isNumber(r) && (c.opacity = r), c
    }

    function u(e) {
        return e && e.split ? e.split(";").reduce(function(e, t) {
            var i = t.split(":");
            return i[0] && i[1] && (e[i[0].trim()] = i[1].trim()), e
        }, {}) : {}
    }

    function c(t, i, a, c, l, h, d) {
        var g = u(a.custom[t].renderedStyles),
            p = a.custom[t] && a.custom[t].isZoomed,
            m = {
                imageData: l,
                containerWidth: p ? l.width : h.width,
                containerHeight: p ? l.height : h.height,
                displayMode: l.displayMode,
                alignType: d
            },
            f = o(m, c, "img"),
            y = s(f, g, h.width, h.height, l.opacity);
        i.css(t, y), n(t, i, f), a.custom[t].hasSvgNode && r(t, i, a, m, o(m, c, "svg"));
        var w = {
            patchers: i,
            id: t,
            src: e.get(f, "uri"),
            absoluteTop: a.absoluteTop[a.custom[t].parentId] || 0,
            height: h.height || a.height[t],
            currentSrc: a.custom[t].imgSrc
        };
        c.imageLoader.loadImage(w)
    }

    function l(t, i, o, n, r) {
        var a, s = !1;
        o[t + h] = o[t].querySelector("img") || o[t].querySelector("image"), o[t + d] = o[t].querySelector("svg"), o[t + h] && "image" === o[t + h].nodeName.toLowerCase() && (s = !0, a = e.get(o[t].querySelector("filter"), "id")), i.custom[t] = {
            isZoomed: o[t].getAttribute("data-image-zoomed"),
            isSvgImage: s,
            filterId: a,
            hasSvgNode: Boolean(o[t + d]),
            imgSrc: o[t + h].getAttribute("src"),
            parentId: r.id,
            renderedStyles: o[t].getAttribute("data-style")
        }
    }
    var h = "image",
        d = "svg";
    return i.registerCustomMeasure("core.components.Image", l), {
        patchNodeImage: c,
        measureNodeImage: l
    }
}), define("layout/specificComponents/sliderGalleryLayout", ["layout/util/layout", "coreUtils", "imageClientApi", "zepto", "lodash", "layout/specificComponents/imageLayout"], function(e, t, i, o, n, r) {
    function a(e, t, i, o, n) {
        var r = Math.floor(t + e);
        return h.getSizeAfterScaling({
            itemHeight: r,
            itemWidth: Math.floor(r * (n && n.aspectRatio ? n.aspectRatio : 1)),
            displayerData: i,
            imageMode: n ? n.imageMode : "clipImage",
            heightDiff: o.heightDiff,
            widthDiff: o.widthDiff,
            bottomGap: o.bottomGap
        })
    }

    function s(e, t, r, s, u, c, l) {
        var h = o(c),
            g = {
                imageIndex: h.data("image-index"),
                width: h.data("displayer-width"),
                height: h.data("displayer-height"),
                uri: h.data("displayer-uri")
            },
            p = {
                heightDiff: parseInt(h.data("height-diff"), 10) || 0,
                widthDiff: parseInt(h.data("width-diff"), 10) || 0,
                bottomGap: parseInt(h.data("bottom-gap"), 10) || 0
            },
            m = u && u[g.imageIndex] ? u[g.imageIndex] : g,
            f = a(r, t, m = n.assign(m, {
                displayMode: i.fittingTypes.SCALE_TO_FILL
            }), p, s.propertiesItem);
        return {
            imageData: m,
            imageNodeId: e + "displayer" + l + "image",
            imageWrapperId: e + "displayer" + l + "imageWrapper",
            containerSize: d.getContainerSize(f.imageWrapperSize, h),
            sizeAfterScaling: f
        }
    }

    function u(e, t, i, r, a) {
        var u = i[e + "images"],
            c = o(u).children(),
            l = n.get(a, "dataItem.items"),
            h = parseInt(o(i[e]).data("additional-height"), 10) || 0;
        t.custom[e] = {
            displayers: n.map(c, n.partial(s, e, t.height[e], h, a, l)),
            additionalHeight: h
        }
    }

    function c(e, t, i, o, a) {
        var s = i.height[e];
        t.css(e, {
            height: s
        });
        var u = i.custom[e];
        n.forEach(u.displayers, function(e) {
            d.updateImageWrapperSizes(t, e.imageWrapperId, e.sizeAfterScaling), r.patchNodeImage(e.imageNodeId, t, i, a, e.imageData, e.containerSize)
        })
    }

    function l(e, t) {
        var i = [
                ["images"],
                ["itemsContainer"]
            ],
            r = o("#" + t + "images").children();
        return n.forEach(r, function(e, t) {
            var o = "displayer" + t,
                n = {
                    pathArray: [o, "image"],
                    type: "core.components.Image"
                },
                r = [o, "imageWrapper"];
            i.push(n, r)
        }), i
    }
    var h = t.matrix.scalingCalculations,
        d = t.galleriesCommonLayout;
    return e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery", l), e.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery", u), e.registerSAFEPatcher("wysiwyg.viewer.components.SliderGallery", c), {}
}), define("layout/specificComponents/verticalMenuLayout", ["zepto", "lodash", "layout/util/layout", "coreUtils", "siteUtils", "skinExports"], function(e, t, i, o, n, r) {
    function a(e) {
        var t = e.dataset;
        return {
            border: t && t.paramBorder ? parseInt(t.paramBorder, 10) : 0,
            separator: t && t.paramSeparator ? parseInt(t.paramSeparator, 10) : 0
        }
    }

    function s() {
        return window.innerHeight || window.document.documentElement.clientHeight || window.document.body.clientHeight
    }

    function u(e, t) {
        return e - t
    }

    function c(t, i, o) {
        var n = {
            "line-height": o + "px"
        };
        i && (n["text-overflow"] = "ellipsis"), e(t).css(n)
    }

    function l(e, t) {
        return Math.floor(e / 2) > t ? "down" : "up"
    }

    function h(e, i, a, s, h) {
        var d = a.custom[e],
            g = "subMenuOpenDir-" + l(d.screenHeight, u(a.absoluteTop[e], d.pageYOffset));
        i.css(e, {
            width: a.width[e]
        }), i.attr(e, {
            "data-open-direction": g
        });
        var p = n.menuUtils.getSiteMenuWithoutRenderedLinks(h),
            m = r[s.styleItem.skin],
            f = o.verticalMenuCalculations.getVisibleItemsCount(p),
            y = Math.max(a.minHeight[e], s.layout.height),
            w = o.verticalMenuCalculations.getItemHeight(y, d.params.separator, f, m),
            v = o.verticalMenuCalculations.getLineHeight(w, d.params.separator, d.params.border, m);
        t.forEach(d.linksInfo, function(e) {
            c(e.node, e.hasOverflow, v)
        }), t.forEach(d.liNodes, function(e) {
            e.style.height = w + "px"
        })
    }

    function d(i, o, n) {
        var r = n[i],
            u = e(r),
            c = u.find("a.level0"),
            l = 0,
            h = 0;
        t.forEach(c, function(e) {
            e.offsetWidth > l && (l = e.offsetWidth), h += e.offsetHeight
        }), o.custom[i] = {
            linksInfo: t.map(u.find("a"), function(e) {
                return {
                    node: e,
                    hasOverflow: e.offsetWidth > l
                }
            }),
            liNodes: u.find("li"),
            params: a(r),
            screenHeight: s(),
            pageYOffset: window.pageYOffset
        };
        var d = parseInt(r.getAttribute("data-param-border") || 0, 10),
            g = parseInt(r.getAttribute("data-param-padding") || 0, 10),
            p = l + 2 * g + 2 * d;
        p > o.width[i] && (o.width[i] = p), o.minHeight[i] = h
    }
    return i.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu", d), i.registerSAFEPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu", h), {}
}), define("layout/specificComponents/loginButtonLayout", ["lodash", "layout/util/layout"], function(e, t) {
    function i(e, t) {
        var i = e + "container";
        t.minHeight[e] = t.height[i], t.height[i] > t.height[e] && (t.height[e] = t.height[i])
    }

    function o(e, t, i) {
        var o = e + "container",
            n = (i.height[e] - i.height[o]) / 2;
        t.css(o, {
            "margin-top": n + "px"
        })
    }
    t.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginButton", [
        ["container"]
    ]), t.registerCustomMeasure("wysiwyg.viewer.components.LoginButton", i), t.registerSAFEPatcher("wysiwyg.viewer.components.LoginButton", o)
}), define("layout/util/spaceCalculationsRegardingWixAds", [], function() {
    function e(e) {
        var t = parseInt(e, 10);
        return isNaN(t) ? 0 : t
    }

    function t(t) {
        return e(t.height.WIX_ADS) + e(t.top.WIX_ADS)
    }

    function i(t) {
        return t.height.WIX_ADSdesktopWADTop || t.top.WIX_ADSdesktopWADTop ? e(t.height.WIX_ADSdesktopWADTop) + e(t.top.WIX_ADSdesktopWADTop) : e(t.height.WIX_ADS) + e(t.top.WIX_ADS)
    }

    function o(t) {
        var i, o, n = t.height.screen;
        return t.height.WIX_ADSdesktopWADTop || t.height.WIX_ADSdesktopWADBottom ? (i = e(t.height.WIX_ADSdesktopWADTop) + e(t.top.WIX_ADSdesktopWADTop), o = e(t.height.WIX_ADSdesktopWADBottom), n - i - o) : (i = e(t.height.WIX_ADS) + e(t.top.WIX_ADS), n - i)
    }
    return {
        getFirstVisibleTopCoordinate: t,
        getFirstUnoccupiedTopCoordinate: i,
        getScreenHeightExcludingAds: o
    }
}), define("layout/specificComponents/dialogLayout", ["lodash", "layout/util/layout", "layout/util/spaceCalculationsRegardingWixAds"], function(e, t, i) {
    function o(e, t, o) {
        var n = e + "dialog",
            r = o.height[n],
            a = o.height.screen,
            s = i.getFirstUnoccupiedTopCoordinate(o),
            u = i.getScreenHeightExcludingAds(o);
        t.css(e, {
            height: a + "px"
        });
        var c = (u - r) / 2;
        t.css(n, {
            top: Math.max(c, 20) + s + "px"
        })
    }
    t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog", [
        ["dialog"]
    ]), t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog", o), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog", [
        ["dialog"]
    ]), t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog", o), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog", [
        ["dialog"]
    ]), t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog", o), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog", [
        ["dialog"]
    ]), t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog", o), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog", [
        ["dialog"]
    ]), t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog", o), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog", [
        ["dialog"]
    ]), t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog", o), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.CreditsDialog", [
        ["dialog"]
    ]), t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.CreditsDialog", o)
}), define("layout/specificComponents/html5VideoLayout", ["lodash", "coreUtils", "layout/specificComponents/imageLayout", "imageClientApi"], function(e, t, i, o) {
    function n(t, i, o, n, u) {
        var c = {
                position: "absolute",
                minWidth: 0,
                minHeight: 0,
                top: 0,
                left: 0
            },
            l = t.mediaRef;
        if (!l || "WixVideo" !== l.type || o.isTouchDevice()) return c;
        var h = e.find(l.qualities, {
                quality: n
            }),
            g = r(i.width, i.height, h.width, h.height),
            p = a(t.fittingType, g, h.width, h.height),
            m = s(t.alignType, p, i);
        return c = {
            position: "absolute",
            minWidth: p.width,
            minHeight: p.height,
            left: m.left,
            top: d.isFullScreenByEffect(u, o.renderFlags.renderFixedPositionBackgrounds) ? "" : m.top
        }
    }

    function r(e, t, i, o) {
        return {
            wScale: e / i,
            hScale: t / o
        }
    }

    function a(e, t, i, n) {
        var r, a, s, u = o.fittingTypes;
        switch (e) {
            case u.SCALE_TO_FILL:
                s = Math.max(t.wScale, t.hScale), r = Math.round(i * s), a = Math.round(n * s);
                break;
            case u.SCALE_TO_FIT:
                s = Math.min(t.wScale, t.hScale), r = Math.round(i * s), a = Math.round(n * s)
        }
        return {
            width: r,
            height: a
        }
    }

    function s(e, t, i) {
        var n = i.width,
            r = i.compRootHeight,
            a = Math.floor((r - t.height) / 2),
            s = Math.floor((n - t.width) / 2),
            u = {},
            c = o.alignTypes;
        switch (e) {
            case c.CENTER:
                u.left = s, u.top = a;
                break;
            case c.LEFT:
                u.left = 0, u.top = a;
                break;
            case c.RIGHT:
                u.left = n - t.width, u.top = a;
                break;
            case c.TOP:
                u.left = s, u.top = 0;
                break;
            case c.BOTTOM:
                u.left = s, u.top = r - t.height;
                break;
            case c.TOP_LEFT:
                u.left = 0, u.top = 0;
                break;
            case c.TOP_RIGHT:
                u.left = n - t.width, u.top = 0;
                break;
            case c.BOTTOM_LEFT:
                u.left = 0, u.top = r - t.height;
                break;
            case c.BOTTOM_RIGHT:
                u.left = n - t.width, u.top = r - t.height
        }
        return u
    }

    function u(e, i, o) {
        return i ? i.url ? t.urlUtils.joinURL(o.getStaticVideoUrl(), i.url) : t.urlUtils.joinURL(o.getStaticVideoUrl(), e.videoId, i, "mp4", "file.mp4") : ""
    }

    function c(e) {
        return e.designDataItem && e.designDataItem.background ? e.designDataItem.background : e.dataItem.background
    }

    function l(e, t, o, n, r) {
        var a = e + g.POSTER,
            s = o[e],
            u = s.firstChild;
        o[e + "video"] = u, t.custom[e] = {}, t.custom[a] = {};
        var c = u.firstChild;
        o[e + "mp4"] = c, t.custom[e] = {
            quality: s.getAttribute("data-quality"),
            src: c.src,
            videoNode: u
        }, i.measureNodeImage(a, t, o, n, r)
    }

    function h(t, o, r, a, s, l, h) {
        var g = c(a),
            p = !s.isTouchDevice(),
            m = d.getBgEffectName(a.behaviorsItem, p, s.isMobileView()),
            f = h.width,
            y = h.height,
            w = r.custom[t],
            v = w.quality,
            C = n(g, {
                width: f,
                height: l,
                compRootHeight: y
            }, s, v, m);
        o.attr(t + "video", {
            width: C.minWidth,
            height: C.minHeight
        }), o.css(t + "video", C);
        var b = u(g.mediaRef, v, s);
        w.src !== b && (o.attr(t + "mp4", {
            src: b
        }), w.videoNode.load());
        var M = {
                width: f,
                height: l,
                top: 0
            },
            S = e.assign({
                displayMode: g.fittingType
            }, g.mediaRef.posterImageRef);
        i.patchNodeImage(t + "poster", o, r, s, S, M, g.alignType)
    }
    var d = t.containerBackgroundUtils,
        g = t.balataConsts;
    return {
        patchBgVideo: h,
        measureBgVideo: l
    }
}), define("layout/util/optimizedCssImageLayout", ["lodash", "zepto", "coreUtils"], function(e, t, i) {
    function o(t, i) {
        return !e.includes(t, i) || Boolean(t) !== Boolean(i)
    }

    function n(e, t) {
        return e ? i.urlUtils.isExternalUrl(e) ? e : i.urlUtils.joinURL(t.getStaticMediaUrl(), e) : ""
    }

    function r(i, o) {
        var n = t(o);
        i.type = n.data("type"), i.currentCss = n.data("image-css"), i.currentCss && e.isString(i.currentCss) && (i.currentCss = JSON.parse(i.currentCss)), i.previousBackgroundImageCssUrl = n.css("backgroundImage")
    }

    function a(e, t, i, o) {
        o === h.BG_IMAGE ? e.css(t, {
            backgroundImage: i ? 'url("' + i + '")' : ""
        }) : e.attr(t, {
            src: i
        })
    }

    function s(t, i, o, n, r) {
        var s = o.previousBackgroundImageCssUrl;
        r.imageResizeHandlers = r.imageResizeHandlers || {}, s && n ? (r.imageResizeHandlers[t] || (r.imageResizeHandlers[t] = e.debounce(a, l, {
            trailing: !0
        })), r.imageResizeHandlers[t](i, t, n, o.type)) : a(i, t, n, o.type)
    }

    function u(t, i) {
        return i && (!t || e.some(i, function(e, i) {
            return e !== t[i]
        }))
    }

    function c(t, i, r, a, c, l) {
        if (u(t.currentCss, a)) {
            r.css(i, a);
            var h = e.defaults(a, t.currentCss);
            r.data(i, {
                "image-css": JSON.stringify(h)
            })
        }
        var d = n(c, l);
        o(t.previousBackgroundImageCssUrl, d) && s(i, r, t, d, l)
    }
    var l = 250,
        h = i.balataConsts;
    return {
        cacheCssImageMeasureData: r,
        patchCssImage: c
    }
}), define("layout/specificComponents/siteBackgroundLayout", ["lodash", "zepto", "layout/util/layout", "imageClientApi", "layout/specificComponents/imageLayout", "layout/specificComponents/html5VideoLayout", "layout/util/optimizedCssImageLayout", "experiment"], function(e, t, i, o, n, r, a, s) {
    function u(e, t, i, o, n) {
        i.top[e] = m(i), i.width[e] = f(i, n), i.height[e] = p(i, n), i.height.currentImage = i.height.masterPage, t.css(e, {
            top: i.top[e] + "px",
            height: i.height[e] + "px",
            width: i.width[e] + "px"
        });
        var u = i.custom[e];
        if (s.isOpen("sv_mobileBG")) {
            var c = n.isMobileView(),
                h = n.isMobileDevice(),
                d = {
                    width: c ? i.width.screen : "100%",
                    height: c && "fixed" === u.bgPosition ? l(i, c, h).availHeight : "100%"
                };
            t.css(S, d), t.css(I, d)
        }
        var y = g(u, n, i);
        if (a.patchCssImage(u, b, t, y.css, y.uri, n), i.custom[e + T]) {
            var w = {
                    designDataItem: {
                        background: u.bgData
                    }
                },
                v = {
                    width: i.width.screen,
                    height: i.height.screen
                };
            r.patchBgVideo(e + T, t, i, w, n, v.height, v)
        }
    }

    function c(e, t) {
        var i = e.getDataByQuery(t),
            o = e.isMobileView() ? "mobile" : "desktop";
        return {
            bgData: i.pageBackgrounds[o].ref,
            mediaSizing: i.pageBackgrounds[o].mediaSizing
        }
    }

    function l(e, t, i) {
        var o = {
            availWidth: e.width.screen,
            availHeight: e.height.screen,
            pixelAspectRatio: e.devicePixelRatio
        };
        if (t && i) {
            var n = Math.min(e.availWidth.device, e.availHeight.device),
                r = Math.max(e.availWidth.device, e.availHeight.device);
            o.availHeight = Math.round(o.availWidth * (r / n))
        }
        return o
    }

    function h(e, t, i) {
        return !!s.isOpen("sv_mobileBG") && (i && e.mediaRef && "viewport" === t)
    }

    function d(t, i, n, r, a) {
        var s = {},
            u = e.at(o.fittingTypes, ["LEGACY_BG_NORMAL", "LEGACY_BG_FIT_AND_TILE", "LEGACY_BG_FIT_AND_TILE_HORIZONTAL", "LEGACY_BG_FIT_AND_TILE_VERTICAL"]),
            c = e.includes(u, i.fittingType);
        if (r && !c) s.width = n.availWidth, s.height = n.availHeight, s.pixelAspectRatio = n.pixelAspectRatio;
        else {
            var l = a ? C : v;
            s.width = Math.min(l, t.width), s.height = Math.min(l, Math.round(s.width / (t.width / t.height)))
        }
        return s.htmlTag = "bg", s.alignment = i.alignType, s
    }

    function g(t, i, n) {
        var r = t.bgData,
            a = r.mediaRef,
            s = {
                backgroundSize: "",
                backgroundPosition: "",
                backgroundRepeat: ""
            },
            u = "";
        if (a) {
            "WixVideo" === a.type && (a = a.posterImageRef);
            var c = i.isMobileView(),
                g = l(n, c, i.isMobileDevice()),
                p = h(r, t.mediaSizing, c),
                m = {
                    id: a.uri,
                    width: a.width,
                    height: a.height
                },
                f = d(a, r, g, p, c),
                y = e.defaults({
                    quality: 85
                }, a.quality || {}),
                w = o.getData(r.fittingType, m, f, y, i.browser);
            u = w.uri, s = {
                backgroundSize: w.css.container.backgroundSize,
                backgroundPosition: w.css.container.backgroundPosition,
                backgroundRepeat: w.css.container.backgroundRepeat
            }, p && ("fill" === r.fittingType && (s.backgroundSize = "auto 100%", s.height = g.availHeight), s.backgroundPosition = s.backgroundPosition.replace(/(center|bottom)$/, "top"))
        }
        return {
            css: s,
            uri: u
        }
    }

    function p(e, t) {
        var i = e.height[t.getStructureCompId()],
            o = e.height.screen - m(e);
        return Math.max(o, i)
    }

    function m(e) {
        var t = parseInt(e.height.WIX_ADS, 10);
        t = isNaN(t) ? 0 : t;
        var i = parseInt(e.top.WIX_ADS, 10);
        return i = isNaN(i) ? 0 : i, t + i
    }

    function f(e, t) {
        var i = e.width[t.getStructureCompId()];
        return Math.ceil(Math.max(e.width.screen, i))
    }

    function y(e) {
        return [
            [e.getPrimaryPageId()]
        ]
    }

    function w(i, o, r, u, l) {
        r[b] = window.document.querySelector("." + b), s.isOpen("sv_mobileBG") && (r[S] = window.document.querySelector("." + S), r[I] = window.document.querySelector("." + I));
        var d = c(u, u.getPrimaryPageId());
        if (o.custom[i] = {
                bgData: d.bgData,
                mediaSizing: d.mediaSizing
            }, h(d.bgData, d.mediaSizing, u.isMobileView()) && (o.custom[i].bgPosition = t(r[S]).data("position")), a.cacheCssImageMeasureData(o.custom[i], r[b]), "WixVideo" === e.get(d.bgData.mediaRef, "type") && !u.isTouchDevice()) {
            r[M] = window.document.querySelector("." + M), r[i + A] = r[M].querySelector("." + A), r[i + x] = r[M].querySelector("." + x), r[i + L] = r[i + A].firstChild;
            var g = r[i + A];
            o.custom[i + T] = {
                bgData: d.bgData,
                videoNode: g,
                quality: r[M].getAttribute("data-quality"),
                src: r[i + L].getAttribute("src")
            }, n.measureNodeImage(i + x, o, r, u, l)
        }
    }
    var v = 1920,
        C = 1e3,
        b = "siteBackgroundcurrentImage",
        M = "siteBackgroundcurrentVideo",
        S = "siteBackgroundcurrent",
        I = "siteBackgroundprevious",
        T = "bgVideo",
        x = T + "poster",
        A = T + "video",
        L = T + "mp4";
    return i.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground", y), i.registerSAFEPatcher("wysiwyg.viewer.components.SiteBackground", u), i.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground", w), {
        testAPI: {
            getDeviceScreenDimensions: l,
            calculateTargetImageSize: d,
            getCssImageData: g
        }
    }
}), define("layout/specificComponents/wPhotoLayout", ["zepto", "lodash", "layout/util/layout", "layout/specificComponents/imageLayout", "coreUtils", "siteUtils", "imageClientApi"], function(e, t, i, o, n, r, a) {
    function s(e) {
        return e === a.fittingTypes.LEGACY_FIT_WIDTH ? a.fittingTypes.LEGACY_FIT_HEIGHT : h[e] || e
    }

    function u(e, t, i) {
        var o = t.height[e] - (t.custom[e].marginHeight || 0),
            n = t.width[e] - (t.custom[e].marginWidth || 0),
            r = {
                width: n > 0 ? n : t.width[e],
                height: o > 0 ? o : t.height[e]
            },
            s = t.custom[e].exactHeight - (t.custom[e].marginHeight || 0);
        return i === a.fittingTypes.LEGACY_FIT_HEIGHT && Math.ceil(s) === r.height && (r.height = s), r
    }

    function c(t, i, o) {
        var n = e(o[t]),
            r = parseInt(n.data("content-padding-horizontal"), 10),
            a = parseInt(n.data("content-padding-vertical"), 10),
            s = parseFloat(n.data("exact-height"));
        i.height[t] = i.custom[t] && i.custom[t].thisIsMyHeight || o[t].offsetHeight, i.custom[t] = {
            marginWidth: r,
            marginHeight: a,
            exactHeight: s
        }
    }

    function l(e, i, a, c, l) {
        var h = e + "img",
            d = e + "link",
            g = c.dataItem,
            p = c.propertiesItem,
            m = s(p && p.displayMode || "fill"),
            f = n.imageUtils.getContainerSize(u(e, a, m), {
                width: g.width,
                height: g.height
            }, m),
            y = r.layout.isVerticallyStretched(c.layout),
            w = {
                width: r.layout.isHorizontallyStretched(c.layout) ? "" : f.width + a.custom[e].marginWidth,
                height: y ? "" : f.height + a.custom[e].marginHeight
            },
            v = t.assign({}, t.pick(g, ["width", "height", "uri", "quality"]), {
                displayMode: m,
                crop: t.get(p, "overrideCrop") || g.crop
            });
        o.patchNodeImage(h, i, a, l, v, f), i.css(e, w), i.css(d, f)
    }
    var h = {
            fitWidthStrict: a.fittingTypes.LEGACY_FIT_WIDTH,
            fitHeightStrict: a.fittingTypes.LEGACY_FIT_HEIGHT
        },
        d = {
            pathArray: ["img"],
            type: "core.components.Image"
        };
    i.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto", [d, ["link"]]), i.registerSAFEPatcher("wysiwyg.viewer.components.WPhoto", l), i.registerCustomMeasure("wysiwyg.viewer.components.WPhoto", c), i.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt", [d, ["link"]]), i.registerSAFEPatcher("wysiwyg.viewer.components.ClipArt", l), i.registerCustomMeasure("wysiwyg.viewer.components.ClipArt", c)
}), define("layout/specificComponents/documentMediaLayout", ["zepto", "lodash", "layout/util/layout", "imageClientApi", "layout/specificComponents/imageLayout"], function(e, t, i, o, n) {
    function r(e, i, r, a, s) {
        var u = t.defaults({
            displayMode: o.fittingTypes.LEGACY_FULL
        }, a.dataItem);
        n.patchNodeImage(e + "img", i, r, s, u, r.custom[e].containerSize), i.css(e, {
            width: r.width[e]
        })
    }

    function a(t, i, o) {
        var n = e(o[t]),
            r = t + "label",
            a = i.width[r],
            s = i.height[r],
            u = Math.max(i.width[t], a),
            c = n.data("content-padding-left"),
            l = n.data("content-padding-right"),
            h = n.data("content-padding-top"),
            d = n.data("content-image-height"),
            g = {
                width: u - c - l,
                height: Math.max(d - h - s, 1)
            };
        i.custom[t] = {
            containerSize: g
        }, i.width[t] = u, i.minWidth[t] = a
    }
    i.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia", [
        ["label"], {
            pathArray: ["img"],
            type: "core.components.Image"
        },
        ["link"]
    ]), i.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia", a), i.registerSAFEPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia", r)
}), define("layout/util/calculateScreenWidthDimensions", ["siteUtils", "layout/util/rootLayoutUtils"], function(e, t) {
    var i = e.layout.stretchInCenteredContainer;
    return function(e, o, n) {
        var r = Math.max(e.width.screen, t.getRootWidth(o, e, n));
        return i(t.getRootWidth(o, e, n), r)
    }
}), define("layout/specificComponents/bgImageLayout", ["zepto", "lodash", "layout/util/layout", "coreUtils", "imageClientApi", "layout/util/optimizedCssImageLayout", "layout/specificComponents/imageLayout"], function(e, t, i, o, n, r, a) {
    function s(e) {
        return !e || o.urlUtils.isExternalUrl(e)
    }

    function u(e, i, o, r, a, s) {
        var u = a.mobile.getDevicePixelRatio(),
            c = {
                width: r.width,
                height: r.height,
                alignment: i,
                htmlTag: s || "bg",
                pixelAspectRatio: u
            },
            l = {
                id: o.uri,
                width: o.width,
                height: o.height
            },
            h = t.defaults({
                quality: 85
            }, o.quality || {});
        return n.getData(e, l, c, h, a.browser)
    }

    function c(e, t, i) {
        var o = e + "bg";
        i[o] && (t.custom[e] = {}, r.cacheCssImageMeasureData(t.custom[e], i[o]))
    }

    function l(t, i, o, n, s) {
        var u = t + f.MEDIA + f.CONTENT,
            c = o[u].getAttribute("data-type");
        if (i.custom[t] = i.custom[t] || {}, i.custom[t].type = c, c === f.IMAGE) a.measureNodeImage(u, i, o, n, s);
        else {
            var l = u + "image";
            o[l] = e(o[u]).find("#" + l)[0];
            var h = o[l];
            i.custom[u] = {}, r.cacheCssImageMeasureData(i.custom[u], h)
        }
    }

    function h(e, t, i, o, n) {
        var r = i.width,
            a = o || i.height,
            c = p(e);
        if (c && !s(c.uri)) return u(e.fittingType, e.alignType, c, {
            width: r,
            height: a
        }, n, t)
    }

    function d(e, i, o, n, s, u, c, l) {
        var d = n.custom[e].type,
            m = g(s);
        if (d === f.IMAGE) {
            var y = {
                    width: l.width,
                    height: c
                },
                w = t.assign({
                    displayMode: m.fittingType
                }, p(m));
            a.patchNodeImage(i, o, n, u, w, y, m.alignType)
        } else {
            var v = i + "image",
                C = h(m, "bg", l, c, u),
                b = t.assign({
                    height: c
                }, C.css.container);
            r.patchCssImage(n.custom[i], v, o, b, C.uri, u)
        }
    }

    function g(e) {
        return t.isUndefined(e.designDataItem) ? e.dataItem.background : e.designDataItem.background
    }

    function p(e) {
        var t = e.mediaRef;
        return t && "WixVideo" === t.type && (t = t.posterImageRef), t
    }

    function m(e, t, i, o, n, a) {
        var c = i.custom[e],
            l = e + "bg";
        if (c) {
            var h = o.dataItem;
            if (!h || s(h.uri)) return;
            var d = u(o.propertiesItem.fittingType, o.propertiesItem.alignType, h, a, n);
            r.patchCssImage(c, l, t, d.css.container, d.uri, n)
        }
    }
    var f = o.balataConsts;
    return i.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage", [
        ["image"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip", [
        ["bg"]
    ]), {
        measureLegacyBgImageStrip: c,
        measureBgImageBalata: l,
        patchBgImage: d,
        patchLegacyBgImageStrip: m
    }
}), define("layout/specificComponents/youtubeVideoLayout", ["lodash", "coreUtils", "layout/specificComponents/imageLayout"], function(e, t, i) {
    function o(e) {
        return e.designDataItem && e.designDataItem.background ? e.designDataItem.background : e.dataItem.background
    }

    function n(e, t, o, n, r) {
        var s = e + a.POSTER,
            u = o[e];
        o[e + "video"] = u.firstChild, t.custom[e] = {}, t.custom[s] = {}, i.measureNodeImage(s, t, o, n, r)
    }

    function r(t, n, r, a, s, u, c) {
        var l = o(a),
            h = c.width,
            d = c.height;
        n.attr(t + "video", {
            "min-width": h,
            "min-height": d,
            width: h,
            height: d
        }), n.css(t + "video", {
            position: "absolute"
        });
        var g = {
                width: h,
                height: u,
                top: 0
            },
            p = l.mediaRef.posterImage || {
                uri: "//img.youtube.com/vi/" + l.mediaRef.videoId + "/hqdefault.jpg"
            },
            m = e.assign({
                displayMode: l.fittingType
            }, p);
        i.patchNodeImage(t + "poster", n, r, s, m, g, l.alignType)
    }
    var a = t.balataConsts;
    return {
        patchBgVideo: r,
        measureBgVideo: n
    }
}), define("layout/specificComponents/balataLayout", ["lodash", "coreUtils", "layout/specificComponents/bgImageLayout", "layout/specificComponents/html5VideoLayout", "layout/specificComponents/youtubeVideoLayout"], function(e, t, i, o, n) {
    function r(t, i, o, n, r) {
        var a = t[n][o];
        return e.isNumber(a) ? a : (a = i[o][r], e.isNumber(a) ? a : 0)
    }

    function a(t, i, o, n, a, u) {
        var c = h(t),
            l = i.custom[c] = {},
            d = c + g.MEDIA;
        l.hasBalata = Boolean(o[c]), l.hasMedia = Boolean(o[d]), l.hasBalata && (l.enableVideo = "true" === o[c].getAttribute("data-enable-video"), e.forEach(u, function(e, t) {
            i[t][c] = e
        }), i.left[c] = r(i, o, c, "left", "offsetLeft"), i.top[c] = r(i, o, c, "top", "offsetTop"), s(c, i, o, n, a))
    }

    function s(e, t, r, a, s) {
        var u = d(s).mediaRef,
            c = t.custom[e].enableVideo;
        u && ("Image" !== u.type && c ? "WixVideo" === u.type ? o.measureBgVideo(e + g.MEDIA + g.CONTENT, t, r, a, s) : "Video" === u.type && "YOUTUBE" === u.videoType && n.measureBgVideo(e + g.MEDIA + g.CONTENT, t, r, a, s) : i.measureBgImageBalata(e, t, r, a, s))
    }

    function u(t, i, o, n, r, a, s) {
        var u = h(t),
            d = o.custom[u];
        if (d.hasBalata) {
            var m = u + g.MEDIA,
                f = !r.isTouchDevice(),
                y = p.getBgEffectName(n.behaviorsItem, f, r.isMobileView()),
                w = p.getHeightByEffect(y, o, a.height),
                v = {
                    overflow: "hidden",
                    left: a.left,
                    width: a.width,
                    clip: "rect(0px," + a.width + "px," + a.height + "px,0px)"
                };
            s && (v = e.omit(v, ["left", "width"])), i.css(u, v), d.hasMedia && (i.css(m, {
                width: a.width + "px",
                left: c(y, a, r),
                height: w + "px"
            }), l(u, i, o, n, r, w, a))
        }
    }

    function c(e, t, i) {
        return p.isFullScreenByEffect(e, i.renderFlags.renderFixedPositionBackgrounds) ? Math.floor(t.absoluteLeft || 0) : 0
    }

    function l(e, t, r, a, s, u, c) {
        var l = e + g.MEDIA + g.CONTENT,
            h = d(a).mediaRef,
            p = r.custom[e].enableVideo;
        h && ("Image" !== h.type && p ? "WixVideo" === h.type ? o.patchBgVideo(l, t, r, a, s, u, c) : "Video" === h.type && "YOUTUBE" === h.videoType && n.patchBgVideo(l, t, r, a, s, u, c) : i.patchBgImage(e, l, t, r, a, s, u, c))
    }

    function h(e) {
        return e + g.BALATA
    }

    function d(t) {
        return e.get(t, ["designDataItem", "background"], e.get(t, ["dataItem", "background"])) || {}
    }
    var g = t.balataConsts,
        p = t.containerBackgroundUtils;
    return {
        BALATA_PATHS_TO_REQUEST_MEASURE: [
            [g.BALATA],
            [g.BALATA, g.MEDIA],
            [g.BALATA, g.MEDIA, g.CONTENT],
            [g.BALATA, g.MEDIA, g.CONTENT, g.POSTER],
            [g.BALATA, g.OVERLAY],
            [g.BALATA, g.OVERLAY, g.OVERLAY]
        ],
        measure: a,
        patch: u
    }
}), define("layout/specificComponents/containerAndScreenWidthLayout", ["lodash", "zepto", "layout/util/layout", "coreUtils", "siteUtils", "layout/util/rootLayoutUtils", "layout/util/calculateScreenWidthDimensions", "layout/specificComponents/bgImageLayout", "layout/specificComponents/balataLayout"], function(e, t, i, o, n, r, a, s, u) {
    function c(e, t, i) {
        t.height[e] = i[e].offsetHeight, p(e, t, i)
    }

    function l(e) {
        return e.isMobileView() ? "mobile" : "desktop"
    }

    function h(t, i) {
        return e.get(t.dataItem, ["pageBackgrounds", l(i), "ref"])
    }

    function d(i, o, r, a, s) {
        c(i, o, r), o.shrinkableContainer[i] = !0;
        var u = n.layout.getPageBottomChildEnd(o, r, a, s) + o.containerHeightMargin[i],
            l = a.getPageMinHeight(),
            d = e.get(s, ["propertiesItem", a.isMobileView() ? "mobile" : "desktop"]);
        if (d && d.minHeight && (l = d.minHeight), o.pageBottomByComponents[i] = u, o.minHeight[i] = l, o.height[i] = Math.max(l, u), o.width[i] = r[i].offsetWidth, r.POPUPS_ROOT = t("#POPUPS_ROOT"), s.dataItem.isPopup) {
            var g = {
                    background: h(s, a)
                },
                p = e.clone(s);
            p.id += H, p.designDataItem = g, o.top[i] = 0, m(i, o, r, a, p)
        }
    }

    function g(e, t, i) {
        var o = t.height[e + "inlineContent"] || 0;
        t.containerHeightMargin[e] = o ? i[e].offsetHeight - o : 0
    }

    function p(e, t, i) {
        t.left[e] = 0, g(e, t, i)
    }

    function m(e, t, i, o, n) {
        p(e, t, i), R(n) && u.measure(e, t, i, o, n, {
            left: Math.max(0, .5 * (t.clientWidth - t.width.screen)),
            width: t.width.screen,
            height: t.innerHeight.screen
        })
    }

    function f(e, t, i, o, n) {
        if (p(e, t, i), R(n)) {
            var r = a(t, o, n.rootId);
            t.width[e] = r.width;
            var s = {
                width: r.width,
                left: r.left,
                height: t.height[e]
            };
            u.measure(e, t, i, o, n, s)
        }
    }

    function y(e, t, i, o, n) {
        t.custom[e] = {
            isFixedPosition: n.layout.fixedPosition
        }, p(e, t, i)
    }

    function w(e, t) {
        t.css(e, {
            left: 0
        })
    }

    function v(e, t, i, o, n, r) {
        t.css(r, {
            width: i.width.screen,
            left: E(n.getSiteWidth(), i.width.screen, n)
        }), w(e, t)
    }

    function C(e, t, i, o, n) {
        v(e, t, i, o, n, e + "screenWidthBackground")
    }

    function b(e, i, o) {
        p(e, i, o);
        var n = t(o[e + "navigationArrows"]);
        i.custom[e] = {
            offset: parseInt(n.attr("data-navigation-button-margin"), 10)
        }
    }

    function M(e, i, o, n, r) {
        var a = t(o[e]),
            s = a.data("parent-id");
        i.minHeight[e] = a.data("min-height"), i.height[e] = i.height[s], f(e, i, o, n, r)
    }

    function S(e, t, i, o, n) {
        var s = e + "inlineContent",
            u = s + "Parent",
            c = a(i, o, n.rootId);
        t.css(u, {
            left: c.left,
            width: c.width
        }), t.css(s, {
            left: -1 * c.left,
            width: r.getRootWidth(o, i, n.rootId)
        })
    }

    function I(e, t, i, o, n) {
        S(e, t, i, n, o)
    }

    function T(e, t, i, o, n) {
        w(e, t, i), S(e, t, i, n, o);
        var r = E(o.layout.width, i.width.screen, n) + i.custom[e].offset;
        t.css(e, {
            width: n.getSiteWidth()
        }), t.css(e + "prevButton", {
            left: r
        }), t.css(e + "nextButton", {
            right: r
        })
    }

    function x(t, i, o, n, r) {
        if (n.dataItem.isPopup) {
            i.css("POPUPS_ROOT", {
                width: o.innerWidth.screen,
                height: o.innerHeight.screen
            });
            var a = t + H,
                s = e.defaultsDeep({
                    id: a,
                    rootId: "masterPage",
                    structure: {
                        behaviors: []
                    }
                }, n),
                c = h(n, r);
            s.designDataItem = {
                background: c
            }, u.patch(t, i, o, s, r, {
                left: o.left[a],
                top: o.top[a],
                width: o.width[a],
                height: o.height[a]
            })
        }
    }

    function A(t, i, o, n, s, c) {
        if (R(n)) {
            w(t, i);
            var l = a(o, s, n.rootId),
                h = e.assign({
                    top: 0,
                    left: l.left,
                    width: l.width,
                    height: o.height[t],
                    absoluteLeft: 0
                }, c);
            i.css(t, {
                width: r.getRootWidth(s, o, n.rootId)
            }), u.patch(t, i, o, n, s, h)
        }
    }

    function L(t) {
        return "Image" === e.get(t, ["dataItem", "type"])
    }

    function P(e, t, i, o, n) {
        var r = a(t, o, n.rootId);
        t.width[e] = r.width, t.left[e] = r.left, L(n) && s.measureLegacyBgImageStrip(e, t, i, o, n)
    }

    function D(e, t, i, o, n) {
        if (t.css(e, {
                width: i.width[e] + "px",
                left: i.left[e] + "px"
            }), L(o)) {
            var r = {
                width: i.width[e],
                height: i.height[e]
            };
            s.patchLegacyBgImageStrip(e, t, i, o, n, r)
        } else {
            var a = e + "bg";
            t.css(a, {
                backgroundImage: "none"
            })
        }
    }

    function E(e, t, i) {
        return i.isMobileView() || i.isMobileDevice() ? 0 : Math.min(parseInt(Math.floor((e - t) / 2), 10), 0)
    }

    function B(e, t, i, o) {
        var n = o.layout && o.layout.fixedPosition;
        t.css(e, {
            height: i.height[e],
            bottom: n ? i.siteMarginBottom : "auto",
            top: n ? "auto" : i.top[e]
        })
    }

    function R(t) {
        return e.isUndefined(t.designDataItem) ? t.dataItem.background : t.designDataItem.background
    }
    var H = o.balataConsts.BALATA;
    return i.registerRequestToMeasureDom("mobile.core.components.Container"), i.registerRequestToMeasureDom("mobile.core.components.Page"), i.registerRequestToMeasureDom("wixapps.integration.components.AppPage"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShow"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainer"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripColumnsContainer"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.Column"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShowSlide"), i.registerMeasureChildrenFirst("mobile.core.components.Page", !0), i.registerMeasureChildrenFirst("wixapps.integration.components.AppPage", !0), i.registerRequestToMeasureChildren("mobile.core.components.Container", [
        ["inlineContent"]
    ]), i.registerRequestToMeasureChildren("mobile.core.components.Page", function(e, t, i, o) {
        return o.dataItem.isPopup ? [
            ["inlineContent"]
        ].concat(u.BALATA_PATHS_TO_REQUEST_MEASURE) : [
            ["inlineContent"]
        ]
    }), i.registerRequestToMeasureChildren("wixapps.integration.components.AppPage", [
        ["inlineContent"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer", [
        ["screenWidthBackground"],
        ["inlineContent"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer", [
        ["screenWidthBackground"],
        ["inlineContent"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer", [
        ["screenWidthBackground"],
        ["inlineContent"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer", [
        ["screenWidthBackground"],
        ["inlineContent"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShow", [
        ["background"],
        ["inlineContentParent"],
        ["inlineContent"],
        ["shownOnAllSlides"],
        ["navigationArrows"],
        ["prevButton"],
        ["nextButton"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer", [
        ["inlineContent"]
    ].concat(u.BALATA_PATHS_TO_REQUEST_MEASURE)), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide", [
        ["inlineContentParent"],
        ["inlineContent"]
    ].concat(u.BALATA_PATHS_TO_REQUEST_MEASURE)), i.registerCustomMeasure("mobile.core.components.Container", g), i.registerCustomMeasure("mobile.core.components.Page", d), i.registerCustomMeasure("wixapps.integration.components.AppPage", d), i.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer", y), i.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer", c), i.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer", y), i.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer", p), i.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShow", b), i.registerCustomMeasure("wysiwyg.viewer.components.StripContainer", f), i.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShowSlide", M), i.registerCustomMeasure("wysiwyg.viewer.components.BgImageStrip", P), i.registerSAFEPatchers("wysiwyg.viewer.components.FooterContainer", [C, B]), i.registerSAFEPatcher("wysiwyg.viewer.components.HeaderContainer", C), i.registerSAFEPatcher("mobile.core.components.Page", x), i.registerSAFEPatcher("wysiwyg.viewer.components.PagesContainer", C), i.registerSAFEPatcher("wysiwyg.viewer.components.ScreenWidthContainer", C), i.registerSAFEPatcher("wysiwyg.viewer.components.StripContainerSlideShow", T), i.registerSAFEPatcher("wysiwyg.viewer.components.StripContainer", A), i.registerSAFEPatchers("wysiwyg.viewer.components.StripContainerSlideShowSlide", [I, A]), i.registerSAFEPatcher("wysiwyg.viewer.components.BgImageStrip", D), {
        measureContainer: g,
        measureStripContainer: f,
        patchStripContainer: A
    }
}), define("layout/specificComponents/groupLayout", ["lodash", "layout/util/layout", "coreUtils"], function(e, t, i) {
    function o(t, o, r, a, s) {
        var u = i.dataUtils.getChildrenData(s.structure, a.isMobileView()),
            c = n(u, o);
        o.left[t] = s.layout.x, u.length > 0 && (o.width[t] = c.right - c.left, o.height[t] = c.bottom - c.top, o.top[t] = s.layout.y + c.top, o.left[t] = s.layout.x + c.left, e.forEach(u, function(e) {
            o.top[e.id] = e.layout.y - c.top, o.left[e.id] = e.layout.x - c.left
        }))
    }

    function n(t, o) {
        var n, r, a, s;
        return n = a = Number.MAX_VALUE, r = s = -Number.MAX_VALUE, e.forEach(t, function(e) {
            var t = e.layout,
                u = o.left && o.left[e.id] ? o.left[e.id] : t.x,
                c = o.width && o.width[e.id] ? o.width[e.id] : t.width,
                l = o.top && o.top[e.id] ? o.top[e.id] : t.y,
                h = o.height && o.height[e.id] ? o.height[e.id] : t.height,
                d = i.boundingLayout.getBoundingLayout({
                    x: u,
                    y: l,
                    width: c,
                    height: h,
                    rotationInDegrees: t.rotationInDegrees
                });
            n = Math.min(n, d.x), r = Math.max(r, d.x + d.width), a = Math.min(a, d.y), s = Math.max(s, d.y + d.height)
        }), {
            left: n,
            right: r,
            top: a,
            bottom: s
        }
    }

    function r(t, o, n, r, a) {
        o.css(t, {
            width: n.width[t],
            height: n.height[t],
            top: n.top[t],
            left: n.left[t]
        });
        var s = i.dataUtils.getChildrenData(r.structure, a.isMobileView());
        e.forEach(s, function(e) {
            o.css(e.id, {
                top: n.top[e.id],
                left: n.left[e.id]
            })
        })
    }
    t.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group", !0), t.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"), t.registerCustomMeasure("wysiwyg.viewer.components.Group", o), t.registerSAFEPatcher("wysiwyg.viewer.components.Group", r)
}), define("layout/wixappsLayout/proxyLayoutRegistrar", [], function() {
    var e = {};
    return {
        registerCustomMeasure: function(t, i) {
            e[t] = i
        },
        getProxiesToMeasure: function() {
            return e
        }
    }
}), define("layout/specificComponents/wixappsLayout", ["zepto", "lodash", "coreUtils", "layout/wixappsLayout/proxyLayoutRegistrar", "layout/util/layout", "layout/util/singleCompLayout", "experiment"], function(e, t, i, o, n, r) {
    function a() {
        var i = t.toArray(arguments),
            o = i.join(""),
            n = i.slice(1).join("");
        return e("#" + o)[0] || e("#" + n)[0]
    }

    function s(e, t, i) {
        return i.custom[e] && i.custom[e].appPartShouldRenderAgain
    }

    function u(e, t, i, o) {
        r.measureComponentChildren(e, a, o, i, t)
    }

    function c(e, t, i, o) {
        var n = e.compId,
            s = a(n);
        t[n] = s;
        var c = e.structureInfo;
        c.id = n, c.type = e.compType, u(c, o, t, i), r.maps.classBasedCustomMeasures[e.compType] && r.maps.classBasedCustomMeasures[e.compType](n, i, t, o, e.structureInfo)
    }

    function l(e, o, n) {
        var r = e + m,
            a = t.get(n, [e, "attributes", "data-state", "value"]);
        i.stringUtils.isTrue(n[e].getAttribute("data-dynamic-height")) && "loading" !== a && (o.height[e] = o.height[r], o.minHeight[e] = o.height[r])
    }

    function h(e, i, n, r, a) {
        var s = e.id,
            u = s + m,
            l = i.querySelector("#" + u);
        n.custom[s] = n.custom[s] || {};
        var h = !1;
        t.forEach(o.getProxiesToMeasure(), function(e, i) {
            var o = p(i, l);
            n.custom[s][i] = n.custom[s][i] || [], t.forEach(o, function(t, o) {
                var u = e(t, a, n);
                n.custom[s][i][o] = u, u.comp && c(u.comp, r, n, a), u.needsRelayout && !n.custom[s][i][o].didRelayout && (h = !0, n.custom[s][i][o].didRelayout = !0)
            })
        });
        var d = {};
        return d[e.id] = !0, {
            needsAdditionalInnerLayout: h,
            changedCompsMap: d
        }
    }

    function d(e, i, n, a, s) {
        var u = e.id;
        i.custom[u].appPartShouldRenderAgain = t.reduce(o.getProxiesToMeasure(), function(e, o, c) {
            var l = i.custom[u][c],
                h = t.reduce(l, function(e, t) {
                    g(t.domManipulations);
                    var o = t.shouldRenderAgain,
                        u = t.comp;
                    return u && (o = o || r.patchComponent(u.structureInfo, n, a, i, s)), e || o
                }, !1);
            return e || h
        }, !1)
    }

    function g(i) {
        t.forEach(i, function(i) {
            var o = e(i.node),
                n = i.funcName,
                r = t.isArray(i.params) ? i.params : [i.params];
            t.isFunction(o[n]) && o[n].apply(o, r)
        })
    }

    function p(t, i) {
        return e("[data-proxy-name=" + t + "]", i)
    }
    var m = "inlineContent";
    return n.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart", h, d), n.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2", h, d), n.registerRequestToMeasureChildren("wixapps.integration.components.AppPart", [
        [m]
    ]), n.registerRequestToMeasureDom("wixapps.integration.components.AppPart"), n.registerCustomMeasure("wixapps.integration.components.AppPart", l), n.registerSAFEPatcher("wixapps.integration.components.AppPart", s), n.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2", [
        [m]
    ]), n.registerRequestToMeasureDom("wixapps.integration.components.AppPart2"), n.registerCustomMeasure("wixapps.integration.components.AppPart2", l), n.registerSAFEPatcher("wixapps.integration.components.AppPart2", s), {
        appPartMeasureFunction: l,
        appPartPatcherFunction: s,
        inlineContentId: m,
        preMeasureProxies: h,
        postPatchProxies: d
    }
}), define("layout/specificComponents/svgShape/svgScalerUtils", [], function() {
    return {
        trim: function(e) {
            return e.replace(/^\s+|\s+$/g, "")
        },
        round: function(e) {
            return Math.round(1e6 * e) / 1e6
        }
    }
}), define("layout/specificComponents/svgShape/svgPathParser", ["lodash", "layout/specificComponents/svgShape/svgScalerUtils"], function(e, t) {
    return {
        getParsedPath: function(i) {
            var o = t.trim(i);
            return "" === o ? [] : o.match(/[a-z][^a-z]*/gi).map(function(i) {
                for (i = i.replace(/-/g, " -").replace(/,/g, " ").replace(/(-?\d*[\.\-]\d+)/g, function(e, t) {
                        return " " + t
                    }); e.includes(i, "  ");) i = i.replace(/ {2}/g, " ");
                return [i.substring(0, 1), t.trim(i.substring(1))]
            }).map(function(t) {
                var i, o = [];
                return e.includes("QSCL", t[0].toUpperCase()) && 1 === t[1].split(",").length ? (i = t[1].split(" ")).length % 2 != 0 ? t : (i.forEach(function(e, t, i) {
                    t % 2 == 0 && o.push(e + " " + i[t + 1])
                }), [t[0], o.join(",")]) : t
            })
        },
        stringifyParsedPath: function(e) {
            var t = "";
            return e.forEach(function(e) {
                e.forEach(function(e) {
                    t += e
                })
            }), t
        }
    }
}), define("layout/specificComponents/svgShape/svgBasicScaler", ["layout/specificComponents/svgShape/svgScalerUtils"], function(e) {
    var t = function(t, i) {
            return e.round(parseFloat(t) * i)
        },
        i = function(e, i, o) {
            var n = e.split(/[\s,]+/);
            return t(n[0], i) + " " + t(n[1], o)
        };
    return {
        scaleSingleValue: t,
        scalePairString: i,
        scaleMultiplePairStrings: function(t, o, n) {
            return "" === t ? "" : t.split(",").map(function(t) {
                return i(e.trim(t), o, n)
            }).join(",")
        },
        scaleMultipleSingleStrings: function(i, o) {
            return "" === i ? "" : i.split(/[\s,]+/).map(function(i) {
                return t(e.trim(i), o)
            }).join(",")
        }
    }
}), define("layout/specificComponents/svgShape/svgPathScaler", ["lodash", "layout/specificComponents/svgShape/svgPathParser", "layout/specificComponents/svgShape/svgBasicScaler", "loggingUtils"], function(e, t, i, o) {
    var n = function() {
            return ""
        },
        r = function(e, t, o) {
            return i.scaleSingleValue(e, o / (360 * t))
        },
        a = function(e, t, n) {
            return 7 !== e.length ? (o.log.verbose("incorrect arc string, should have exactly 7 parameters. (value was " + e.join(" ")), e.join(" ")) : (e[0] = i.scaleSingleValue(e[0], t), e[1] = i.scaleSingleValue(e[1], n), e[2] = r(e[2], t, n), e[5] = i.scaleSingleValue(e[5], t), e[6] = i.scaleSingleValue(e[6], n), e.join(" "))
        },
        s = function(t, i, o) {
            var n = t.split(/[\s,]+/),
                r = e.chunk(n, 7),
                s = [];
            return e.forEach(r, function(e) {
                s.push(a(e, i, o))
            }), s.join(" ")
        },
        u = function(i, o, n) {
            var r = t.getParsedPath(i.getAttribute("d"));
            e.forEach(r, function(e) {
                var t = [e[1]],
                    i = e[0].toUpperCase();
                "V" === i ? t.push(n) : "H" === i ? t.push(o) : (t.push(o), t.push(n)), e[1] = c[e[0].toUpperCase()].apply(null, t)
            }), i.setAttribute("d", t.stringifyParsedPath(r))
        },
        c = {
            M: i.scaleMultiplePairStrings,
            L: i.scaleMultiplePairStrings,
            H: i.scaleMultipleSingleStrings,
            V: i.scaleMultipleSingleStrings,
            Z: n,
            C: i.scaleMultiplePairStrings,
            S: i.scaleMultiplePairStrings,
            Q: i.scaleMultiplePairStrings,
            T: i.scaleMultiplePairStrings,
            A: s
        };
    return {
        scale: u
    }
}), define("layout/specificComponents/svgShape/svgPolygonParser", ["layout/specificComponents/svgShape/svgScalerUtils"], function(e) {
    return {
        getParsedPoints: function(t) {
            var i, o = e.trim(t),
                n = o.split(/[\s,]+/),
                r = [];
            if ("" === o) return [];
            for (i = 0; i < n.length; i += 2) r.push([n[i], n[i + 1]]);
            return r
        },
        stringifyPoints: function(t) {
            var i = "";
            return t.forEach(function(e) {
                i += e.join(",") + " "
            }), e.trim(i)
        }
    }
}), define("layout/specificComponents/svgShape/svgPolygonScaler", ["lodash", "layout/specificComponents/svgShape/svgBasicScaler", "layout/specificComponents/svgShape/svgPolygonParser"], function(e, t, i) {
    return {
        scale: function(o, n, r) {
            var a = i.getParsedPoints(o.getAttribute("points"));
            e.forEach(a, function(e) {
                e[0] = t.scaleSingleValue(e[0], n), e[1] = t.scaleSingleValue(e[1], r)
            }), o.setAttribute("points", i.stringifyPoints(a))
        }
    }
}), define("layout/specificComponents/svgShape/svgCircleScaler", ["layout/specificComponents/svgShape/svgBasicScaler"], function(e) {
    return {
        scale: function(t, i, o) {
            var n = t.getAttribute("cx"),
                r = t.getAttribute("cy"),
                a = t.getAttribute("r"),
                s = Math.min(i, o);
            n && r && (t.setAttribute("cx", e.scaleSingleValue(n, s)), t.setAttribute("cy", e.scaleSingleValue(r, s)), t.setAttribute("r", e.scaleSingleValue(a, s)))
        }
    }
}), define("layout/specificComponents/svgShape/svgRectScaler", ["layout/specificComponents/svgShape/svgBasicScaler"], function(e) {
    var t = function(t, i, o, n) {
        o && t.setAttribute(i, e.scaleSingleValue(o, n))
    };
    return {
        scale: function(e, i, o) {
            var n = e.getAttribute("width"),
                r = e.getAttribute("height"),
                a = e.getAttribute("rx"),
                s = e.getAttribute("ry"),
                u = e.getAttribute("x"),
                c = e.getAttribute("y");
            t(e, "width", n, i), t(e, "height", r, o), t(e, "rx", a, i), t(e, "ry", s, o), t(e, "x", u, i), t(e, "y", c, o)
        }
    }
}), define("layout/specificComponents/svgShape/svgEllipseScaler", ["layout/specificComponents/svgShape/svgBasicScaler"], function(e) {
    return {
        scale: function(t, i, o) {
            var n = t.getAttribute("cx"),
                r = t.getAttribute("cy"),
                a = t.getAttribute("rx"),
                s = t.getAttribute("ry");
            n && a && (t.setAttribute("cx", e.scaleSingleValue(n, i)), t.setAttribute("rx", e.scaleSingleValue(a, i))), r && s && (t.setAttribute("cy", e.scaleSingleValue(r, o)), t.setAttribute("ry", e.scaleSingleValue(s, o)))
        }
    }
}), define("layout/specificComponents/svgShape/svgPolylineParser", ["lodash", "layout/specificComponents/svgShape/svgScalerUtils"], function(e, t) {
    return {
        getParsedPoints: function(e) {
            var i, o = t.trim(e),
                n = o.split(/[\s,]+/),
                r = [];
            if ("" === o) return [];
            for (i = 0; i < n.length; i += 2) r.push([n[i], n[i + 1]]);
            return r
        },
        stringifyPoints: function(e) {
            var i = "";
            return e.forEach(function(e) {
                i += e.join(",") + " "
            }), t.trim(i)
        }
    }
}), define("layout/specificComponents/svgShape/svgPolylineScaler", ["lodash", "layout/specificComponents/svgShape/svgBasicScaler", "layout/specificComponents/svgShape/svgPolylineParser"], function(e, t, i) {
    return {
        scale: function(o, n, r) {
            var a = i.getParsedPoints(o.getAttribute("points"));
            a = e.map(a, function(i) {
                return e.map(i, function(e, i) {
                    return t.scaleSingleValue(e, i ? r : n)
                })
            }), o.setAttribute("points", i.stringifyPoints(a))
        }
    }
}), define("layout/specificComponents/svgShape/svgLineScaler", ["layout/specificComponents/svgShape/svgBasicScaler"], function(e) {
    return {
        scale: function(t, i, o) {
            var n = t.getAttribute("x1"),
                r = t.getAttribute("y1"),
                a = t.getAttribute("x2"),
                s = t.getAttribute("y2");
            n && r && a && s && (t.setAttribute("x1", e.scaleSingleValue(n, i)), t.setAttribute("x2", e.scaleSingleValue(a, i)), t.setAttribute("y1", e.scaleSingleValue(r, o)), t.setAttribute("y2", e.scaleSingleValue(s, o)))
        }
    }
}), define("layout/specificComponents/svgShape/svgScaler", ["lodash", "layout/specificComponents/svgShape/svgScalerUtils", "layout/specificComponents/svgShape/svgPathScaler", "layout/specificComponents/svgShape/svgPolygonScaler", "layout/specificComponents/svgShape/svgCircleScaler", "layout/specificComponents/svgShape/svgRectScaler", "layout/specificComponents/svgShape/svgEllipseScaler", "layout/specificComponents/svgShape/svgPolylineScaler", "layout/specificComponents/svgShape/svgLineScaler"], function(e, t, i, o, n, r, a, s, u) {
    var c = function(t) {
            return e.includes(["path", "polygon", "rect", "circle", "ellipse", "polyline", "line"], t.toLowerCase())
        },
        l = function(e, i, o, n) {
            var r, a, s = i.width / i.height,
                u = s > n,
                c = s < n;
            return r = e.width ? o && u ? i.height * n / e.width : i.width / e.width : 1, a = e.height ? o && c ? i.width / n / e.height : i.height / e.height : 1, {
                scaleX: t.round(r),
                scaleY: t.round(a)
            }
        },
        h = function(e, t, i) {
            return Math.abs(e.width - t.width) < i && Math.abs(e.height - t.height) < i
        },
        d = function(e, t, i) {
            e.setAttribute("transform", "translate(" + parseFloat(-1 * i.x + .5 * t) + "," + parseFloat(-1 * i.y + .5 * t) + ")")
        },
        g = function(e) {
            var t = e.getAttribute("data-original-aspect-ratio");
            return t ? Number(t) : null
        },
        p = function(e, t) {
            e.hasAttribute("data-original-aspect-ratio") || (e.setAttribute("data-original-aspect-ratio", t), e.setAttribute("viewBox", ""), e.removeAttribute("viewBox"))
        };
    return {
        scale: function(t, m, f, y, w) {
            var v = t.getElementsByTagName("g")[0],
                C = e.pick(f, ["width", "height"]),
                b = C.width / C.height,
                M = e.pick(f, ["x", "y"]),
                S = {
                    path: i,
                    polygon: o,
                    rect: r,
                    circle: n,
                    ellipse: a,
                    polyline: s,
                    line: u
                };
            if (v) {
                var I = g(t);
                if (I || (I = f.width / f.height, p(t, I)), !h(m, C, 1) || w && b !== I) {
                    var T = l(C, m, w, I);
                    e(v.childNodes).filter(function(e) {
                        return c(e.nodeName)
                    }).forEach(function(e) {
                        var t = e.nodeName.toLowerCase();
                        S[t].scale(e, T.scaleX, T.scaleY)
                    }), d(v, y, {
                        x: M.x * T.scaleX,
                        y: M.y * T.scaleY
                    }), t.style.width = Math.ceil(C.width * T.scaleX + y) + "px", t.style.height = Math.ceil(C.height * T.scaleY + y) + "px"
                }
            }
        }
    }
}), define("layout/specificComponents/shapeLayout", ["lodash", "zepto", "siteUtils", "layout/util/layout", "layout/specificComponents/svgShape/svgScaler"], function(e, t, i, o, n) {
    function r(t, i, o) {
        o.shapesBoundaries = o.shapesBoundaries || {};
        var n;
        o.shapesBoundaries[i] || (n = e.pick(t.getBBox(), ["x", "y", "width", "height"]), e.some(n) && (o.shapesBoundaries[i] = {
            boxBoundaries: n
        }))
    }

    function a(e, t, i) {
        var o = i.width / i.height;
        e.shapesOriginalAspectRatio = e.shapesOriginalAspectRatio || {}, e.shapesOriginalAspectRatio[t] = e.shapesOriginalAspectRatio[t] || o
    }

    function s(e, t, o, n) {
        var r, a = t,
            s = n ? "xMidYMid meet" : "none",
            l = o,
            h = i.svgFeatureDetection.flags().isVectorEffect;
        return t ? h ? r = c(e, t, o, n) : (r = c(e, t, o, n), a = u(e, t, o)) : r = e, {
            viewBox: g(r),
            strokeWidth: a,
            size: l,
            preserveAspectRatio: s
        }
    }

    function u(e, t, i) {
        return t * (1 / Math.min((i.width - t) / e.width, (i.height - t) / e.height))
    }

    function c(e, t, i, o) {
        var n, r, a, s;
        return o ? n = r = Math.min((i.width - t) / e.width, (i.height - t) / e.height) : (n = (i.width - t) / e.width, r = (i.height - t) / e.height), a = i.width / n, s = i.height / r, {
            width: a,
            height: s,
            x: e.x - (a - e.width) / 2,
            y: e.y - (s - e.height) / 2
        }
    }

    function l(e, t) {
        var o = i.svgFeatureDetection.flags().isVectorEffect;
        return e > 0 && !1 === t && !o
    }

    function h(t, i, o, n, s) {
        var u = e.get(s, ["styleItem", "skin"]),
            c = o[t] && o[t].getElementsByTagName("svg")[0];
        if (u && c) {
            o[t + "svg"] = c;
            var h = e.get(s, ["propertiesItem", "maintainAspectRatio"]);
            if (l(parseInt(e.get(s, ["styleItem", "style", "properties", "strokewidth"], 1), 10), h)) {
                i.custom[t] = {};
                var d = o[t + "svg-g"] = c.getElementsByTagName("g")[0];
                i.custom[t].boundingBox = d ? d.getBBox() : {}, a(n, u, i.custom[t].boundingBox)
            } else r(c, u, n)
        }
    }

    function d(i, o, r, a, u) {
        var c = o[i + "svg"],
            h = a.styleItem;
        if (c && h) {
            var d, g = a.propertiesItem,
                p = g && g.maintainAspectRatio,
                m = parseInt(e.get(h, ["style", "properties", "strokewidth"], 1), 10);
            if (l(m, p)) d = {
                width: r.width[i] - m,
                height: r.height[i] - m
            }, n.scale(c, d, r.custom[i].boundingBox, m, p);
            else {
                var f = e.get(u, ["shapesBoundaries", h.skin]);
                if (!f) return;
                d = {
                    width: r.width[i],
                    height: r.height[i]
                };
                var y = s(f.boxBoundaries, m, d, p);
                t(c).css(e.pick(y, ["strokeWidth", "size"])), t(c).attr(e.pick(y, ["preserveAspectRatio", "viewBox"]))
            }
        }
    }
    var g = e.template("${x} ${y} ${width} ${height}");
    return o.registerCustomMeasure("wysiwyg.viewer.components.svgshape.SvgShape", h), o.registerPatcher("wysiwyg.viewer.components.svgshape.SvgShape", d), o.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseIconButton", h), o.registerPatcher("wysiwyg.viewer.components.PopupCloseIconButton", d), {}
}), define("layout/specificComponents/richtextLayout", ["lodash", "layout/util/layout", "experiment"], function(e, t, i) {
    function o(e, t) {
        t.css(e, {
            height: ""
        })
    }
    var n = "wysiwyg.viewer.components.WRichText";
    return t.registerSAFEPatcher(n, o), t.registerCustomMeasure(n, function(t, o, n, r, a) {
        var s = n[t],
            u = e.get(a, "propertiesItem.minHeight"),
            c = e.get(a, "propertiesItem.packed", !1),
            l = s.offsetHeight,
            h = r.isMobileView(),
            d = i.isOpen("sv_unpackTextMeasureByMinHeight"),
            g = d && !h ? Math.max(u || 0, l) : l;
        o.minHeight[t] = g, d && (c = c || !e.isUndefined(u)), c && (o.height[t] = g)
    }), t.registerRequestToMeasureDom(n), {}
}), define("layout/specificComponents/matrixGalleryLayout", ["layout/util/layout", "zepto", "imageClientApi", "lodash", "coreUtils", "layout/specificComponents/imageLayout"], function(e, t, i, o, n, r) {
    function a(e, t, i, o, n) {
        return g.getSizeAfterScaling({
            itemHeight: t,
            itemWidth: i,
            displayerData: e,
            imageMode: o.imageMode,
            heightDiff: parseInt(n.data("height-diff"), 10) || 0,
            widthDiff: parseInt(n.data("width-diff"), 10) || 0,
            bottomGap: parseInt(n.data("bottom-gap"), 10) || 0
        })
    }

    function s(e, n, r, s, u, c, l) {
        var g = t(c),
            p = g.data("image-index"),
            m = o.defaults({
                displayMode: i.fittingTypes.SCALE_TO_FILL
            }, u[p]),
            f = a(m, r, n, s, g),
            y = d.getContainerSize(f.imageWrapperSize, g),
            w = h.getItemPosition(l, n, r, s.margin, s.numCols);
        return {
            id: c.id,
            imageData: m,
            imageNodeId: c.id + "image",
            imageWrapperId: c.id + "imageWrapper",
            containerSize: y,
            sizeAfterScaling: f,
            position: w
        }
    }

    function u(e, i, n, r, a) {
        d.measureFlexibleHeightGallery(e, i, n);
        var u = t(n[e]),
            c = n[e + "itemsContainer"],
            l = t(c).children(),
            g = a.dataItem.items;
        i.width[e] = Math.max(m, i.width[e]), i.height[e] = Math.max(p, i.height[e]);
        var f = parseInt(u.data("height-diff"), 10) || 0,
            y = parseInt(u.data("width-diff"), 10) || 0,
            w = parseInt(u.data("presented-row"), 10) || 0,
            v = a.propertiesItem,
            C = h.getItemWidth(v.margin, v.numCols, i.width[e], y),
            b = h.getItemHeight(v.margin, i.height[e], w, f);
        i.custom[e] = {
            displayers: o.map(l, o.partial(s, e, C, b, a.propertiesItem, g))
        }
    }

    function c(e, t, i, n, a) {
        var s = i.height[e],
            u = i.width[e],
            c = i.custom[e];
        t.css(e + "itemsContainer", {
            height: s,
            width: u
        }), t.css(e, {
            height: s,
            width: u
        }), o.forEach(c.displayers, function(e) {
            var o = e.sizeAfterScaling;
            t.css(e.id, {
                height: o.displayerSize.height,
                width: o.displayerSize.width,
                left: e.position.left,
                top: e.position.top
            }), d.updateImageWrapperSizes(t, e.imageWrapperId, o), r.patchNodeImage(e.imageNodeId, t, i, a, e.imageData, e.containerSize)
        })
    }

    function l(e, t, i, n) {
        var r = [
            ["itemsContainer"]
        ];
        return o.forEach(n.dataItem.items, function(e) {
            var t = {
                    pathArray: [e.id, "image"],
                    type: "core.components.Image"
                },
                i = [e.id, "imageWrapper"],
                o = [e.id];
            r.push(t, i, o)
        }), r
    }
    var h = n.matrix.calculations,
        d = n.galleriesCommonLayout,
        g = n.matrix.scalingCalculations,
        p = 70,
        m = 45;
    return e.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"), e.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery", u), e.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery", l), e.registerSAFEPatcher("wysiwyg.viewer.components.MatrixGallery", c), {}
}), define("layout/specificComponents/slideShowLayout", ["layout/util/layout", "zepto", "coreUtils", "imageClientApi", "lodash", "layout/specificComponents/imageLayout"], function(e, t, i, o, n, r) {
    function a(e, i, o, n, r) {
        var a = t(r);
        return h.getSizeAfterScaling({
            itemHeight: i,
            itemWidth: o,
            displayerData: e,
            imageMode: n.imageMode,
            heightDiff: parseInt(a.data("height-diff"), 10) || 0,
            widthDiff: parseInt(a.data("width-diff"), 10) || 0,
            bottomGap: parseInt(a.data("bottom-gap"), 10) || 0
        })
    }

    function s(e, i, r, s, u, c) {
        var l = t(c),
            h = l.data("image-index"),
            g = n.defaults({
                displayMode: o.fittingTypes.SCALE_TO_FILL
            }, u[h]),
            p = a(g, i, r, s, l),
            m = d.getContainerSize(p.imageWrapperSize, l);
        return {
            id: c.id,
            imageData: g,
            imageNodeId: c.id + "image",
            imageWrapperId: c.id + "imageWrapper",
            containerSize: m,
            sizeAfterScaling: p
        }
    }

    function u(e, i, o, r, a) {
        d.measureFlexibleHeightGallery(e, i, o);
        var u = o[e + "itemsContainer"],
            c = t(u).children(),
            l = t(o[e]),
            h = i.height[e] - parseInt(l.data("height-diff"), 10) || 0,
            g = i.width[e] - parseInt(l.data("height-diff"), 10) || 0,
            p = a.dataItem.items;
        i.custom[e] = {
            displayers: n.map(c, n.partial(s, e, h, g, a.propertiesItem, p))
        }
    }

    function c(e, t, i, o, a) {
        var s = o.propertiesItem,
            u = i.height[e],
            c = i.width[e],
            l = a.isMobileDevice() || a.isMobileView(),
            h = i.custom[e].displayers;
        if (!n.isEmpty(h)) {
            if ("flexibleHeight" === s.imageMode) {
                var g = n.last(h);
                u = g.sizeAfterScaling.displayerSize.height
            }
            t.css(e, {
                height: u,
                width: c
            }), n.forEach(h, function(e) {
                t.css(e.id, {
                    height: u,
                    width: c
                }), d.updateImageWrapperSizes(t, e.imageWrapperId, e.sizeAfterScaling), r.patchNodeImage(e.imageNodeId, t, i, a, e.imageData, e.containerSize, l)
            })
        }
    }

    function l(e, t, i, o) {
        var r = [
            ["itemsContainer"]
        ];
        return n.forEach(o.dataItem.items, function(e) {
            var t = {
                    pathArray: [e.id, "image"],
                    type: "core.components.Image"
                },
                i = [e.id, "imageWrapper"],
                o = [e.id];
            r.push(t, i, o)
        }), r
    }
    var h = i.matrix.scalingCalculations,
        d = i.galleriesCommonLayout;
    return e.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"), e.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery", u), e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery", l), e.registerSAFEPatcher("wysiwyg.viewer.components.SlideShowGallery", c), {}
}), define("layout/specificComponents/anchorLayout", ["layout/util/layout"], function(e) {
    function t(e, t) {
        t.css(e, {
            width: "0px"
        })
    }
    e.registerSAFEPatcher("wysiwyg.common.components.anchor.viewer.Anchor", t)
}), define("layout/specificComponents/tinyMenuLayout", ["zepto", "layout/util/layout", "coreUtils", "layout/util/rootLayoutUtils", "lodash"], function(e, t, i, o, n) {
    function r(e, t, i, r, a) {
        var c, p, m = o.getRootWidth(a, i, r.rootId),
            f = m - 2 * d,
            y = r.layout.fixedPosition,
            w = +n.get(i, ["top", "WIX_ADS"], 0) + n.get(i, ["height", "WIX_ADS"], 0);
        if (y ? (p = "calc(50% + " + (r.layout.x - m / 2) + "px)", c = -r.layout.x + d) : (p = r.layout.x + "px", c = -i.custom[e].menuContainerLeft), t.css(e, {
                left: p
            }), y && t.css(e + u, {
                marginTop: w + "px"
            }), n.get(r, ["styleItem", "skin"], g) !== g) {
            var v = i.height[e + l] - i.top[e + s];
            return t.css(e + s, {
                marginTop: w + "px",
                maxHeight: v + "px"
            }), void t.css(e + h, {
                height: i.height.screen + 1 + "px"
            })
        }
        var C = e + s;
        t.css(C, {
            maxHeight: (y ? i.clientHeight - w : i.height.masterPage) - n.get(i, ["custom", e, "menuContainerTop"], 0)
        }), t.css(e + s, {
            width: f + "px",
            left: c + "px"
        })
    }

    function a(t, o, n) {
        var r = e("#SITE_ROOT")[0],
            a = i.domMeasurements.getElementRect(n[t], r);
        if (o.custom[t] = {
                menuContainerTop: a.bottom,
                menuContainerLeft: a.left - d
            }, o.top[t + s] = i.domMeasurements.getBoundingRect(n[t + s]).top, n[t + l] && (o.height[t + l] = i.domMeasurements.getElementRect(n[t + l]).height), o.height[t] = o.height[t + u], /_open\b/.test(n[t + u].className)) {
            var h = i.domMeasurements.getElementRect(n[t + c], r);
            o.minHeight.masterPage = Math.max(o.minHeight.masterPage || 0, h.bottom)
        }
    }
    var s = "menuContainer",
        u = "menuButton",
        c = "menuItems",
        l = "menuBackground",
        h = "fullScreenOverlay",
        d = 20,
        g = "wysiwyg.viewer.skins.mobile.TinyMenuSkin";
    t.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu", [
        [s],
        [u],
        [c],
        [h],
        [l]
    ]), t.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu", a), t.registerSAFEPatcher("wysiwyg.viewer.components.mobile.TinyMenu", r)
}), define("layout/specificComponents/imageZoomLayout", ["lodash", "zepto", "layout/util/layout", "layout/specificComponents/imageLayout", "coreUtils", "imageClientApi"], function(e, t, i, o, n, r) {
    function a(e) {
        return e.dataItem || e.structure.compData
    }

    function s(e, t) {
        return e.getNonPageItemZoomData() || e.getDataByQuery(t)
    }

    function u(e) {
        var t = e.getNonPageItemZoomData();
        return e.getExistingRootNavigationInfo(e.getFocusedRootId()).pageItemId || t && t.id
    }

    function c(t, i, n, a, c) {
        var l = u(c),
            h = !c.isMobileView() && c.isMobileDevice() || c.isTabletDevice(),
            d = s(c, l),
            g = e.defaults({
                displayMode: r.fittingTypes.LEGACY_FULL
            }, d);
        g.quality = e.defaults({
            quality: 90
        }, g.quality || {});
        var p = n.custom[t],
            m = {
                width: p.imageContainerWidth,
                height: p.imageContainerHeight
            };
        if (o.patchNodeImage(t + l + "image", i, n, c, g, m), n.custom[t].hasPanel) {
            var f = h ? p.dialogBoxWidth : m.width;
            i.css(t + d.id + "panel", {
                width: f
            })
        }
    }

    function l(e, t, i, o, n) {
        var r = i.custom[e];
        t.css(e + "dialogBox", {
            width: r.imageContainerWidth,
            minHeight: r.dialogBoxHeight,
            paddingTop: r.paddingTop
        }), c(e, t, i, o, n);
        var a = u(n);
        if (r.showDescription && r.descriptionHeight > r.descriptionHeightLimit) {
            var s = e + a + "description";
            t.css(s, {
                height: r.descriptionHeightLimit
            }), t.data(s, {
                expandable: "true"
            }), t.css(s, {
                height: r.descriptionHeightLimit
            }), t.css(e + a + "ellipsis", {
                display: ""
            })
        }
    }

    function h(e, i, o, n) {
        var r = u(n),
            a = s(n, r),
            c = !n.isMobileView() && n.isMobileDevice() || n.isTabletDevice() ? f.getNonOptimizedViewDimensions : f.getDesktopViewDimensions,
            l = t(o[e]),
            h = d(t(o[e + "dialogBox"])),
            g = e + r + "panel",
            p = {
                width: parseInt(l.data("width-spacer"), 10),
                height: parseInt(l.data("height-spacer"), 10)
            },
            m = {
                isMobileDevice: n.isMobileDevice(),
                isTabletDevice: n.isTabletDevice(),
                siteWidth: n.getSiteWidth()
            },
            y = {
                width: i.width.screen,
                height: i.height.screen,
                innerHeight: i.innerHeight.screen
            };
        i.custom[e] = c(a, m, y, p, i.height[g], h), i.custom[e].hasPanel = Boolean(o[g])
    }

    function d(e) {
        var t = g(e, "padding-bottom") + g(e, "padding-top");
        return {
            horizontal: g(e, "padding-right") + g(e, "padding-left"),
            vertical: t
        }
    }

    function g(e, t) {
        return e && t ? parseInt(e.css(t), 10) || 0 : 0
    }

    function p(e, i) {
        var o = t(i);
        if ("none" !== o.css("display")) {
            var n = parseInt(o.css("line-height"), 10);
            e.showDescription = !0, e.descriptionHeight = o.height(), e.descriptionHeightLimit = Math.floor(3 * n)
        }
    }

    function m(e, t, i, o, n) {
        var r = u(o),
            a = s(o, r),
            c = f.getMobileViewDimensions(a, o, t);
        p(c, i[e + r + "description"]), c.isMobileZoom = n, t.custom[e] = c
    }
    var f = n.mediaZoomCalculations;
    i.registerCustomMeasure("wysiwyg.components.imageZoom", function(e, t, i, o, n) {
        var r = a(n).id;
        (o.isMobileView() ? m : h)(e + r, t, i, o)
    }), i.registerSAFEPatcher("wysiwyg.components.imageZoom", function(e, t, i, o, n) {
        var r = a(o).id;
        (n.isMobileView() ? l : c)(e + r, t, i, o, n)
    }), i.registerRequestToMeasureChildren("wysiwyg.components.imageZoom", function(e, t, i, o) {
        var n = a(o).id,
            r = u(e),
            s = {
                pathArray: [n, r, "image"],
                type: "core.components.Image"
            };
        return e.isMobileView() ? [
            [n], s, [n, "dialogBox"],
            [n, r, "description"],
            [n, r, "ellipsis"]
        ] : [
            [n], s, [n, "dialogBox"],
            [n, "buttonPrev"],
            [n, "buttonNext"],
            [n, r, "panel"]
        ]
    })
}), define("layout/specificComponents/tpaGalleryLayout", ["zepto", "lodash", "layout/util/layout", "layout/util/calculateScreenWidthDimensions"], function(e, t, i, o) {
    function n(e) {
        return function(t, i, o, n, r) {
            e.forEach(function(e) {
                e(t, i, o, n, r)
            })
        }
    }

    function r(e, t) {
        t.width[e] = Math.max(10, t.width[e]), t.minHeight[e] = 10
    }

    function a(e, t, i) {
        t.css(e + "iframe", {
            width: i.width[e],
            height: i.height[e]
        })
    }

    function s(e, t, i, n, r) {
        var a = o(i, n, r.rootId);
        t.css(e, {
            width: a.width + "px",
            left: a.left + "px"
        }), t.attr(e + "iframe", {
            style: {
                width: a.width + "px"
            }
        }), i.width[e] = a.width, i.left[e] = a.left
    }

    function u(e, t) {
        t.height[e] = .33 * t.width[e]
    }

    function c(e, t, i, n, r) {
        if (r.propertiesItem.fitToScreenWidth) {
            var a = i[e],
                s = o(t, n, r.rootId);
            a.style.width = s.width + "px", a.style.left = s.left + "px", t.width[e] = s.width, t.left[e] = s.left
        }
    }

    function l(e, t, i, o, n) {
        "vertical" === n.propertiesItem.orientation && h(e, t, i)
    }

    function h(i, o, n) {
        o.height[i] = t.head(e(n[i]).find("iframe")).offsetHeight
    }

    function d(e, t, i, o, n) {
        s(e, t, i, n, o)
    }
    i.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.Collage", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.Honeycomb", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.Accordion", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.Masonry", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.Impress", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.Freestyle", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("tpa.viewer.components.Thumbnails", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DGallery", [
        ["iframe"]
    ]), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DCarousel", [
        ["iframe"]
    ]), i.registerSAFEPatcher("tpa.viewer.components.StripShowcase", d), i.registerSAFEPatcher("tpa.viewer.components.StripSlideshow", d), i.registerSAFEPatcher("tpa.viewer.components.Collage", a), i.registerSAFEPatcher("tpa.viewer.components.Accordion", a), i.registerSAFEPatcher("tpa.viewer.components.Impress", a), i.registerSAFEPatcher("tpa.viewer.components.Freestyle", a), i.registerSAFEPatcher("tpa.viewer.components.Thumbnails", a), i.registerSAFEPatcher("tpa.viewer.components.Honeycomb", a), i.registerSAFEPatcher("tpa.viewer.components.Masonry", a), i.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DGallery", a), i.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DCarousel", a), i.registerCustomMeasure("tpa.viewer.components.Collage", n([h, c, r])), i.registerCustomMeasure("tpa.viewer.components.Masonry", n([h, r])), i.registerCustomMeasure("tpa.viewer.components.Honeycomb", r), i.registerCustomMeasure("tpa.viewer.components.Accordion", r), i.registerCustomMeasure("tpa.viewer.components.Impress", r), i.registerCustomMeasure("tpa.viewer.components.Freestyle", n([l, r])), i.registerCustomMeasure("tpa.viewer.components.StripShowcase", r), i.registerCustomMeasure("tpa.viewer.components.StripSlideshow", r), i.registerCustomMeasure("tpa.viewer.components.Thumbnails", r), i.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DGallery", r), i.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DCarousel", n([r, u]))
}), define("layout/specificComponents/youTubeSubscribeButtonLayout", ["layout/util/layout"], function(e) {
    function t(e, t, o, n, r) {
        var a = r.propertiesItem.layout,
            s = i[a + (n.browser.ie ? "IE" : "")];
        t.width[e] = s.width, t.height[e] = s.height
    }
    var i = {
        default: {
            width: 145,
            height: 33
        },
        defaultIE: {
            width: 145,
            height: 33
        },
        full: {
            width: 212,
            height: 55
        },
        fullIE: {
            width: 212,
            height: 67
        }
    };
    return e.registerRequestToMeasureDom("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"), e.registerCustomMeasure("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton", t), {}
}), define("layout/specificComponents/wFacebookCommentLayout", ["layout/util/layout", "zepto"], function(e, t) {
    function i(e, i, o) {
        var n = t(o[e]).find("iframe")[0];
        n && (i.height[e] = Math.max(i.height[e], n.offsetHeight))
    }
    e.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment", i)
}), define("layout/specificComponents/facebookLikeLayout", ["layout/util/layout"], function(e) {
    function t(e) {
        var t = e ? e.layout : n.layout;
        t = e && e.show_faces ? t + "_showFaces" : t;
        var i = e ? e.action : n.action;
        return r[t][i]
    }

    function i(e, i, o, n, r) {
        var a = t(r.propertiesItem);
        i.width[e] = a.w, i.height[e] = a.h
    }

    function o(e, t, i) {
        var o = i.width[e],
            n = i.height[e];
        t.css(e + "iframe", {
            width: o,
            height: n
        })
    }
    var n = {
            layout: "box_count",
            show_faces: "box_count",
            action: "like"
        },
        r = {
            standard: {
                like: {
                    w: 250,
                    h: 40
                },
                recommend: {
                    w: 290,
                    h: 40
                }
            },
            standard_showFaces: {
                like: {
                    w: 250,
                    h: 85
                },
                recommend: {
                    w: 290,
                    h: 85
                }
            },
            button_count: {
                like: {
                    w: 170,
                    h: 20
                },
                recommend: {
                    w: 137,
                    h: 20
                }
            },
            box_count: {
                like: {
                    w: 106,
                    h: 65
                },
                recommend: {
                    w: 125,
                    h: 65
                }
            },
            box_count_showFaces: {
                like: {
                    w: 85,
                    h: 65
                },
                recommend: {
                    w: 125,
                    h: 65
                }
            },
            button_count_showFaces: {
                like: {
                    w: 137,
                    h: 20
                },
                recommend: {
                    w: 137,
                    h: 20
                }
            }
        };
    return e.registerRequestToMeasureChildren("wysiwyg.viewer.components.WFacebookLike", [
        ["iframe"]
    ]), e.registerCustomMeasure("wysiwyg.viewer.components.WFacebookLike", i), e.registerSAFEPatcher("wysiwyg.viewer.components.WFacebookLike", o), {}
}), define("layout/specificComponents/formMixinLayout", ["layout/util/layout"], function(e) {
    function t(e, t) {
        var i = t.height[e + "wrapper"];
        i && (t.height[e] = i)
    }

    function i(e, i, o) {
        t(e, i, o);
        i.width[e] = Math.max(i.width[e], 180), i.minWidth[e] = 180, i.minHeight[e] = 180
    }

    function o(e, t) {
        var i = t.height[e + "wrapper"];
        i && (t.height[e] = i)
    }["wysiwyg.viewer.components.ContactForm", "wysiwyg.viewer.components.DynamicContactForm"].forEach(function(t) {
        e.registerCustomMeasure(t, i), e.registerRequestToMeasureChildren(t, [
            ["wrapper"]
        ])
    }), e.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm"), e.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm", [
        ["wrapper"]
    ]), e.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm", o)
}), define("layout/specificComponents/backOfficeTextLayout", ["layout/util/layout"], function(e) {
    function t(e, t, i) {
        var o = i[e].childNodes[0];
        o && (t.height[e] = Math.max(t.height[e], o.offsetHeight))
    }
    e.registerCustomMeasure("wysiwyg.common.components.backofficetext.viewer.BackOfficeText", t)
}), define("layout/specificComponents/vkShareLayout", ["layout/util/layout"], function(e) {
    function t(e, t, i) {
        var o = i[e];
        o && (t.height[e] = o.offsetHeight, t.width[e] = o.offsetWidth)
    }
    e.registerCustomMeasure("wysiwyg.viewer.components.VKShareButton", t), e.registerRequestToMeasureDom("wysiwyg.viewer.components.VKShareButton")
}), define("layout/specificComponents/adminLoginLayout", ["zepto", "layout/util/layout"], function(e, t) {
    function i(t, i, n) {
        var r = e(n[t + "label"]);
        i.width[t] = Math.max(r.offset().width, i.width[t]), i.height[t] = Math.max(o, i.height[t]), i.minWidth[t] = r.offset().width
    }
    var o = 17;
    t.registerCustomMeasure("wysiwyg.viewer.components.AdminLoginButton", i), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.AdminLoginButton", [
        ["label"]
    ])
}), define("layout/specificComponents/homePageLoginLayout", ["zepto", "layout/util/layout"], function(e, t) {
    function i(t, i, o) {
        var n = e(o[t + "memberTitle"]),
            r = e(o[t + "actionTitle"]);
        i.width[t] = Math.max(n.offset().width, r.offset().width, i.width[t]), i.height[t] = Math.max(n.offset().height + r.offset().height, i.height[t])
    }
    t.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.HomePageLogin", i), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.HomePageLogin", [
        ["memberTitle"],
        ["actionTitle"]
    ])
}), define("layout/specificComponents/iTunesButtonLayout", ["layout/util/layout"], function(e) {
    function t(e, t) {
        t.minWidth[e] = 110, t.width[e] = Math.min(400, t.width[e]), t.height[e] = 40 * t.width[e] / 110
    }
    e.registerCustomMeasure("wysiwyg.viewer.components.ItunesButton", t)
}), define("layout/specificComponents/paypalLayout", ["layout/util/layout"], function(e) {
    return e.registerCustomMeasure("wysiwyg.viewer.components.PayPalButton", function(e, t, i) {
        t.height[e] = i[e + "submitImage"].offsetHeight, t.width[e] = i[e + "submitImage"].offsetWidth
    }), e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PayPalButton", [
        ["submitImage"]
    ]), {}
}), define("layout/specificComponents/wixSiteLayout", ["zepto", "layout/util/layout"], function(e, t) {
    function i() {
        var t = e("<div>").css({
                visibility: "hidden",
                width: 100,
                overflow: "scroll"
            }).appendTo("body"),
            i = e("<div>").css({
                width: "100%"
            }).appendTo(t).width();
        return t.remove(), 100 - i
    }

    function o(e) {
        return "WixSite" === e.rendererModel.siteInfo.documentType
    }

    function n(e) {
        return e.isTabletDevice() && o(e)
    }

    function r(e, t) {
        e.css("body", {
            width: t.width.body
        })
    }

    function a(e, t) {
        c = c || i();
        var o = window.document.body.clientWidth,
            n = window.innerWidth,
            r = o;
        n > o + c && (r = n), e.body = window.document.body, t.width.body = r
    }

    function s(e, t, i, o, a) {
        n(a) && r(t, i)
    }

    function u(e, t, i, o) {
        n(o) && a(i, t)
    }
    var c;
    t.registerCustomMeasure("document", u), t.registerSAFEPatcher("document", s)
}), define("layout/specificComponents/buttonLayout", ["zepto", "lodash", "layout/util/layout"], function(e, t, i) {
    function o(e) {
        return parseInt(e.paddingTop, 10) + parseInt(e.paddingBottom, 10)
    }

    function n(e) {
        return parseInt(e.marginRight, 10) + parseInt(e.marginLeft, 10)
    }

    function r(t, i, r) {
        var a = t + "label",
            s = e(r[t]),
            u = s.text(),
            c = s.data("should-use-flex"),
            l = window.getComputedStyle(r[t]),
            h = window.getComputedStyle(r[a]),
            d = l.minHeight;
        d && parseInt(d, 10) || (d = i.height[a]), i.minHeight[t] = parseInt(d, 10), i.minWidth[t] = c ? i.width[a] : i.width[a] + n(h);
        var g = s.data("shouldPreventWidthMeasurement");
        g || (i.width[t] = function() {
            return u !== "" + s.data("prevText")
        }() && function() {
            return i.minWidth[t] < s.data("prevMinWidth")
        }() && function() {
            return s.data("prevWidth") === s.data("prevMinWidth")
        }() && i.width[a] > 0 ? i.minWidth[t] : Math.max(i.width[t], i.minWidth[t])), i.height[t] = Math.max(i.height[t], i.minHeight[t]), i.custom[t] = {
            align: s.attr("data-align"),
            margin: parseInt(s.attr("data-margin"), 10),
            shouldPreventWidthMeasurement: g,
            shouldUseFlex: c,
            text: u
        }, i.custom[a] = {
            verticalPadding: o(h)
        };
        var p = i.width[a] + i.custom[t].margin > i.width[t],
            m = i.custom[t].align;
        "center" !== m && (c ? i.custom[a].margin = p ? i.width[t] - i.width[a] : i.custom[t].margin : i.custom[a]["margin-" + m] = p ? i.width[t] - i.width[a] : i.custom[t].margin)
    }

    function a(e, i, o) {
        var n;
        if (o.custom[e].shouldUseFlex) {
            n = {};
            var r = o.custom[e].align;
            return "center" !== r && o.custom[i].margin && (n["margin-" + r] = o.custom[i].margin), n
        }
        return n = {
            "line-height": o.height[e] - o.custom[i].verticalPadding + "px"
        }, t.reduce(["margin-left", "margin-right"], function(e, n) {
            return t.isUndefined(o.custom[i][n]) || (e[n] = o.custom[i][n]), e
        }, n)
    }

    function s(e, t, i) {
        var o = {
            height: i.height[e],
            "min-height": i.minHeight[e]
        };
        i.custom[e].shouldPreventWidthMeasurement || (o.width = i.width[e]), t.css(e, o);
        var n = e + "label",
            r = a(e, n, i);
        t.css(n, r), t.data(e, {
            prevText: i.custom[e].text,
            prevMinWidth: i.minWidth[e],
            prevWidth: i.width[e]
        })
    }
    i.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton", [
        ["label"]
    ]), i.registerCustomMeasure("wysiwyg.viewer.components.SiteButton", r), i.registerSAFEPatcher("wysiwyg.viewer.components.SiteButton", s), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupCloseTextButton", [
        ["label"]
    ]), i.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseTextButton", r), i.registerSAFEPatcher("wysiwyg.viewer.components.PopupCloseTextButton", s)
}), define("layout/wixappsLayout/proxyLayout/util/masonryCalculations", ["lodash"], function(e) {
    return {
        getColumnSidePadding: function(e, t, i, o) {
            var n = "rtl" === o,
                r = Math.floor(i / t),
                a = e * r,
                s = (t - 1 - e) * r;
            return {
                right: n ? a : s,
                left: n ? s : a
            }
        },
        getMasonryRowsAndColumns: function(t, i) {
            for (var o = [], n = [], r = [], a = 0; a < i; a++) n.push(0), r.push(0);
            for (var s = 0; s < t.length; s++) {
                var u = e.indexOf(n, e.min(n));
                o.push({
                    col: u,
                    row: r[u],
                    topOffset: n[u]
                }), n[u] += t[s], r[u]++
            }
            return o
        }
    }
}), define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout", ["zepto", "lodash", "layout/wixappsLayout/proxyLayoutRegistrar", "layout/wixappsLayout/proxyLayout/util/masonryCalculations"], function(e, t, i, o) {
    function n(t) {
        return {
            columns: parseInt(e(t).attr("data-columns"), 10),
            direction: e(t).attr("data-direction"),
            horizontalGap: parseInt(e(t).attr("data-horizontal-gap"), 10),
            verticalGap: parseInt(e(t).attr("data-vertical-gap"), 10)
        }
    }

    function r(e) {
        return t.map(e.childNodes, "clientHeight")
    }

    function a(e) {
        var i = r(e),
            a = n(e),
            s = e.childNodes,
            u = o.getMasonryRowsAndColumns(i, a.columns),
            c = Math.floor(e.clientWidth / a.columns),
            l = {
                domManipulations: [],
                needsRelayout: !0
            },
            h = l.domManipulations,
            d = [];
        t.forEach(s, function(e, t) {
            var i = u[t],
                n = i.row * a.verticalGap + i.topOffset,
                r = o.getColumnSidePadding(i.col, a.columns, a.horizontalGap, a.direction),
                s = i.col * c;
            d.push(n);
            var l = {
                position: "absolute",
                top: n + "px",
                "padding-right": r.right + "px",
                "padding-left": r.left + "px"
            };
            "rtl" === a.direction ? l.right = s + "px" : l.left = s + "px", h[t] = {
                node: e,
                funcName: "css",
                params: l
            }
        });
        var g = t(s).map(function(e, t) {
            return d[t] + i[t]
        }).max();
        return h.push({
            node: e,
            funcName: "css",
            params: {
                height: g + "px"
            }
        }), l
    }
    i.registerCustomMeasure("PaginatedColumnGalleryProxy", a)
}), define("layout/wixappsLayout/proxyLayout/galleryProxyLayout", ["zepto", "lodash", "layout/wixappsLayout/proxyLayoutRegistrar"], function(e, t, i) {
    function o(e, t, i) {
        var o = i + "itemsContainer";
        t.height[o] = e.offsetHeight, t.width[o] = e.offsetWidth, t.height[i] = e.offsetHeight, t.width[i] = e.offsetWidth
    }

    function n(i, n, r) {
        var a = i.id + "itemsContainer",
            s = e("#" + a),
            u = e(i),
            c = Number(u.attr("data-total-columns")),
            l = Number(u.attr("data-total-rows")),
            h = Number(u.attr("data-gap")),
            d = u.data("autoscale"),
            g = Number(u.data("width")),
            p = Number(u.data("height")),
            m = [],
            f = s.children();
        if (f.length) {
            var y = f[0],
                w = y.offsetWidth,
                v = y.offsetHeight;
            m = t.map(f, function(t) {
                var i = parseInt(e(t).attr("data-index"), 10),
                    o = Math.floor(i / c) % l,
                    n = i % c;
                return {
                    node: t,
                    funcName: "css",
                    params: {
                        top: o * v + o * h,
                        left: n * w + n * h
                    }
                }
            })
        }
        var C = !1;
        if (d) {
            var b = i.parentNode;
            (C = p !== b.offsetHeight || g !== b.offsetWidth) && m.push({
                node: i,
                funcName: "data",
                params: ["width", b.offsetWidth]
            }, {
                node: i,
                funcName: "data",
                params: ["height", b.offsetHeight]
            }), o(b, r, i.id)
        } else o(i, r, i.id);
        return {
            domManipulations: m,
            shouldRenderAgain: C
        }
    }
    i.registerCustomMeasure("GalleryProxy", n)
}), define("layout/wixappsLayout/proxyLayout/imageProxyLayout", ["zepto", "lodash", "layout/wixappsLayout/proxyLayoutRegistrar"], function(e, t, i) {
    function o(t, i, o) {
        var n = e(t),
            r = t.firstChild.id,
            a = {
                width: parseInt(n.attr("data-width"), 10),
                height: parseInt(n.attr("data-height"), 10),
                uri: n.attr("data-uri"),
                quality: i.getGlobalImageQuality()
            },
            s = {
                displayMode: n.attr("data-display-mode")
            };
        return o.width[r] = t.offsetWidth, o.height[r] = t.offsetHeight, o.custom[r] = {
            thisIsMyHeight: o.height[r]
        }, {
            comp: {
                compType: "wysiwyg.viewer.components.WPhoto",
                compId: r,
                structureInfo: {
                    dataItem: a,
                    propertiesItem: s,
                    layout: null,
                    styleItem: null
                }
            },
            domManipulations: []
        }
    }
    i.registerCustomMeasure("Image", o)
}), define("layout/wixappsLayout/proxyLayout/buttonProxyLayout", ["layout/wixappsLayout/proxyLayoutRegistrar"], function(e) {
    function t(e, t, i) {
        var o = e.id;
        return i.width[o] = e.offsetWidth, i.height[o] = e.offsetHeight, {
            comp: {
                compType: "wysiwyg.viewer.components.SiteButton",
                compId: o,
                structureInfo: {
                    dataItem: null,
                    propertiesItem: null,
                    layout: null,
                    styleItem: null
                }
            },
            domManipulations: []
        }
    }
    e.registerCustomMeasure("Button", t), e.registerCustomMeasure("Button2", t)
}), define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout", ["layout/wixappsLayout/proxyLayoutRegistrar"], function(e) {
    e.registerCustomMeasure("MediaLabel", function(e, t, i) {
        var o = e.id;
        return i.width[o] = e.offsetWidth, i.height[o] = e.offsetHeight, {
            comp: {
                compType: "wysiwyg.viewer.components.MediaRichText",
                compId: o,
                structureInfo: {
                    dataItem: null,
                    propertiesItem: null,
                    layout: null,
                    styleItem: null
                }
            },
            domManipulations: []
        }
    })
}), define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout", ["zepto", "layout/wixappsLayout/proxyLayoutRegistrar"], function(e, t) {
    function i(t, i, o) {
        var n = e(t),
            r = t.firstChild.id,
            a = {
                aspectRatio: n.attr("data-aspect-ratio"),
                imageMode: n.attr("data-image-mode")
            };
        return o.width[r] = t.offsetWidth, o.height[r] = t.offsetHeight, {
            comp: {
                compType: "wysiwyg.viewer.components.SliderGallery",
                compId: r,
                structureInfo: {
                    dataItem: null,
                    propertiesItem: a,
                    layout: null,
                    styleItem: null
                }
            },
            domManipulations: []
        }
    }
    t.registerCustomMeasure("SliderGallery", i)
}), define("layout/specificComponents/imageButtonLayout", ["lodash", "layout/util/layout", "layout/specificComponents/imageLayout", "imageClientApi"], function(e, t, i, o) {
    function n(e, t) {
        return {
            width: t.width[e],
            height: t.height[e]
        }
    }

    function r(t, n, r, a, s, u, c) {
        var l = s.dataItem[t];
        if (l) {
            var h = n + t,
                d = e.defaults({
                    displayMode: o.fittingTypes.LEGACY_FULL
                }, l);
            i.patchNodeImage(h, r, a, u, d, c)
        }
    }

    function a(t, i, o, a, u) {
        var c = n(t, o);
        e.forEach(s, function(e) {
            r(e, t, i, o, a, u, c)
        });
        var l = t + "link";
        i.css(l, {
            width: c.width,
            height: c.height
        })
    }
    var s = ["defaultImage", "hoverImage", "activeImage"];
    t.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton"), t.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton", function() {
        var t = e.map(s, function(e) {
            return {
                pathArray: [e],
                type: "core.components.Image"
            }
        });
        return t.push(["link"]), t
    }()), t.registerSAFEPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton", a)
}), define("layout/specificComponents/mediaRichTextLayout", ["layout/util/layout", "zepto", "lodash"], function(e, t, i) {
    function o() {
        var e = i.toArray(arguments);
        return window.document.getElementById(e.join(""))
    }
    e.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText"), e.registerCustomMeasure("wysiwyg.viewer.components.MediaRichText", function(n, r, a, s) {
        function u(t) {
            e.measureMediaRichTextInnerComponent(t, o, r, a, s, t.structure)
        }
        var c = t(a[n]);
        r.custom[n] = {
            prevWidth: c.data("width")
        };
        var l = s.getMediaRichTextInnerComponents(n),
            h = i.mapValues(l, "structureInfo");
        i.forEach(h, u)
    }), e.registerSAFEPatcher("wysiwyg.viewer.components.MediaRichText", function(t, o, n, r, a) {
        function s(t) {
            e.patchWithoutPositioning(t, o, n, a)
        }
        var u = n.custom[t].prevWidth,
            c = parseInt(n.width[t], 10),
            l = a.getMediaRichTextInnerComponents(t),
            h = i.mapValues(l, "structureInfo");
        return i.forEach(h, s), u && parseInt(u, 10) === c ? (o.css(t, {
            height: ""
        }), !1) : (o.data(t, {
            width: c
        }), !0)
    })
}), define("layout/specificComponents/backToTopButtonLayout", ["layout/util/layout"], function(e) {
    function t(e, t, i) {
        t.custom[e] = {
            siteStructureBoundingClientRect: i.masterPage.getBoundingClientRect()
        }
    }

    function i(e, t, i, o, n) {
        var r = e + "bg",
            a = n.mobile.getMobileZoomByScreenProperties();
        t.css(e, {
            zoom: a
        }), t.css(r, {
            right: i.custom[e].siteStructureBoundingClientRect.left
        })
    }
    e.registerRequestToMeasureChildren("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton", [
        ["bg"]
    ]), e.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton", t), e.registerSAFEPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton", i)
}), define("layout/specificComponents/appPartZoomLayout", ["lodash", "layout/util/layout", "layout/specificComponents/wixappsLayout"], function(e, t, i) {
    function o(e) {
        return e.appPartName ? e.id : e.dataItemRef.id
    }

    function n(e, t) {
        return e + t.id + o(t)
    }

    function r(e, t, i) {
        var o = e + "inlineContent",
            n = Math.max(i.height[e], i.height.screen);
        t.css(o, {
            height: n
        })
    }

    function a(e, t, i, o) {
        var n = Math.max(o.height[t], o.height.screen);
        i.css(e, {
            height: n
        })
    }

    function s(t, i) {
        var o = e.has(t, "dataItemRef") ? t.dataItemRef.appInnerID : t.appInnerID;
        return !!i.getClientSpecMapEntry(o)
    }
    t.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom", function(e, t, n, r) {
        if (!s(r.dataItem, e)) return null;
        var a = o(r.dataItem),
            u = r.dataItem.id;
        return [
            [u, a],
            [u, a, i.inlineContentId]
        ]
    }), t.registerCustomMeasure("wixapps.integration.components.AppPartZoom", function(e, t, o, r, a) {
        if (!s(a.dataItem, r)) return null;
        var u = n(e, a.dataItem);
        i.appPartMeasureFunction(u, t, o, r), t.custom[e] = {
            marginTop: Math.max((t.height.screen - t.height[u]) / 2, 0),
            height: t.height[u]
        }
    }), t.registerSAFEPatcher("wixapps.integration.components.AppPartZoom", function(e, t, o, u, c) {
        if (s(u.dataItem, c)) {
            var l = n(e, u.dataItem);
            c.isMobileView() ? (a(e, l, t, o), r(l, t, o)) : i.appPartPatcherFunction(l, t, o, null, c)
        }
    }), t.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom", function(e, t, o, r, a) {
        if (!s(e.dataItem, a)) return null;
        var u = n(e.id, e.dataItem),
            c = {
                id: u
            },
            l = window.document.getElementById(u),
            h = {};
        return h[e.id] = !0, {
            needsAdditionalInnerLayout: i.preMeasureProxies(c, l, o, r, a),
            changedCompsMap: h
        }
    }, function(e, t, o, r, a) {
        if (!s(e.dataItem, a)) return null;
        var u = {
            id: n(e.id, e.dataItem)
        };
        return i.postPatchProxies(u, t, o, r, a)
    })
}), define("layout/specificComponents/facebookShareLayout", ["layout/util/layout"], function(e) {
    function t(e, t, i) {
        var o = i[e].children[0];
        o && (t.height[e] = Math.max(t.height[e], o.offsetHeight), t.width[e] = Math.max(t.width[e], o.offsetWidth))
    }

    function i(e, t, i) {
        var o = i.width[e],
            n = i.height[e];
        t.css(e, {
            width: o,
            height: n
        })
    }
    e.registerCustomMeasure("wysiwyg.viewer.components.FacebookShare", t), e.registerSAFEPatcher("wysiwyg.viewer.components.FacebookShare", i), e.registerRequestToMeasureDom("wysiwyg.viewer.components.FacebookShare")
}), define("layout/specificComponents/paginatedGridGalleryLayout", ["layout/util/layout", "zepto", "lodash", "imageClientApi", "coreUtils", "layout/specificComponents/imageLayout"], function(e, t, i, o, n, r) {
    function a(e, t, n, a, s, u, c, l, d) {
        i.forEach(e, function(e, l) {
            var g = h.getItemPosition(l, t, n, a.margin, a.numCols);
            u.css(e.imageItemId, {
                width: t,
                height: n,
                left: g.left,
                top: g.top
            });
            var p = i.assign({}, d.dataItem.items[e.imageIndex], {
                displayMode: o.fittingTypes.SCALE_TO_FILL
            });
            r.patchNodeImage(e.imageItemId, u, c, s, p, {
                width: t,
                height: n
            })
        })
    }

    function s(e, t, o, n) {
        var r = [
            ["itemsContainer"]
        ];
        return i.forEach(n.dataItem.items, function(e) {
            r.push({
                pathArray: [e.id],
                type: "core.components.Image"
            })
        }), r
    }

    function u(e) {
        return i.map(e, function(e) {
            return {
                imageItemId: e.id,
                imageIndex: t(e).data("image-index")
            }
        })
    }

    function c(e, i, o) {
        var n = i.custom[e] = {},
            r = t(o[e]);
        n.heightDiff = parseInt(r.data("height-diff"), 10), n.widthDiff = parseInt(r.data("width-diff"), 10);
        var a = t(o[e + "itemsContainer"]);
        n.nextItemsData = u(a.children('div[data-page-desc="next"]')), n.prevItemsData = u(a.children('div[data-page-desc="prev"]')), n.currItemsData = u(a.children('div[data-page-desc="curr"]'))
    }

    function l(e, t, i, o, n) {
        var r = i.height[e],
            s = i.width[e],
            u = i.custom[e],
            c = o.propertiesItem;
        t.css(e + "itemsContainer", {
            width: s - u.widthDiff,
            height: r - u.heightDiff
        });
        var l = h.getItemWidth(c.margin, c.numCols, s, u.widthDiff),
            d = h.getAvailableRowsNumber(c.maxRows, c.numCols, o.dataItem.items.length),
            g = h.getItemHeight(c.margin, r, d, u.heightDiff);
        a(u.nextItemsData, l, g, c, n, t, i, e, o), a(u.prevItemsData, l, g, c, n, t, i, e, o), a(u.currItemsData, l, g, c, n, t, i, e, o)
    }
    var h = n.matrix.calculations;
    return e.registerSAFEPatcher("wysiwyg.viewer.components.PaginatedGridGallery", l), e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery", s), e.registerCustomMeasure("wysiwyg.viewer.components.PaginatedGridGallery", c), {}
}), define("layout/specificComponents/PinterestFollowLayout", ["layout/util/layout"], function(e) {
    return e.registerCustomMeasure("wysiwyg.viewer.components.PinterestFollow", function(e, t, i) {
        t.height[e] = i[e + "followButtonTag"].offsetHeight, t.width[e] = i[e + "followButtonTag"].offsetWidth
    }), e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PinterestFollow", [
        ["followButtonTag"]
    ]), {}
}), define("layout/specificComponents/videoLayout", ["lodash", "layout/util/layout"], function(e, t) {
    function i(t, i, o) {
        var n = new RegExp("([?&])" + i + "=.*?(&|$)", "i"),
            r = e.includes(t, "?") ? "&" : "?";
        return t.match(n) ? t.replace(n, "$1" + i + "=" + o + "$2") : t + r + i + "=" + o
    }

    function o(e, t, o, n) {
        if ("FACEBOOK" === n.dataItem.videoType) {
            var r = i(o.custom[e].src, "width", o.width[e]);
            r = i(r, "height", o.height[e]), t.attr(e + "FACEBOOK", {
                src: r
            })
        }
    }

    function n(e, t, i, o, n) {
        var s = n.dataItem.videoType,
            u = r[s] || a;
        t.minWidth[e] = u.WIDTH, t.minHeight[e] = u.HEIGHT, t.width[e] = Math.max(t.width[e], u.WIDTH), t.height[e] = Math.max(t.height[e], u.HEIGHT), "FACEBOOK" === s && (i[e + "FACEBOOK"] = i[e].getElementsByTagName("iframe")[0], t.custom[e] = {
            src: i[e].getElementsByTagName("iframe")[0].src
        })
    }
    var r = {
            VIMEO: {
                WIDTH: 100,
                HEIGHT: 100
            },
            YOUTUBE: {
                WIDTH: 200,
                HEIGHT: 200
            }
        },
        a = {
            WIDTH: 10,
            HEIGHT: 10
        };
    t.registerCustomMeasure("wysiwyg.viewer.components.Video", n), t.registerSAFEPatcher("wysiwyg.viewer.components.Video", o)
}), define("layout/specificComponents/soundCloudLayout", ["layout/util/layout"], function(e) {
    function t(e, t) {
        t.minWidth[e] = 250, t.minHeight[e] = 50, t.width[e] = Math.max(t.width[e], 250), t.height[e] = Math.max(t.height[e], 50)
    }
    e.registerCustomMeasure("wysiwyg.viewer.components.SoundCloudWidget", t)
}), define("layout/specificComponents/verticalLineLayout", ["layout/util/layout"], function(e) {
    e.registerCustomMeasure("wysiwyg.viewer.components.VerticalLine", function(e, t, i) {
        t.height[e] = Math.min(t.height[e], 2e3), t.width[e] = parseInt(i[e].style.width, 10), t.left[e] = parseInt(i[e].style.left, 10)
    })
}), define("layout/specificComponents/boxSlideShowLayout", ["zepto", "coreUtils", "layout/util/layout", "layout/specificComponents/balataLayout"], function(e, t, i, o) {
    function n(e, t) {
        t.height[e] = Math.max(s, t.height[e]), t.minHeight[e] = s
    }

    function r(t, i, n, r, a) {
        i.top[t] = 0, i.left[t] = 0;
        var s = e(n[t]),
            c = s.data("parent-id");
        if (i.minHeight[t] = s.data("min-height"), i.height[t] = i.height[c], a.designDataItem.background) {
            var l = t + u.BALATA;
            i.width[l] = i.width[t], i.height[l] = i.height[t], i.left[l] = i.left[t];
            var h = n[t].getBoundingClientRect();
            i.custom[t] = {
                absoluteLeft: h.left
            }, o.measure(t, i, n, r, a)
        }
    }

    function a(e, t, i, n, r) {
        if (n.designDataItem.background) {
            var a = {
                top: i.top[e],
                left: i.left[e],
                width: i.width[e],
                height: i.height[e],
                absoluteLeft: i.custom[e].absoluteLeft
            };
            o.patch(e, t, i, n, r, a)
        }
    }
    var s = 50,
        u = t.balataConsts;
    i.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow", n), i.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide", r), i.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShow"), i.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShowSlide"), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.BoxSlideShowSlide", [
        ["inlineContentParent"],
        ["inlineContent"]
    ].concat(o.BALATA_PATHS_TO_REQUEST_MEASURE)), i.registerSAFEPatcher("wysiwyg.viewer.components.BoxSlideShowSlide", a)
}), define("layout/specificComponents/mediaContainerLayout", ["lodash", "zepto", "layout/util/layout", "layout/specificComponents/balataLayout", "experiment"], function(e, t, i, o, n) {
    function r(i, r, a, s, c) {
        if (c.designDataItem.background && ("wysiwyg.viewer.components.MediaPlayer" === c.type && (r.custom[i] = {
                alignments: {
                    "wysiwyg.viewer.components.MediaOverlayControls": {
                        vertical: "center",
                        horizontal: "center",
                        maxWidthFactor: .65,
                        maxHeightFactor: .65
                    },
                    "wysiwyg.viewer.components.MediaControls": {
                        vertical: "bottom",
                        horizontal: "stretch",
                        verticalMargin: 2,
                        horizontalMargin: 2
                    }
                }
            }), o.measure(i, r, a, s, c), n.isOpen("sv_cssDesignData"))) {
            var l = i + u;
            a[l] = a[l] || t(a[i]).find("#" + l)[0];
            var h = window.getComputedStyle(a[l]),
                d = parseInt(h.getPropertyValue("border-left-width"), 10);
            e.isUndefined(r.borderWidth) && (r.borderWidth = {}), r.borderWidth[i] = d, r.width[i] = c.layout.width || a[i].clientWidth || r.width[i]
        }
    }

    function a(e, t, i, r, a) {
        if (r.designDataItem.background) {
            n.isOpen("sv_cssDesignData") && t.css(e + u, {
                left: -i.borderWidth[e],
                top: -i.borderWidth[e]
            });
            var s = {
                top: 0,
                left: 0,
                width: i.width[e],
                height: i.height[e],
                absoluteLeft: i.absoluteLeft[e]
            };
            o.patch(e, t, i, r, a, s)
        }
    }
    var s = ["wysiwyg.viewer.components.HoverBox", "wysiwyg.viewer.components.MediaPlayer"],
        u = "container";
    e.forEach(s, function(e) {
        i.registerCustomMeasure(e, r), i.registerRequestToMeasureChildren(e, o.BALATA_PATHS_TO_REQUEST_MEASURE), i.registerSAFEPatcher(e, a)
    })
}), define("layout/util/mediaLayoutUtils", ["lodash"], function(e) {
    function t(e, t, i, o) {
        var n = i.verticalMargin || 0,
            r = i.horizontalMargin || 0;
        switch (i.vertical) {
            case "top":
                o.top[e] = 0 + n;
                break;
            case "center":
                o.top[e] = (o.height[t] - o.height[e]) / 2;
                break;
            case "bottom":
                o.top[e] = o.height[t] - o.height[e] - n
        }
        switch (i.horizontal) {
            case "left":
                o.left[e] = 0 + r;
                break;
            case "center":
                o.left[e] = (o.width[t] - o.width[e]) / 2;
                break;
            case "right":
                o.left[e] = o.width[t] - o.width[e] - r;
                break;
            case "stretch":
                o.left[e] = 0 + r, o.width[e] = o.width[t] - 2 * r
        }
    }

    function i(t, i, o) {
        var n = "data-element-query-",
            r = {};
        return e.forEach(o, function(o, a) {
            var s = e.get(i, [a, t]);
            s && (r[n + a] = "", e.forEach(o, function(e) {
                e.min < s && e.max > s && (r[n + a] && (r[n + a] += " "), r[n + a] += e.name)
            }))
        }), r
    }
    return {
        updateAligmentsToMeasureMap: t,
        getElementQueries: i
    }
}), define("layout/specificComponents/mediaControlsLayout", ["lodash", "layout/util/layout", "layout/util/mediaLayoutUtils", "coreUtils"], function(e, t, i, o) {
    function n(e, t, i) {
        var o = i[e].getAttribute("data-player-id");
        t.custom[e] = {
            playerId: o,
            audio: i[e].getAttribute("data-audio")
        };
        var n = i[e].getAttribute("data-element-queries-def");
        n && (t.custom[e].elementQueriesDefinition = a.elementQueries[n])
    }

    function r(t, o, n) {
        var r = n.custom[t].playerId,
            a = e.get(n, ["custom", r, "alignments", s], {}),
            u = e.get(n, ["custom", t, "audio"]);
        i.updateAligmentsToMeasureMap(t, r, a, n);
        var c = {
                top: n.top[t],
                left: n.left[t],
                width: n.width[t]
            },
            l = e.get(n.custom, [t, "elementQueriesDefinition"], {});
        o.css(t, c), o.attr(t, i.getElementQueries(t, n, l)), o.attr(t, {
            "data-element-query-parts": u
        })
    }
    var a = o.mediaConsts,
        s = "wysiwyg.viewer.components.MediaControls",
        u = [
            ["controls"],
            ["play"],
            ["volume"],
            ["fullscreen"],
            ["progress"],
            ["time"]
        ];
    t.registerCustomMeasure("wysiwyg.viewer.components.MediaControls", n), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.MediaControls", u), t.registerSAFEPatcher("wysiwyg.viewer.components.MediaControls", r)
}), define("layout/util/svgUtils", ["lodash", "siteUtils"], function(e, t) {
    function i(e) {
        var t = e.split(" ");
        return {
            x: t[0],
            y: t[1],
            width: t[2],
            height: t[3]
        }
    }

    function o(t, i, o) {
        o.shapesBoundaries = o.shapesBoundaries || {};
        var n;
        e.get(o.shapesBoundaries, [i, "boxBoundaries"]) || (n = e.pick(t.getBBox(), ["x", "y", "width", "height"]), e.some(n) && e.set(o.shapesBoundaries, [i, "boxBoundaries"], n))
    }

    function n(t, o, n) {
        n.shapesBoundaries = n.shapesBoundaries || {};
        var r;
        e.get(n, ["shapesBoundaries", o, "viewbox"]) || (r = t.getAttribute("viewBox")) && e.set(n.shapesBoundaries, [o, "viewbox"], i(r))
    }

    function r(e, i, o, n) {
        var r, u = i,
            l = n ? "xMidYMid meet" : "none",
            h = o,
            d = t.svgFeatureDetection.flags().isVectorEffect;
        return i ? d ? r = s(e, i, o, n) : (r = s(e, i, o, n), u = a(e, i, o)) : r = e, {
            viewBox: c(r),
            strokeWidth: u,
            width: h.width,
            height: h.height,
            preserveAspectRatio: l
        }
    }

    function a(e, t, i) {
        return t * (1 / Math.min((i.width - t) / e.width, (i.height - t) / e.height))
    }

    function s(e, t, i, o) {
        var n, r, a, s;
        return o ? n = r = Math.min((i.width - t) / e.width, (i.height - t) / e.height) : (n = (i.width - t) / e.width, r = (i.height - t) / e.height), a = i.width / n, s = i.height / r, {
            width: a,
            height: s,
            x: e.x - (a - e.width) / 2,
            y: e.y - (s - e.height) / 2
        }
    }

    function u(t) {
        var i = e.get(t, ["style", "properties", "strokewidth"]);
        return i ? parseInt(i, 10) : 0
    }
    var c = e.template("${x} ${y} ${width} ${height}");
    return {
        storeSVGMeasuresInSiteData: o,
        storeSVGViewboxInSiteData: n,
        getStrokeValue: u,
        getScaledViewBox: s,
        getScaledStroke: a,
        getSvgScaleProps: r
    }
}), define("layout/specificComponents/svgPrimitiveLayout", ["lodash", "layout/util/svgUtils", "layout/util/layout"], function(e, t, i) {
    function o(i, o, n, a, s, u) {
        var c = e.get(s, ["shapesBoundaries", u]);
        if (c && n.custom[i + r]) {
            var l = t.getStrokeValue(a.styleItem),
                h = {
                    width: n.width[i],
                    height: n.height[i]
                },
                d = t.getSvgScaleProps(c.viewbox, l, h, !0);
            o.css(i + r, e.pick(d, ["strokeWidth"])), o.attr(i + r, e.pick(d, ["preserveAspectRatio", "viewBox"]))
        }
    }

    function n(e, i, o, n, a) {
        var s = o[e].querySelector("svg");
        s && (i.custom[e + r] = {}, o[e + r] = s, t.storeSVGViewboxInSiteData(s, a, n))
    }
    var r = "svg";
    return i.registerCustomMeasure("wysiwyg.viewer.components.svgPrimitive", n), {
        measureNodeSvg: n,
        patchNodeSvg: o
    }
}), define("layout/specificComponents/mediaOverlayControlsLayout", ["lodash", "layout/util/layout", "layout/util/mediaLayoutUtils", "layout/specificComponents/svgPrimitiveLayout"], function(e, t, i, o) {
    function n(t, i, n, r, u) {
        var c = n[t].getAttribute("data-player-id");
        n[t + a] = n[t].querySelector("#" + t + a);
        var l = e.get(u, ["styleItem", "style", "properties", "playButton"]);
        i.custom[t] = {
            playerId: c,
            svgName: l
        }, o.measureNodeSvg(t + s, i, n, r, l)
    }

    function r(t, n, r, c, l) {
        var h = r.custom[t].playerId,
            d = e.get(r, ["custom", h, "alignments", u], {}),
            g = r.width[h] * d.maxWidthFactor,
            p = r.height[h] * d.maxHeightFactor,
            m = r.width[t] / r.height[t];
        r.width[t] > g && (r.width[t] = g, r.height[t] = r.width[t] * (1 / m)), r.height[t] > p && (r.height[t] = p, r.width[t] = r.height[t] * m), i.updateAligmentsToMeasureMap(t, h, d, r);
        var f = {
                top: r.top[t],
                left: r.left[t],
                width: r.width[t],
                height: r.height[t]
            },
            y = {
                top: -r.top[t],
                left: -r.left[t],
                width: r.width[h],
                height: r.height[h]
            };
        n.css(t, f), n.css(t + a, y);
        var w = r.custom[t].svgName;
        o.patchNodeSvg(t + s, n, r, c, l, w)
    }
    var a = "catcher",
        s = "indicator",
        u = "wysiwyg.viewer.components.MediaOverlayControls",
        c = [{
            pathArray: [s]
        }];
    t.registerCustomMeasure("wysiwyg.viewer.components.MediaOverlayControls", n), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.MediaOverlayControls", c), t.registerSAFEPatcher("wysiwyg.viewer.components.MediaOverlayControls", r)
}), define("layout/specificComponents/verticalAnchorsMenuLayout", ["zepto", "lodash", "layout/util/layout"], function(e, t, i) {
    function o(i, o, n) {
        var r = e(n[i]),
            a = r.find("[class*=link]"),
            s = r.find("[class*=label]"),
            u = r.find("[class*=symbol]"),
            c = a.length,
            l = u.width(),
            h = Math.ceil(a.height() * c),
            d = 0;
        t.forEach(s, function(t) {
            d = Math.max(d, e(t).width())
        });
        var g = d + l;
        o.width[i] = Math.max(o.width[i], g), o.height[i] = Math.max(o.height[i], h), o.custom[i] = {
            minHeight: h,
            minWidth: g
        }
    }

    function n(e, t, i) {
        t.css(e, {
            width: i.width[e],
            height: i.height[e]
        })
    }
    i.registerCustomMeasure("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu", o), i.registerSAFEPatcher("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu", n)
}), define("layout/specificComponents/columnsLayout", ["lodash", "coreUtils", "layout/util/layout", "layout/specificComponents/balataLayout"], function(e, t, i, o) {
    function n(t, i, o, n, r, a, s) {
        var u = t.structure,
            c = u.id;
        a(u), o.minHeight[c] = 0, o.height[c] = u.layout.height;
        var l = s(u);
        return r.isMobileView() && (o.top[c] = n[c].offsetTop), {
            needsAdditionalInnerLayout: !1,
            changedCompsMap: e.mapValues(l, e.constant(!0))
        }
    }

    function r(i, n, r, a, s) {
        var u = a.isMobileView(),
            l = t.dataUtils.getChildrenData(s.structure, u),
            h = e.map(l, "id");
        if (u) {
            var d = 2 * s.propertiesItem.rowMargin + (l.length - 1) * s.propertiesItem.columnsMargin;
            e.forEach(h, function(e, t) {
                d += n.height[e], n.minHeight[e] = n.height[e];
                var o = t === h.length - 1;
                n.injectedAnchors[e] = o ? [{
                    fromComp: e,
                    distance: s.propertiesItem.rowMargin,
                    topToTop: 0,
                    originalValue: 0,
                    type: "BOTTOM_PARENT",
                    locked: !0,
                    targetComponent: i
                }] : [{
                    fromComp: e,
                    distance: s.propertiesItem.columnsMargin,
                    locked: !0,
                    originalValue: 0,
                    targetComponent: h[t + 1],
                    topToTop: 0,
                    type: "BOTTOM_TOP"
                }]
            }), n.height[i] = d, n.height[i + c.BALATA] = d
        } else {
            var g = e(n.height).pick(h).values().max();
            e.forEach(h, function(e) {
                n.top[e] = s.propertiesItem.rowMargin, n.minHeight[e] = g, n.injectedAnchors[e] = [{
                    fromComp: e,
                    distance: 0,
                    originalValue: 0,
                    type: "BOTTOM_PARENT",
                    locked: !0,
                    targetComponent: i
                }]
            }), n.height[i] = g + 2 * s.propertiesItem.rowMargin, n.containerHeightMargin[i] = s.propertiesItem.rowMargin, n.height[i + c.BALATA] = g + 2 * s.propertiesItem.rowMargin
        }
        o.measure(i, n, r, a, s);
        var p = r[i].getBoundingClientRect(),
            m = r[i + c.BALATA].offsetLeft;
        n.custom[i] = {
            absoluteLeft: p.left + m,
            backgroundLeft: r[i + c.BALATA].offsetLeft,
            backgroundWidth: r[i + c.BALATA].offsetWidth
        }
    }

    function a(e, t, i, n, r) {
        t.css(e, {
            height: i.height[e],
            left: 0
        });
        var a = {
            top: 0,
            left: i.custom[e].backgroundLeft,
            width: i.custom[e].backgroundWidth,
            height: i.height[e],
            absoluteLeft: i.custom[e].absoluteLeft
        };
        o.patch(e, t, i, n, r, a, !0)
    }

    function s(e, t, i, n, r) {
        t.height[e + c.BALATA] = t.minHeight[e], t.height[e] = t.minHeight[e], t.width[e] = i[e].offsetWidth, o.measure(e, t, i, n, r);
        var a = i[e].getBoundingClientRect(),
            s = i[e + c.BALATA].offsetLeft;
        t.custom[e] = {
            absoluteLeft: a.left + s,
            backgroundLeft: i[e + c.BALATA].offsetLeft,
            backgroundWidth: i[e + c.BALATA].offsetWidth
        }
    }

    function u(e, t, i, n, r) {
        t.css(e, {
            height: i.height[e]
        });
        var a = {
            top: 0,
            left: i.custom[e].backgroundLeft,
            width: i.custom[e].backgroundWidth,
            height: i.height[e],
            absoluteLeft: i.custom[e].absoluteLeft
        };
        o.patch(e, t, i, n, r, a, !0)
    }
    var c = t.balataConsts;
    i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripColumnsContainer", o.BALATA_PATHS_TO_REQUEST_MEASURE), i.registerRequestToMeasureChildren("wysiwyg.viewer.components.Column", o.BALATA_PATHS_TO_REQUEST_MEASURE), i.registerLayoutInnerCompsFirst("wysiwyg.viewer.components.Column", n, e.noop), i.registerCustomMeasure("wysiwyg.viewer.components.StripColumnsContainer", r), i.registerSAFEPatcher("wysiwyg.viewer.components.StripColumnsContainer", a), i.registerCustomMeasure("wysiwyg.viewer.components.Column", s), i.registerSAFEPatcher("wysiwyg.viewer.components.Column", u)
}), define("layout/util/popupContainerDocking", ["layout/specificComponents/containerAndScreenWidthLayout", "layout/specificComponents/balataLayout", "siteUtils"], function(e, t, i) {
    function o(e, t) {
        return {
            top: 0,
            left: 0,
            width: e,
            height: t,
            absoluteLeft: 0
        }
    }
    var n = {
        NINE_GRID: "nineGrid",
        FULL_HEIGHT: "fullHeight",
        FULL_WIDTH: "fullWidth"
    };
    return {
        measure: function(o, r, a, s, u) {
            var c = u.propertiesItem,
                l = {};
            c.alignmentType !== n.FULL_WIDTH ? (c.alignmentType === n.FULL_HEIGHT && (r.minHeight[o] = r.innerHeight.screen, r.shrinkableContainer[o] = !0), l.width = r.width[o], r.left[o] = i.compAlignmentUtils.getLeft(c, r.width[o], r.width.screen, s.getSiteWidth()), t.measure(o, r, a, s, u, l)) : e.measureStripContainer(o, r, a, s, u)
        },
        patch: function(r, a, s, u, c) {
            var l, h = u.propertiesItem,
                d = c.getCurrentPopupId(),
                g = i.compAlignmentUtils.getTop(h, s.height[r], s.innerHeight.screen);
            s.top[r] = g, l = s.height[d] = g + s.height[r], a.css(d, {
                height: l
            }), a.css(r, {
                left: s.left[r],
                top: g,
                width: s.width[r],
                height: s.height[r]
            }), h.alignmentType === n.FULL_WIDTH ? e.patchStripContainer(r, a, s, u, c, {
                width: s.width[r]
            }) : t.patch(r, a, s, u, c, o(s.width[r], s.height[r]))
        }
    }
}), define("layout/specificComponents/popupContainerLayout", ["lodash", "layout/util/layout", "layout/util/popupContainerDocking", "layout/specificComponents/containerAndScreenWidthLayout", "layout/specificComponents/balataLayout"], function(e, t, i, o, n) {
    function r(e, t, n, r, a) {
        o.measureContainer(e, t, n, r, a), i.measure(e, t, n, r, a);
        var s = a.propertiesItem;
        t.width["ROOT_" + a.rootId] = "fullWidth" === s.alignmentType ? r.getSiteWidth() : t.width[e], t.left["ROOT_" + a.rootId] = Math.floor(t.left[e] - r.getSiteX())
    }

    function a(e, t, o, n, r) {
        i.patch(e, t, o, n, r)
    }
    t.registerMeasureChildrenFirst("wysiwyg.viewer.components.PopupContainer", !0), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupContainer", [
        ["inlineContent"]
    ].concat(n.BALATA_PATHS_TO_REQUEST_MEASURE)), t.registerRequestToMeasureDom("wysiwyg.viewer.components.PopupContainer"), t.registerCustomMeasure("wysiwyg.viewer.components.PopupContainer", r), t.registerSAFEPatcher("wysiwyg.viewer.components.PopupContainer", a)
}), define("layout/specificComponents/comboBoxInputLayout", ["lodash", "zepto", "layout/util/layout"], function(e, t, i) {
    function o(i, o, n) {
        var r = e.head(t(n[i]).find("select"));
        o.height[i] = r.offsetHeight, o.width[i] = r.offsetWidth
    }

    function n(e, t, i) {
        var o = i.height[e],
            n = i.width[e];
        t.css(e, {
            height: o,
            width: n
        })
    }
    i.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.ComboBoxInput", [
        ["select"]
    ]), i.registerCustomMeasure("wysiwyg.viewer.components.inputs.ComboBoxInput", o), i.registerSAFEPatcher("wysiwyg.viewer.components.inputs.ComboBoxInput", n)
}), define("layout/specificComponents/textComponentsLayout", ["lodash", "layout/util/layout"], function(e, t) {
    function i(e, t, i) {
        var o = i[e + "textarea"];
        t.height[e] = o.offsetHeight, t.width[e] = o.offsetWidth
    }

    function o(e, t, i) {
        var o = i[e + "input"];
        t.height[e] = o.offsetHeight, t.width[e] = o.offsetWidth
    }

    function n(e, t, i) {
        t.css(e, {
            height: i.height[e],
            width: i.width[e]
        })
    }
    t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextInput", [
        ["input"]
    ]), t.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextInput", o), t.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextInput", n), t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextAreaInput", [
        ["textarea"]
    ]), t.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextAreaInput", i), t.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextAreaInput", n)
}), define("layout/specificComponents/radioButtonLayout", ["lodash", "layout/util/layout", "zepto"], function(e, t, i) {
    function o(t, i) {
        return e(t.css(i)).map(function(e) {
            return parseInt(e.split("px")[0], 10)
        }).sum()
    }

    function n(e, t) {
        var n = i("#" + e);
        t.height[e] = n.offset().height + o(n, ["margin-bottom", "margin-top"]);
        var r = i("#" + e + "container").offset().width,
            a = o(n, ["margin-right", "margin-left"]);
        t.width[e] = r + a
    }
    t.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioButton", n)
}), define("layout/specificComponents/datePickerLayout", ["zepto", "layout/util/layout"], function(e, t) {
    function i(t, i, o) {
        var n = o[t + "icon"],
            r = o[t + "input"],
            a = o[t + "inputWrapper"],
            s = n.height.baseVal.value + 16,
            u = parseInt(e(r).css("line-height"), 10) || 0,
            c = 2 * (parseInt(e(a).css("border-width"), 10) || 0);
        i.height[t] = Math.max(a.offsetHeight, s), i.width[t] = Math.max(a.offsetWidth, 56), i.minHeight[t] = Math.max(u, s) + c, i.minWidth[t] = 56 + c
    }

    function o(e, t, i) {
        t.css(e, {
            height: i.height[e],
            width: i.width[e]
        })
    }
    t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.DatePicker", [
        ["icon"],
        ["inputWrapper"],
        ["input"]
    ]), t.registerCustomMeasure("wysiwyg.viewer.components.inputs.DatePicker", i), t.registerSAFEPatcher("wysiwyg.viewer.components.inputs.DatePicker", o)
}), define("layout/specificComponents/radioGroupLayout", ["lodash", "zepto", "layout/util/layout"], function(e, t, i) {
    function o(t, i, o) {
        return e.filter(t[i], function(t, i) {
            return e.startsWith(i, o + "radio")
        })
    }

    function n(i, n) {
        var r = arguments[4],
            a = r.dataItem.options.length,
            s = "vertical" === r.propertiesItem.layout,
            u = o(n, "height", i),
            c = s ? e.sum(u) : e.max(u);
        n.height[i] = c;
        var l = o(n, "width", i),
            h = s ? e.max(l) : e.sum(l),
            d = s ? 60 : 60 * a;
        n.width[i] = e.max([d, h, t("#" + i).offset().width])
    }

    function r(e, t, i) {
        t.css(e, {
            width: i.width[e]
        })
    }

    function a(t, i, o, n) {
        return e.map(n.dataItem.options, function(e, t) {
            return {
                type: "wysiwyg.viewer.components.inputs.RadioButton",
                pathArray: ["radio" + t]
            }
        }).concat([
            ["items"]
        ])
    }
    i.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.RadioGroup", a), i.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioGroup", n), i.registerSAFEPatcher("wysiwyg.viewer.components.inputs.RadioGroup", r)
}), define("layout/specificComponents/gridLayout", ["lodash", "layout/util/layout"], function(e, t) {
    function i(e, t) {
        return e.styleItem.style.properties[t] || ""
    }

    function o(e) {
        var t = e.propertiesItem.pagination;
        return e.dataItem.numberOfDisplayedRows || (t && t.type === a.PAGES ? t.rowsPerPage : e.dataItem.rows.length)
    }

    function n(e, t, n, a, l) {
        var h = n[e];
        t.width[e] = h.offsetWidth, t.height[e] = h.offsetHeight;
        var d = l.propertiesItem,
            g = d.rowHeight + Number(i(l, c)),
            p = Math.min(o(l), r),
            m = d.showHeader ? d.headerHeight + Number(i(l, u)) : 0,
            f = Number(l.styleItem.style.properties.containerBrw) || 0,
            y = m + p * g + 2 * f,
            w = d.heightLayout === s.AUTOMATIC,
            v = h.getElementsByClassName("ag-bl-center ag-bl-full-height-center");
        if (v.length) {
            var C = h.getElementsByClassName("ag-body"),
                b = w ? y : v[0].clientHeight;
            C[0].style.height = b - 2 * f - m + "px"
        }
        y && w && (t.height[e] = y)
    }
    var r = 200,
        a = {
            PAGES: "pagination",
            SCROLL: "virtual",
            NONE: "normal"
        },
        s = {
            MANUAL: "manual",
            AUTOMATIC: "auto"
        },
        u = "headerDivider_w",
        c = "rowDivider_w";
    t.registerCustomMeasure("wysiwyg.viewer.components.Grid", n)
}), define("layout/specificComponents/fileUploaderLayout", ["zepto", "lodash", "layout/util/layout"], function(e, t, i) {
    function o(t, i, o) {
        var n = e(o[t]),
            r = n.find("#" + t + "files"),
            a = n.find("#" + t + "buttonLabel"),
            s = n.find("#" + t + "chooseFileButton"),
            u = window.getComputedStyle(r[0]),
            c = window.getComputedStyle(s[0]),
            l = 2 * parseInt(c.borderLeftWidth, 10);
        i.minHeight[t] = parseInt(u.height, 10) + parseInt(u.marginTop, 10) + Math.max(a[0].offsetHeight, 23) + l, i.width[t] = Math.max(a[0].offsetWidth + l + 16 + 20, i.width[t])
    }

    function n(e, t, i) {
        var o = {
            height: Math.max(i.minHeight[e], i.height[e]),
            width: i.width[e]
        };
        t.css(e, o)
    }
    i.registerCustomMeasure("wysiwyg.viewer.components.inputs.FileUploader", o), i.registerSAFEPatcher("wysiwyg.viewer.components.inputs.FileUploader", n)
}), define("layout/specificComponents/appControllerLayout", ["layout/util/layout"], function(e) {
    e.registerCustomMeasure("platform.components.AppController", function(e, t, i) {
        i[e + "inlineContent"] && (t.width[e] = t.width[e + "inlineContent"], t.height[e] = t.height[e + "inlineContent"])
    }), e.registerRequestToMeasureChildren("platform.components.AppController", [
        ["inlineContent"]
    ])
}), define("layout/specificComponents/linkBarLayout", ["lodash", "layout/util/layout", "layout/specificComponents/imageLayout"], function(e, t, i) {
    function o(t, i, o, n) {
        var a = n.dataItem.items;
        return e.map(a, function(e, t) {
            return {
                type: "core.components.Image",
                pathArray: ["" + t, r]
            }
        })
    }

    function n(t, o, n, a, s) {
        var u = e.get(a, ["propertiesItem", "iconSize"]),
            c = {
                width: u,
                height: u
            },
            l = a.dataItem.items;
        e.forEach(l, function(e, a) {
            i.patchNodeImage(t + a + r, o, n, s, e, c, e.alignType)
        })
    }
    var r = "image";
    t.registerRequestToMeasureChildren("wysiwyg.viewer.components.LinkBar", o), t.registerSAFEPatcher("wysiwyg.viewer.components.LinkBar", n)
}), define("layout/specificComponents/flashComponentLayout", ["lodash", "layout/util/layout", "layout/specificComponents/imageLayout"], function(e, t, i) {
    function o(e, t, o, n, r) {
        i.patchNodeImage(e + "noFlashImg", t, o, r, n.dataItem.placeHolderImage, {
            width: n.dataItem.placeHolderImage.width,
            height: n.dataItem.placeHolderImage.height
        }, n.dataItem.placeHolderImage.alignType)
    }
    t.registerRequestToMeasureChildren("wysiwyg.viewer.components.FlashComponent", [{
        type: "core.components.Image",
        pathArray: ["noFlashImg"]
    }]), t.registerSAFEPatcher("wysiwyg.viewer.components.FlashComponent", o)
}), define("layout/specificComponents/rssButtonLayout", ["lodash", "layout/util/layout", "layout/specificComponents/imageLayout"], function(e, t, i) {
    function o(t, i, o, n) {
        return [{
            type: "core.components.Image",
            pathArray: [e.get(n, ["dataItem", "image", "id"])]
        }]
    }

    function n(t, o, n, r, a) {
        var s = e.get(r, "layout"),
            u = e.get(r, ["dataItem", "image"]);
        e.assign(u, {
            displayMode: "full"
        }), i.patchNodeImage(t + e.get(u, "id"), o, n, a, u, s)
    }
    t.registerRequestToMeasureChildren("wysiwyg.common.components.rssbutton.viewer.RSSButton", o), t.registerSAFEPatcher("wysiwyg.common.components.rssbutton.viewer.RSSButton", n)
}), define("layout/specificComponents/quickActionBarLayout", ["lodash", "layout/util/layout"], function(e, t) {
    function i(e, t, i, o, n) {
        t.custom[e] = {
            isZoomed: o.mobile.isZoomed() && "preview" !== o.viewMode
        }, t.top[e] = t.clientHeight - t.height[e] - 16, t.left[e] = n.layout.x + (t.clientWidth - t.width.screen) / 2
    }

    function o(e, t, i) {
        t.css(e, {
            top: "",
            bottom: 16,
            left: i.left[e],
            display: i.custom[e].isZoomed ? "none" : "",
            "z-index": 1
        })
    }
    t.registerCustomMeasure("wysiwyg.viewer.components.QuickActionBar", i), t.registerSAFEPatcher("wysiwyg.viewer.components.QuickActionBar", o)
}), define("layout/specificComponents/touchMediaZoomLayout", ["zepto", "lodash", "siteUtils", "layout/util/layout"], function(e, t, i, o) {
    function n(i, o, n) {
        var r = e(n[i]);
        if (r.data("firstrender")) {
            o.custom[i] = {
                imageIds: []
            };
            var a = t.toArray(r.find("img"));
            t.forEach(a, function(t, r) {
                var a = i + "_image" + r;
                n[a] = t, o.custom[i].imageIds.push(a), o.custom[a] = {
                    imageData: e(t).data("imgdata"),
                    scale: e(t).data("imgscale")
                }
            });
            var s = u.exec(i)[1];
            n[i + "imageContainer"] = r.find("#" + s + "imageContainer"), n[i + "info"] = r.find("#" + s + "info")
        }
    }

    function r(e, i, o, n, r) {
        o.custom[e] && (t.forEach(o.custom[e].imageIds, function(e) {
            var t = {
                    pixelAspectRatio: r.mobile.getDevicePixelRatio(),
                    browser: r.getBrowser(),
                    staticMediaUrl: r.getStaticMediaUrl(),
                    screenSize: {
                        width: o.width.screen,
                        height: o.height.screen
                    }
                },
                n = o.custom[e],
                a = s.getImageApiData(n.imageData, t, n.scale);
            i.css(e, a.css.img), i.attr(e, {
                src: a.uri
            })
        }), i.css(e, {
            width: (1 + 2 * c) * o.width.screen
        }), i.css(e + "imageContainer", {
            width: o.width.screen
        }), i.css(e + "info", {
            width: o.width.screen
        }))
    }

    function a(e, i, o, n, a) {
        i.css(e, {
            top: 0,
            position: "absolute",
            width: "100%",
            height: "100%"
        }), t.forEach(["imageZoomCompstage_LEFT", "imageZoomCompstage_CENTER", "imageZoomCompstage_RIGHT"], function(e) {
            r(e, i, o, n, a)
        })
    }
    var s = i.touchMediaZoomUtils,
        u = /^imageZoomComp(.*)$/,
        c = .2;
    o.registerCustomMeasure("wysiwyg.viewer.components.TouchMediaZoomItem", n), o.registerRequestToMeasureChildren("wysiwyg.viewer.components.TouchMediaZoomSlideshow", [{
        pathArray: ["stage_LEFT"],
        type: "wysiwyg.viewer.components.TouchMediaZoomItem"
    }, {
        pathArray: ["stage_CENTER"],
        type: "wysiwyg.viewer.components.TouchMediaZoomItem"
    }, {
        pathArray: ["stage_RIGHT"],
        type: "wysiwyg.viewer.components.TouchMediaZoomItem"
    }]), o.registerSAFEPatcher("wysiwyg.viewer.components.TouchMediaZoomSlideshow", a)
}), define("layout/specificComponents/viewerLayout", [], function() {
    return function(e) {
        function t(o) {
            if (i[o]) return i[o].exports;
            var n = i[o] = {
                exports: {},
                id: o,
                loaded: !1
            };
            return e[o].call(n.exports, n, n.exports, t), n.loaded = !0, n.exports
        }
        var i = {};
        return t.m = e, t.c = i, t.p = ".", t(0)
    }([function(e, t, i) {
        var o, n;
        o = [], void 0 !== (n = function() {
            "undefined" != typeof window && window.document && window.santaBase && !window.editorBase && !document.querySelector('link[href$="viewer.css"]') && i(1)
        }.apply(t, o)) && (e.exports = n)
    }, function(e, t, i) {
        var o = i(2);
        "string" == typeof o && (o = [
            [e.id, o, ""]
        ]);
        i(4)(o, {});
        o.locals && (e.exports = o.locals)
    }, function(e, t, i) {
        (e.exports = i(3)()).push([e.id, "html, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, font, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  vertical-align: baseline;\n  background: transparent; }\n\nbody {\n  font-size: 10px;\n  font-family: Arial, Helvetica, sans-serif; }\n\ntextarea, input, select {\n  font-family: Helvetica, Arial, sans-serif;\n  box-sizing: border-box; }\n\nol, ul {\n  list-style: none; }\n\nblockquote, q {\n  quotes: none; }\n\n:focus {\n  outline: 0; }\n\nins {\n  text-decoration: none; }\n\ndel {\n  text-decoration: line-through; }\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\na {\n  cursor: pointer;\n  text-decoration: none; }\n\nhtml, body {\n  height: 100%; }\n\nbody {\n  overflow-x: auto;\n  overflow-y: scroll; }\n\n.testStyles {\n  overflow-y: hidden; }\n\n.wixSiteProperties {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  overflow: hidden; }\n\n.SITE_ROOT {\n  min-height: 100%;\n  position: relative;\n  margin: 0 auto; }\n\n.POPUPS_ROOT {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow-x: auto;\n  overflow-y: scroll;\n  position: fixed;\n  z-index: 99999; }\n  .POPUPS_ROOT.mobile {\n    z-index: 1005;\n    -webkit-overflow-scrolling: touch; }\n\n.POPUPS_WRAPPER {\n  position: relative;\n  overflow: hidden; }\n  .POPUPS_WRAPPER > div {\n    /* page */\n    margin: 0 auto; }\n\n.auto-generated-link {\n  color: inherit; }\n\n.warmup .hidden-on-warmup {\n  visibility: hidden; }\n\nhtml.device-phone body {\n  overflow-y: auto; }\n\nhtml.device-mobile-optimized.device-android {\n  margin-bottom: 1px; }\n\nhtml.device-mobile-optimized.blockSiteScrolling > body {\n  position: fixed;\n  width: 100%; }\n\nhtml.device-mobile-optimized.media-zoom-mode > body {\n  touch-action: manipulation; }\n  html.device-mobile-optimized.media-zoom-mode > body > #SITE_CONTAINER {\n    height: 100%;\n    overflow: hidden; }\n    html.device-mobile-optimized.media-zoom-mode > body > #SITE_CONTAINER > .noop {\n      height: 100%; }\n      html.device-mobile-optimized.media-zoom-mode > body > #SITE_CONTAINER > .noop > .siteAspectsContainer {\n        height: 100%;\n        z-index: 1005; }\n\n.siteAspectsContainer {\n  position: absolute;\n  top: 0;\n  margin: 0 auto;\n  left: 0;\n  right: 0; }\n\nbody.device-mobile-optimized {\n  overflow-x: hidden;\n  overflow-y: scroll; }\n  body.device-mobile-optimized.qa-mode {\n    overflow-y: auto; }\n  body.device-mobile-optimized #SITE_CONTAINER {\n    width: 320px;\n    overflow-x: visible;\n    margin: 0 auto;\n    position: relative; }\n  body.device-mobile-optimized > * {\n    max-width: 100% !important; }\n  body.device-mobile-optimized .SITE_ROOT {\n    overflow-x: hidden;\n    overflow-y: hidden; }\n\nbody.device-mobile-non-optimized #SITE_CONTAINER > :not(.mobile-non-optimized-overflow) .SITE_ROOT {\n  overflow-x: hidden;\n  overflow-y: auto; }\n\nbody.device-mobile-non-optimized.fullScreenMode {\n  background-color: #5f6360; }\n  body.device-mobile-non-optimized.fullScreenMode .SITE_ROOT,\n  body.device-mobile-non-optimized.fullScreenMode #SITE_BACKGROUND,\n  body.device-mobile-non-optimized.fullScreenMode #MOBILE_ACTIONS_MENU {\n    visibility: hidden; }\n\nbody.fullScreenMode {\n  overflow-x: hidden !important;\n  overflow-y: hidden !important; }\n  body.fullScreenMode.device-mobile-optimized #TINY_MENU {\n    opacity: 0;\n    pointer-events: none; }\n\nbody.fullScreenMode-scrollable.device-mobile-optimized {\n  overflow-x: hidden !important;\n  overflow-y: auto !important; }\n  body.fullScreenMode-scrollable.device-mobile-optimized .SITE_ROOT,\n  body.fullScreenMode-scrollable.device-mobile-optimized #masterPage {\n    overflow-x: hidden !important;\n    overflow-y: hidden !important; }\n  body.fullScreenMode-scrollable.device-mobile-optimized #masterPage,\n  body.fullScreenMode-scrollable.device-mobile-optimized #SITE_BACKGROUND {\n    height: auto !important; }\n\n.fullScreenOverlay {\n  z-index: 1005;\n  position: fixed;\n  left: 0;\n  top: -60px;\n  right: 0;\n  bottom: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  overflow-y: hidden; }\n  .fullScreenOverlay > .fullScreenOverlayContent {\n    margin: 0 auto;\n    position: absolute;\n    right: 0;\n    top: 60px;\n    left: 0;\n    bottom: 0;\n    overflow: hidden;\n    -webkit-transform: translateZ(0);\n            transform: translateZ(0); }\n\n.mobile-actions-menu-wrapper {\n  z-index: 1000; }\n\nbody[contenteditable] {\n  overflow-x: auto;\n  overflow-y: auto; }\n\n.bold {\n  font-weight: bold; }\n\n.italic {\n  font-style: italic; }\n\n.underline {\n  text-decoration: underline; }\n\n.lineThrough {\n  text-decoration: line-through; }\n\n.singleLineText {\n  white-space: nowrap;\n  text-overflow: ellipsis; }\n\n.alignLeft {\n  text-align: left; }\n\n.alignCenter {\n  text-align: center; }\n\n.alignRight {\n  text-align: right; }\n\n.alignJustify {\n  text-align: justify; }\n\nul.font_100, ol.font_100 {\n  color: #080808;\n  font-family: 'Arial, Helvetica, sans-serif', serif;\n  font-size: 10px;\n  font-style: normal;\n  font-variant: normal;\n  font-weight: normal;\n  margin: 0;\n  text-decoration: none;\n  line-height: normal;\n  letter-spacing: normal; }\n  ul.font_100 li, ol.font_100 li {\n    margin-bottom: 12px; }\n\nletter {\n  position: relative;\n  display: inline-block; }\n\nword {\n  display: inline-block;\n  white-space: nowrap; }\n\nword.space,\nletter.space {\n  display: inline; }\n\nol.wix-list-text-align, ul.wix-list-text-align {\n  list-style-position: inside; }\n  ol.wix-list-text-align p, ol.wix-list-text-align h1, ol.wix-list-text-align h2, ol.wix-list-text-align h3, ol.wix-list-text-align h4, ol.wix-list-text-align h5, ol.wix-list-text-align h6, ul.wix-list-text-align p, ul.wix-list-text-align h1, ul.wix-list-text-align h2, ul.wix-list-text-align h3, ul.wix-list-text-align h4, ul.wix-list-text-align h5, ul.wix-list-text-align h6 {\n    display: inline; }\n\n.wixapps-less-spacers-align.ltr {\n  text-align: left; }\n\n.wixapps-less-spacers-align.center {\n  text-align: center; }\n\n.wixapps-less-spacers-align.rtl {\n  text-align: right; }\n\n.wixapps-less-spacers-align > div,\n.wixapps-less-spacers-align > a {\n  display: inline-block !important; }\n\n.flex_display {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex; }\n\n.flex_vbox {\n  box-sizing: border-box;\n  padding-top: 0.01em;\n  padding-bottom: 0.01em; }\n\na.wixAppsLink img {\n  cursor: pointer; }\n\n.singleLine {\n  white-space: nowrap;\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  word-wrap: normal; }\n\n[data-z-counter] {\n  z-index: 0; }\n\n[data-z-counter=\"0\"] {\n  z-index: auto; }\n\n.circle-preloader {\n  -webkit-animation: semi-rotate 1s 1ms linear infinite;\n          animation: semi-rotate 1s 1ms linear infinite;\n  height: 30px;\n  left: 50%;\n  margin-left: -15px;\n  margin-top: -15px;\n  overflow: hidden;\n  position: absolute;\n  top: 50%;\n  -webkit-transform-origin: 100% 50%;\n          transform-origin: 100% 50%;\n  width: 15px; }\n  .circle-preloader::before {\n    content: '';\n    top: 0;\n    left: 0;\n    right: -100%;\n    bottom: 0;\n    border: 3px solid currentColor;\n    border-color: currentColor transparent transparent currentColor;\n    border-radius: 50%;\n    position: absolute;\n    -webkit-transform: rotate(-45deg);\n            transform: rotate(-45deg);\n    -webkit-animation: inner-rotate 0.5s 1ms linear infinite alternate;\n            animation: inner-rotate 0.5s 1ms linear infinite alternate;\n    color: #7fccf7; }\n  .circle-preloader::after {\n    content: '';\n    top: 0;\n    left: 0;\n    right: -100%;\n    bottom: 0;\n    border: 3px solid currentColor;\n    border-color: currentColor transparent transparent currentColor;\n    border-radius: 50%;\n    position: absolute;\n    -webkit-transform: rotate(-45deg);\n            transform: rotate(-45deg);\n    -webkit-animation: inner-rotate 0.5s 1ms linear infinite alternate;\n            animation: inner-rotate 0.5s 1ms linear infinite alternate;\n    color: #3899ec;\n    opacity: 0; }\n  .circle-preloader.white::before {\n    color: #f0f0f0; }\n  .circle-preloader.white::after {\n    color: #dcdcdc; }\n\n@-webkit-keyframes inner-rotate {\n  to {\n    opacity: 1;\n    -webkit-transform: rotate(115deg);\n            transform: rotate(115deg); } }\n\n@keyframes inner-rotate {\n  to {\n    opacity: 1;\n    -webkit-transform: rotate(115deg);\n            transform: rotate(115deg); } }\n\n@-webkit-keyframes semi-rotate {\n  from {\n    -webkit-animation-timing-function: ease-out;\n            animation-timing-function: ease-out;\n    -webkit-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  45% {\n    -webkit-transform: rotate(198deg);\n            transform: rotate(198deg); }\n  55% {\n    -webkit-transform: rotate(234deg);\n            transform: rotate(234deg); }\n  to {\n    -webkit-transform: rotate(540deg);\n            transform: rotate(540deg); } }\n\n@keyframes semi-rotate {\n  from {\n    -webkit-animation-timing-function: ease-out;\n            animation-timing-function: ease-out;\n    -webkit-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  45% {\n    -webkit-transform: rotate(198deg);\n            transform: rotate(198deg); }\n  55% {\n    -webkit-transform: rotate(234deg);\n            transform: rotate(234deg); }\n  to {\n    -webkit-transform: rotate(540deg);\n            transform: rotate(540deg); } }\n\n.hidden-comp-ghost-mode {\n  opacity: 0.5; }\n\n.collapsed-comp-mode::after {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  content: '';\n  background: -webkit-repeating-linear-gradient(135deg, transparent, transparent 49%, #2b5672 40%, #2b5672 40%, transparent 51%);\n  background: repeating-linear-gradient(-45deg, transparent, transparent 49%, #2b5672 40%, #2b5672 40%, transparent 51%);\n  background-size: 6px 6px;\n  background-repeat: repeat; }\n\n.g-transparent-a:link, .g-transparent-a:visited {\n  border-color: transparent; }\n\n.transitioning-comp * {\n  transition: inherit !important;\n  -webkit-transition: inherit !important; }\n\n.selectionSharerContainer {\n  position: absolute;\n  background-color: #ffffff;\n  box-shadow: 0px 4px 10px 0px rgba(57, 86, 113, 0.24);\n  width: 142px;\n  height: 45px;\n  border-radius: 100px;\n  text-align: center; }\n  .selectionSharerContainer:after {\n    content: \"\";\n    position: absolute;\n    bottom: -10px;\n    left: 42%;\n    /*controls horizontal position */\n    border-width: 10px 10px 0;\n    /* vary these values to change the angle of the vertex */\n    border-style: solid;\n    border-color: #ffffff transparent;\n    /* reduce the damage in FF3.0 */\n    display: block;\n    width: 0; }\n  .selectionSharerContainer .selectionSharerOption {\n    display: inline-block;\n    cursor: pointer;\n    vertical-align: top;\n    padding: 13px 11px 11px 13px;\n    margin: 1px;\n    z-index: -1; }\n  .selectionSharerContainer .selectionSharerVerticalSeparator {\n    margin-top: 9px;\n    margin-bottom: 18px;\n    background-color: #eaf7ff;\n    height: 26px;\n    width: 1px;\n    display: inline-block; }\n/*# sourceMappingURL=viewer.css.map */", ""])
    }, function(e, t) {
        e.exports = function() {
            var e = [];
            return e.toString = function() {
                for (var e = [], t = 0; t < this.length; t++) {
                    var i = this[t];
                    i[2] ? e.push("@media " + i[2] + "{" + i[1] + "}") : e.push(i[1])
                }
                return e.join("")
            }, e.i = function(t, i) {
                "string" == typeof t && (t = [
                    [null, t, ""]
                ]);
                for (var o = {}, n = 0; n < this.length; n++) {
                    var r = this[n][0];
                    "number" == typeof r && (o[r] = !0)
                }
                for (n = 0; n < t.length; n++) {
                    var a = t[n];
                    "number" == typeof a[0] && o[a[0]] || (i && !a[2] ? a[2] = i : i && (a[2] = "(" + a[2] + ") and (" + i + ")"), e.push(a))
                }
            }, e
        }
    }, function(e, t, i) {
        function o(e, t) {
            for (var i = 0; i < e.length; i++) {
                var o = e[i],
                    n = g[o.id];
                if (n) {
                    n.refs++;
                    for (a = 0; a < n.parts.length; a++) n.parts[a](o.parts[a]);
                    for (; a < o.parts.length; a++) n.parts.push(c(o.parts[a], t))
                } else {
                    for (var r = [], a = 0; a < o.parts.length; a++) r.push(c(o.parts[a], t));
                    g[o.id] = {
                        id: o.id,
                        refs: 1,
                        parts: r
                    }
                }
            }
        }

        function n(e) {
            for (var t = [], i = {}, o = 0; o < e.length; o++) {
                var n = e[o],
                    r = n[0],
                    a = {
                        css: n[1],
                        media: n[2],
                        sourceMap: n[3]
                    };
                i[r] ? i[r].parts.push(a) : t.push(i[r] = {
                    id: r,
                    parts: [a]
                })
            }
            return t
        }

        function r(e, t) {
            var i = f(),
                o = v[v.length - 1];
            if ("top" === e.insertAt) o ? o.nextSibling ? i.insertBefore(t, o.nextSibling) : i.appendChild(t) : i.insertBefore(t, i.firstChild), v.push(t);
            else {
                if ("bottom" !== e.insertAt) throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
                i.appendChild(t)
            }
        }

        function a(e) {
            e.parentNode.removeChild(e);
            var t = v.indexOf(e);
            t >= 0 && v.splice(t, 1)
        }

        function s(e) {
            var t = document.createElement("style");
            return t.type = "text/css", r(e, t), t
        }

        function u(e) {
            var t = document.createElement("link");
            return t.rel = "stylesheet", r(e, t), t
        }

        function c(e, t) {
            var i, o, n;
            if (t.singleton) {
                var r = w++;
                i = y || (y = s(t)), o = l.bind(null, i, r, !1), n = l.bind(null, i, r, !0)
            } else e.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (i = u(t), o = d.bind(null, i), n = function() {
                a(i), i.href && URL.revokeObjectURL(i.href)
            }) : (i = s(t), o = h.bind(null, i), n = function() {
                a(i)
            });
            return o(e),
                function(t) {
                    if (t) {
                        if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;
                        o(e = t)
                    } else n()
                }
        }

        function l(e, t, i, o) {
            var n = i ? "" : o.css;
            if (e.styleSheet) e.styleSheet.cssText = C(t, n);
            else {
                var r = document.createTextNode(n),
                    a = e.childNodes;
                a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(r, a[t]) : e.appendChild(r)
            }
        }

        function h(e, t) {
            var i = t.css,
                o = t.media;
            if (o && e.setAttribute("media", o), e.styleSheet) e.styleSheet.cssText = i;
            else {
                for (; e.firstChild;) e.removeChild(e.firstChild);
                e.appendChild(document.createTextNode(i))
            }
        }

        function d(e, t) {
            var i = t.css,
                o = t.sourceMap;
            o && (i += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(o)))) + " */");
            var n = new Blob([i], {
                    type: "text/css"
                }),
                r = e.href;
            e.href = URL.createObjectURL(n), r && URL.revokeObjectURL(r)
        }
        var g = {},
            p = function(e) {
                var t;
                return function() {
                    return void 0 === t && (t = e.apply(this, arguments)), t
                }
            },
            m = p(function() {
                return /msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())
            }),
            f = p(function() {
                return document.head || document.getElementsByTagName("head")[0]
            }),
            y = null,
            w = 0,
            v = [];
        e.exports = function(e, t) {
            void 0 === (t = t || {}).singleton && (t.singleton = m()), void 0 === t.insertAt && (t.insertAt = "bottom");
            var i = n(e);
            return o(i, t),
                function(e) {
                    for (var r = [], a = 0; a < i.length; a++) {
                        var s = i[a];
                        (u = g[s.id]).refs--, r.push(u)
                    }
                    e && o(n(e), t);
                    for (a = 0; a < r.length; a++) {
                        var u = r[a];
                        if (0 === u.refs) {
                            for (var c = 0; c < u.parts.length; c++) u.parts[c]();
                            delete g[u.id]
                        }
                    }
                }
        };
        var C = function() {
            var e = [];
            return function(t, i) {
                return e[t] = i, e.filter(Boolean).join("\n")
            }
        }()
    }])
}), define("layout", ["layout/util/layout", "layout/specificComponents/wixHomepageMenuLayout", "layout/specificComponents/fiveGridLineLayout", "layout/specificComponents/domainSearchLayout", "layout/specificComponents/registerToMeasureOnly", "layout/specificComponents/registerToPureDomMeasure", "layout/specificComponents/areaTooltipLayout", "layout/specificComponents/menuLayout", "layout/specificComponents/sliderGalleryLayout", "layout/specificComponents/verticalMenuLayout", "layout/specificComponents/loginButtonLayout", "layout/specificComponents/dialogLayout", "layout/specificComponents/siteBackgroundLayout", "layout/specificComponents/wPhotoLayout", "layout/specificComponents/documentMediaLayout", "layout/specificComponents/containerAndScreenWidthLayout", "layout/specificComponents/groupLayout", "layout/specificComponents/wixappsLayout", "layout/specificComponents/shapeLayout", "layout/specificComponents/richtextLayout", "layout/specificComponents/matrixGalleryLayout", "layout/specificComponents/slideShowLayout", "layout/specificComponents/anchorLayout", "layout/specificComponents/tinyMenuLayout", "layout/specificComponents/imageZoomLayout", "layout/specificComponents/tpaGalleryLayout", "layout/specificComponents/youTubeSubscribeButtonLayout", "layout/specificComponents/wFacebookCommentLayout", "layout/specificComponents/facebookLikeLayout", "layout/specificComponents/formMixinLayout", "layout/specificComponents/backOfficeTextLayout", "layout/specificComponents/vkShareLayout", "layout/specificComponents/adminLoginLayout", "layout/specificComponents/homePageLoginLayout", "layout/specificComponents/iTunesButtonLayout", "layout/specificComponents/paypalLayout", "layout/specificComponents/bgImageLayout", "layout/specificComponents/wixSiteLayout", "layout/specificComponents/buttonLayout", "layout/wixappsLayout/proxyLayoutRegistrar", "layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout", "layout/wixappsLayout/proxyLayout/galleryProxyLayout", "layout/wixappsLayout/proxyLayout/imageProxyLayout", "layout/wixappsLayout/proxyLayout/buttonProxyLayout", "layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout", "layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout", "layout/specificComponents/imageButtonLayout", "layout/specificComponents/mediaRichTextLayout", "layout/specificComponents/backToTopButtonLayout", "layout/specificComponents/appPartZoomLayout", "layout/specificComponents/facebookShareLayout", "layout/specificComponents/paginatedGridGalleryLayout", "layout/specificComponents/PinterestFollowLayout", "layout/specificComponents/videoLayout", "layout/specificComponents/soundCloudLayout", "layout/specificComponents/verticalLineLayout", "layout/specificComponents/boxSlideShowLayout", "layout/specificComponents/mediaContainerLayout", "layout/specificComponents/mediaControlsLayout", "layout/specificComponents/mediaOverlayControlsLayout", "layout/specificComponents/verticalAnchorsMenuLayout", "layout/specificComponents/columnsLayout", "layout/specificComponents/popupContainerLayout", "layout/specificComponents/comboBoxInputLayout", "layout/specificComponents/textComponentsLayout", "layout/specificComponents/radioButtonLayout", "layout/specificComponents/datePickerLayout", "layout/specificComponents/radioGroupLayout", "layout/specificComponents/gridLayout", "layout/specificComponents/fileUploaderLayout", "layout/specificComponents/appControllerLayout", "layout/specificComponents/linkBarLayout", "layout/specificComponents/flashComponentLayout", "layout/specificComponents/rssButtonLayout", "layout/specificComponents/quickActionBarLayout", "layout/specificComponents/touchMediaZoomLayout", "layout/specificComponents/svgPrimitiveLayout", "layout/specificComponents/viewerLayout"], function(e) {
    return e
});
//# sourceMappingURL=layout.min.js.map"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("layout/util/dataPreparationsForAnchors",["lodash","coreUtils","experiment"],function(e,t,i){function o(){return{flat:{},sortingY:{},minHeight:{},shrinkableContainer:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},locked:{},valueForFirstLockedAnchor:{}}}function n(e){return"Document"===e.type||"wysiwyg.viewer.components.PagesContainer"===e.componentType}function r(e,t,i){var o=e.id;e.layout&&e.layout.rotationInDegrees&&(t.noHeightChange[o]=!0),i.shrinkableContainer[o]?t.shrinkableContainer[o]=!0:n(e,i)&&(t.ignoreOriginalValue[o]=!0)}function a(e,i,o){return t.boundingLayout.getBoundingHeight({height:e,width:i,rotationInDegrees:o})}function s(e,i,o,n){return t.boundingLayout.getBoundingY({y:e,height:i,width:o,rotationInDegrees:n})}function u(e,t,o){var n,r=e.id,u=e.layout?e.layout.rotationInDegrees:0,c=o.height[r];n=i.isOpen("sv_partialReLayout")||i.isOpen("layout_verbs_with_anchors")?o.top[r]:o.top&&void 0!==o.top[r]?o.top[r]:e.layout&&e.layout.y||0,t.currentHeight[e.id]=u?a(c,o.width[r],u):c,t.heightDiff[r]=t.currentHeight[e.id]-c,t.currentY[r]=u?s(n,c,o.width[r],u):n,t.topDiff[r]=n-t.currentY[r]}function c(i,o,n,a,s,h){if(e.has(n.height,i.id)){r(i,o,n),u(i,o,n),o.minHeight[i.id]=l(i,o),o.currentHeight[i.id]=Math.max(o.currentHeight[i.id],o.minHeight[i.id]),o.collapsed[i.id]&&(o.currentHeight[i.id]=0),o.flat[i.id]=i;var d=a+o.currentY[i.id]-s,g=o.currentHeight[i.id];if(o.sortingY[i.id]=d,o.valueForFirstLockedAnchor[i.id]={pusherId:null,value:-Number.MAX_VALUE},!o.collapsed[i.id]){var p=t.dataUtils.getChildrenData(i,h);e.forEach(p,function(e){c(e,o,n,d,g||5e3,h)})}}}function l(e,t){var i=e.id;return i&&!h(i)?Math.max(t.minHeight[i]||0,b):t.minHeight[i]||0}function h(t){return t&&e.includes(C,t)}function d(e,t,i,o){c(e,t,i,0,0,o)}function g(e,t,i){return{distance:i,type:e,targetComponent:t,locked:!0,notEnforcingMinValue:!0}}function p(t,i,o,n){var r=t;return t.$cloned||((r=e.clone(r)).layout=e.clone(r.layout),r.layout.anchors=e.clone(r.layout.anchors),r.$cloned=!0),r.layout.anchors.push(g("TOP_TOP",i,o),g("BOTTOM_BOTTOM",i,n)),r}function m(t){e.forEach(t,function(i,o){if(i.layout&&i.layout.anchors){var n=e.filter(i.layout.anchors,{type:"LOCK_BOTTOM"});e.isEmpty(n)||(e.forEach(n,function(e){t[o]=p(t[o],e.targetComponent,e.topToTop,e.distance),t[e.targetComponent]=p(t[e.targetComponent],o,-1*e.topToTop,-1*e.distance)}),e.remove(t[o].layout.anchors,{type:"LOCK_BOTTOM"}))}})}function f(t){return"wysiwyg.viewer.components.PopupContainer"===e.get(t,"components[0].componentType")}function y(t,i,n){var r=o();r.containerHeightMargin=i.containerHeightMargin||{},r.minHeight=e.clone(i.minHeight||{}),r.collapsed=e.clone(i.collapsed||{}),r.injectedAnchors=i.injectedAnchors||{},r.__isPopup=f(t),d(t,r,i,n),m(r.flat);var a=e.sortBy(e.keys(r.flat),function(e){return r.sortingY[e]});return delete r.sortingY,{structureData:r,sortedIds:a}}function w(t,i){e.forEach(i.flat,function(e,o){t.height[o]=i.currentHeight[o]-i.heightDiff[o],t.top[o]=i.currentY[o]+i.topDiff[o]})}function v(i,o,n,r){if(!e.has(i.height,r.id))return 0;o=o||0,o+=i.top[r.id];var a=t.dataUtils.getChildrenData(r,n);return a=e.reject(a,{layout:{fixedPosition:!0}}),Math.max(o+i.height[r.id],Math.max.apply(null,e.map(a,e.partial(v,i,o,n))))}var C=["WIX_ADS"],b=5;return{getDataForAnchorsAndSort:y,fixMeasureMap:w,maxMeasureMapHeight:v}}),define("layout/util/anchors",["lodash","layout/util/dataPreparationsForAnchors"],function(e,t){function i(e,t,i,o){return t!==i&&(o.dirty[e]=!0,o.changedCompsMap[e]=o.flat[e]),o.dirty[e]}function o(t,i,o,n){var r=o[n.targetComponent],a=o[i];n.notEnforcingMinValue&&!e.isEmpty(a)&&(n.notEnforcingMinValue=!1),r[i]=t;var s=Math.max.apply(null,e.values(r));return n.notEnforcingMinValue&&delete r[i],s}function n(e,t,i,o,n){var r=e.targetComponent,a=t.valueForFirstLockedAnchor[r];a&&(e.locked||null===n?(a.pusherId&&(i[r]={},i[r][a.pusherId]=a.value),delete t.valueForFirstLockedAnchor[r]):(a.pusherId=o,a.value=Math.max(n,a.value)))}function r(e){return e%1}function a(e,t){return t-=r(t-e)}function s(t,i){return e.has(t.currentHeight,i)}function u(e,t,i,o){var n;return o.shrinkableContainer[i]?n=t:e.locked?n=t+e.distance:(n=t+g,o.ignoreOriginalValue[i]||(n=Math.max(n,e.originalValue))),n}function c(t,i,o,n){var r=t;return e.isNumber(n.minHeight[i])&&t<n.minHeight[i]&&(r=n.minHeight[i],o.notEnforcingMinValue&&(o.notEnforcingMinValue=!1,n.dirty[i]=!0,n.changedCompsMap[i]=n.flat[i])),r}function l(e,t,i){return"masterPage"===e?[]:i.injectedAnchors[e]||t[e]||[]}function h(t,i,o,n,r,a){for(var s=!1,u=t.length,c=0;c<u;){var h=function(t){var u=l(t,n,o),c=Number.MAX_VALUE;return!o.dirty[t]||r&&!m[t]||e.forEach(u,function(e){if(f[e.type]&&o.flat[e.targetComponent]&&(!r||m[e.targetComponent])){e.targetComponent===a&&(s=!0);var n=f[e.type](t,e,o)?i[e.targetComponent]:Number.MAX_VALUE;c=Math.min(n,c)}}),o.dirty[t]=!1,c}(t[c]);c=Math.min(c+1,h)}return s}function d(i,o,n,r,a,s,u,c){var l=t.getDataForAnchorsAndSort(i,o,r),d=l.structureData,g=l.sortedIds,m=e.invert(g);d.dirty={},d.toTopAnchorsY={},d.toBottomAnchorsHeight={},d.locked=s,d.changedCompsMap=d.flat,d.ignoreBottomBottom=!!c,e.forEach(d.flat,function(e,t){d.dirty[t]=!0,d.toTopAnchorsY[t]={},d.toBottomAnchorsHeight[t]={}}),u&&(d.changedCompsMap=e.pick(d.flat,e.keys(u)));var f=h(g,m,d,n,a,i.id);return t.fixMeasureMap(o,d),!f&&e.includes(p,i.type)&&(o.height[i.id]=t.maxMeasureMapHeight(o,0,r,i),d.changedCompsMap[i.id]=d.flat[i.id]),d.changedCompsMap}var g=10,p=["Page","Document"],m={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0},f={};return f.TOP_TOP=function(t,r,u){var c=r.targetComponent;if(!s(u,c)||!s(u,t))return!1;if(e.has(u.locked,c))return!1;var l=u.currentY[c],h=u.currentY[t]+r.distance;return n(r,u,u.toTopAnchorsY,t,null),h=o(h,t,u.toTopAnchorsY,r),h=a(l,h),u.currentY[c]=h,i(c,l,h,u)},f.BOTTOM_TOP=function(t,r,u){var c=r.targetComponent;if(!s(u,c)||!s(u,t))return!1;if(e.has(u.locked,c))return!1;var l=u.currentY[c],h=u.currentHeight[t]+u.currentY[t],d=null;return r.locked?h+=r.distance:(d=h+g,h=u.valueForFirstLockedAnchor[c]?Math.max(h+g,r.originalValue):d),h=Math.max(h,u.currentY[t]+u.currentHeight[t]/2),n(r,u,u.toTopAnchorsY,t,d),h=o(h,t,u.toTopAnchorsY,r),h=a(l,h),u.currentY[c]=h,i(c,l,h,u)},f.BOTTOM_PARENT=function(t,n,r){var a=n.targetComponent;if(!s(r,a)||!s(r,t))return!1;if(e.has(r.locked,a))return!1;if(r.flat[a].layout&&r.flat[a].layout.rotationInDegrees)return!1;var l=r.currentHeight[a],h=u(n,r.currentHeight[t]+r.currentY[t]+(r.containerHeightMargin[a]||0),a,r);return h=c(h,a,n,r),h=o(h,t,r.toBottomAnchorsHeight,n),r.currentHeight[a]=h,i(a,l,h,r)},f.BOTTOM_BOTTOM=function(t,n,r){if(r.ignoreBottomBottom)return!1;var a=n.targetComponent;if(!s(r,a)||!s(r,t))return!1;if(e.has(r.locked,a))return!1;if(r.flat[a].layout&&r.flat[a].layout.rotationInDegrees)return!1;var l=r.currentHeight[a],h=u(n,r.currentHeight[t]+r.currentY[t]-r.currentY[a],a,r);return h=c(h,a,n,r),h=o(h,t,r.toBottomAnchorsHeight,n),r.currentHeight[a]=h,i(a,l,h,r)},{enforceAnchors:d,HARD_WIRED_COMPS:m}}),define("layout/util/reduceDistancesAlgorithm/sortByAnchors",["lodash"],function(e){function t(t,i){var o=e.reduce(t,function(t,o){var n=i[o.id];return e.forEach(n,function(e){t[e.targetComponent]=!0}),t},{});return e.filter(t,function(e){return!o[e.id]})}function i(t,i){return e.has(t,i)}function o(o,n){function r(t,o){if(i(a,t)){var s=e.max([a[t],o+1]);a[t]=s;var u=e.map(n[t],"targetComponent");e.forEach(u,function(e){r(e,s)})}}var a=e.reduce(o,function(e,t){return e[t.id]=0,e},{}),s=t(o,n);return e.forEach(s,function(e){r(e.id,0)}),e.sortBy(o,function(e){return a[e.id]})}return o}),define("layout/util/reduceDistancesAlgorithm/anchorsTypes",[],function(){return{TOP_TOP:"TOP_TOP",BOTTOM_TOP:"BOTTOM_TOP",BOTTOM_PARENT:"BOTTOM_PARENT"}}),define("layout/util/reduceDistancesAlgorithm/createAnchorsDataManager",["lodash","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t){function i(i,o,r,a){function s(e){h.from[e.fromComp]=h.from[e.fromComp]||[],h.from[e.fromComp].push(e),h.to[e.targetComponent]=h.to[e.targetComponent]||[],h.to[e.targetComponent].push(e)}function u(t){a[t.targetComponent]&&(t=e.assign({},t,{locked:!0,distance:0})),d.from[t.fromComp]=t,d.to[t.targetComponent]=d.to[t.targetComponent]||[],d.to[t.targetComponent].push(t)}function c(t){return r?n[t.fromComp]&&n[t.targetComponent]:e.has(o,t.fromComp)&&e.has(o,t.targetComponent)}var l=e.flatten(e.values(i)),h={from:{},to:{}},d={from:{},to:{}},g=e.filter(l,c);return e.forEach(g,function(e){e.type===t.BOTTOM_PARENT?u(e):s(e)}),{anchors:g,siblingsAnchors:h,childToParentAnchors:d}}function o(t,o,n,r){var a=i(t,o,n,r);e.merge(this,{getComponentPushers:function(e){return a.siblingsAnchors.to[e]||[]},getComponentAnchorToParent:function(e){return a.childToParentAnchors.from[e]}})}var n={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0};return function(e,t,i,n){return new o(e,t,i,n)}}),define("layout/util/reduceDistancesAlgorithm/createMeasureMapManager",["lodash","coreUtils"],function(e,t){function i(e,i,o){return t.boundingLayout.getBoundingHeight({height:e,width:i,rotationInDegrees:o})}function o(e,i,o,n){return t.boundingLayout.getBoundingY({y:e,height:i,width:o,rotationInDegrees:n})}function n(t,n){return e(n).pickBy(function(t){return e.get(t,"layout.rotationInDegrees")}).mapValues(function(e,n){var r=t.top[n],a=t.height[n],s=t.width[n];return{heightDiff:i(a,s,e.layout.rotationInDegrees)-a,yDiff:o(r,a,s,e.layout.rotationInDegrees)-r}}).value()}function r(t,i){function o(t){return e.get(u,[t,"yDiff"],0)}function r(t){return e.get(u,[t,"heightDiff"],0)}var s=t,u=n(t,i);e.merge(this,{get:function(){return s},getComponentTop:function(t){if(!e.isUndefined(s.top[t]))return s.top[t]+o(t)},getComponentHeight:function(t){if(!e.isUndefined(s.height[t]))return s.collapsed[t]?0:s.height[t]+r(t)},getComponentMinHeight:function(t){return s.collapsed[t]?0:e.max([s.minHeight[t],a])},getContainerHeightMargin:function(e){return s.containerHeightMargin[e]||0},isCollapsed:function(e){return Boolean(s.collapsed[e])},isShrinkableContainer:function(e){return Boolean(s.shrinkableContainer[e])},getComponentWidth:function(e){return s.width[e]},getSiteWidth:function(){return s.width.site},getClientSize:function(){return{width:s.clientWidth,height:s.clientHeight}},setComponentTop:function(e,t){s.top[e]=t-o(e)},setComponentHeight:function(e,t){s.height[e]=t-r(e)}})}var a=5;return function(e,t){return new r(e,t)}}),define("layout/util/reduceDistancesAlgorithm/createOriginalValuesManager",["lodash"],function(e){function t(t,i){e.merge(this,{getOriginalTop:function(o){return e.get(t,[o,"top"])||i[o].y},getOriginalHeight:function(o){return e.get(t,[o,"height"])||i[o].height}})}return function(e,i){return new t(e,i)}}),define("layout/util/reduceDistancesAlgorithm/generateEnforceData",["lodash","coreUtils","siteUtils","layout/util/reduceDistancesAlgorithm/sortByAnchors","layout/util/reduceDistancesAlgorithm/createAnchorsDataManager","layout/util/reduceDistancesAlgorithm/createMeasureMapManager","layout/util/reduceDistancesAlgorithm/createOriginalValuesManager"],function(e,t,i,o,n,r,a){function s(t){function i(t){o[t.id]=t,e.forEach(t.children,i)}var o={};return i(t),o}function u(i,n,r){function a(i){var s=m[i.id],u=t.dataUtils.getChildrenKey(i,r),c=i[u],l=e.omit(i,u);if(s){var h=e.reduce(c,function(t,i){return e.includes(s,i.id)&&t.push(a(i)),t},[]);l.children=o(h,n)}else l.children=[];return l}return e.find(m.ROOT,function(e){return e===i.id})?a(i):null}function c(i,n,r,a){function s(i){var u=t.dataUtils.getChildrenKey(i,a),c=i[u],l=e.omit(i,u),h=Boolean(n.collapsed[i.id])?[]:e(c).filter(function(t){return e.has(n.height,t.id)}).map(s).value();return l.children=o(h,r),l}return s(i)}function l(e,t,i,o,n){return o?u(e,i,n):c(e,t,i,n)}function h(t,i,o,n){var r=e.get(o,[t.id,n]);return e.merge({},r,i.injectedAnchors)}function d(e,t,i,o){return n(e,o,i,t.shrinkableContainer)}function g(t,i,o,n){var r=e.get(i,[t.id,o]);return a(r,n)}function p(o,n){return e.mapValues(o,function(o){if(o.layout){var r=e.cloneDeep(o.layout);if(e.assign(r,t.boundingLayout.getBoundingLayout(o.layout)),i.layout.isVerticallyStretchedToScreen(r)){r.isVerticallyStretchedToScreen=!0;var a={width:n.clientWidth,height:n.clientHeight},s=n.width.site;r.minHeight=i.positionAndSize.getHeightInPixelsRounded(o.layout,null,a,s),delete r.docked.top,delete r.docked.bottom}return r}})}var m={ROOT:["masterPage","SITE_BACKGROUND"],masterPage:["SITE_HEADER","PAGES_CONTAINER","SITE_FOOTER"],PAGES_CONTAINER:["SITE_PAGES"]};return function(e,t,o,n,a,u,c){var m=a?i.constants.VIEW_MODES.MOBILE:i.constants.VIEW_MODES.DESKTOP,f=h(e,t,o,m),y=l(e,t,f,u,a);if(!y)return null;var w=s(y),v=p(w,t);return{structure:y,flatDataMap:w,layoutsMap:v,measureMapManager:r(t,w),anchorsDataManager:d(f,t,u,w),originalValuesManager:g(e,n,m,v),lockedCompsMap:c||{}}}}),define("layout/util/reduceDistancesAlgorithm/minHeightDataUtils",["lodash"],function(e){function t(e){var t=e.absoluteHeight;if(e.topPercents||e.bottomPercents){var i=1-((e.topPercents||0)+(e.bottomPercents||0))/100;return Math.ceil(t/i)}return t}function i(t,i){return e.reduce(t,function(e,t){var o=Math.ceil(t.topPercents/100*i),n=Math.ceil(t.bottomPercents/100*i),r=o+t.absoluteHeight+n;return r>e?r:e},i)}function o(e){return!e.topPercents&&!e.bottomPercents}function n(e,t,i){this.absoluteHeight=e||0,t&&(this.topPercents=t),i&&(this.bottomPercents=i)}function r(e,t,i){return new n(e,t,i)}function a(e){return new n(e.px,e.pct)}function s(e){return new n(e.px,null,e.pct)}function u(t){var i,o;return e.isNumber(t.pct)&&(t.pct<0?o=2*Math.abs(t.pct):i=2*t.pct),new n(2*Math.abs(t.px),i,o)}function c(e,t){this.absoluteHeight=e,this.dynamicHeights=t}function l(t){var i=0,n=[];return e.forEach(t,function(e){o(e)?i=Math.max(i,e.absoluteHeight):n.push(e)}),new c(i,n)}return n.prototype.clone=function(){return new n(this.absoluteHeight,this.topPercents,this.bottomPercents)},n.prototype.addAbsoluteHeight=function(e){return this.absoluteHeight+=e,this},n.prototype.addMinHeightData=function(e){this.absoluteHeight+=e.absoluteHeight;var t=(this.topPercents||0)+(e.topPercents||0);t&&(this.topPercents=t);var i=(this.bottomPercents||0)+(e.bottomPercents||0);return i&&(this.bottomPercents=i),this},c.prototype.merge=function(e){return this.dynamicHeights=this.dynamicHeights.concat(e.dynamicHeights),this.absoluteHeight=Math.max(this.absoluteHeight,e.absoluteHeight),this},c.prototype.solve=function(){if(e.isEmpty(this.dynamicHeights))return this.absoluteHeight;var o=Math.ceil(e(this.dynamicHeights).map(t).max()),n=Math.max(this.absoluteHeight,o);return i(this.dynamicHeights,n)},{createMinHeightData:r,createMinHeightDataForDockedTopData:a,createMinHeightDataForDockedBottomData:s,createMinHeightDataForVerticallyCenteredDockedData:u,createChainMinHeightData:l}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils",[],function(){return{getAnchorMinDistance:function(e){return e.locked?e.distance:10}}}),define("layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight",["lodash","siteUtils","layout/util/reduceDistancesAlgorithm/minHeightDataUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t,i,o,n){function r(e){var o=t.layout.getTopDockData(e);return o?i.createMinHeightDataForDockedTopData(o):i.createMinHeightData(e.y)}function a(e,o,n){var a=i.createMinHeightData(),s=r(e),u=t.layout.isDockedToDirection(e,"top");return o||u||!n||s.absoluteHeight<0?s:a}function s(t,i,r){var a=r.type===n.TOP_TOP?0:i,s=o.getAnchorMinDistance(r);return e.map(t,function(e){var t=a+s;return e.clone().addAbsoluteHeight(t)})}function u(n,r,u,c,l,h){function d(e,t){t&&t.locked&&(C.isShrinkableContainer=!0),C.chainsMinHeightData.merge(e)}function g(e,t){var i=h[e];return{forNonDocked:[a(i,t,!1)],forDocked:[a(i,t,!0)]}}function p(t,o){var n=!1,r=[],a=[];if(e.forEach(o,function(e){e.locked&&(n=!0);var t=b[e.fromComp],i=c[e.fromComp];r=r.concat(s(t.forDocked,i,e)),a=a.concat(s(t.forNonDocked,i,e))}),!n){var u=l.getOriginalTop(t),h=i.createMinHeightData(u);a.push(h)}return{forDocked:r,forNonDocked:a}}function m(e){var n,a=t.layout.getBottomDockData(h[e]);if(a)n=i.createMinHeightDataForDockedBottomData(a);else{var s=r.getComponentAnchorToParent(e);n=i.createMinHeightData(o.getAnchorMinDistance(s))}var u=c[e];return n.clone().addAbsoluteHeight(u)}function f(t,o,r){var a=o?r.forDocked:r.forNonDocked,s=m(t,n),u=e.map(a,function(e){return e.clone().addMinHeightData(s)});return i.createChainMinHeightData(u)}function y(e,o){var n=t.layout.getVerticallyCenteredDockData(o),r=c[e],a=i.createMinHeightDataForVerticallyCenteredDockedData(n).addAbsoluteHeight(r);return i.createChainMinHeightData([a])}function w(t){var i=r.getComponentPushers(t),o=e.isEmpty(i),n=!!u[t];return o||n?g(t,n):p(t,i)}function v(e){if(t.layout.isVerticallyCentered(h[e.id]))d(y(e.id,h[e.id]));else{var i=w(e.id);b[e.id]=i;var o=r.getComponentAnchorToParent(e.id),n=!!o,a=t.layout.isDockedToDirection(h[e.id],"bottom");(a||n)&&d(f(e.id,a,i),o)}}var C={value:0,chainsMinHeightData:i.createChainMinHeightData(),isShrinkableContainer:!1},b={};return function(){return e.forEach(n.children,v),C.value=C.chainsMinHeightData.solve(),delete C.chainsMinHeightData,C}()}return function(i,o,n,r,a,s){function c(e,t,i){var n=[],a=s[e.id];if(!a)return n;var u=a.aspectRatio||0,c=i||a.isVerticallyStretchedToScreen||u||o.isShrinkableContainer(e.id)||t&&t.isShrinkableContainer;if(u){var l=o.getComponentWidth(e.id);n.push(u*l)}if(t&&(n.push(t.value+o.getContainerHeightMargin(e.id)),!c)){var h=r.getOriginalHeight(e.id);n.push(h)}if(c){var d=o.getComponentMinHeight(e.id),g=a.minHeight||0;n.push(d,g)}return n}function l(t,i,n){n?(i.length&&o.setComponentHeight(t,e.max(i)),p[t]=o.getComponentHeight(t)):p[t]=i.length?e.max(i):0}function h(e,i){if(o.isCollapsed(e.id))return o.setComponentHeight(e.id,0),void(p[e.id]=0);var n=t.layout.isVerticallyStretched(s[e.id]),r=c(e,i,n);l(e.id,r,!n)}function d(e){return!o.isCollapsed(e)}function g(t){var i,o=t.children,c=a[t.id];!e.isEmpty(o)&&d(t.id)&&(e.forEach(o,g),c||(i=u(t,n,a,p,r,s))),h(t,i)}var p={};g(i)}}),define("layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking",["lodash","siteUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t,i,o){function n(e,i,o){var n=o.getComponentHeight(i),r=o.getComponentWidth(i),a=o.getClientSize(),s=o.getSiteWidth();return t.positionAndSize.getHeightInPixelsRounded(e,{width:r,height:n},a,s)}function r(e,i,o,n){var r={width:n.getComponentWidth(o),height:n.getComponentHeight(o)},a=n.getClientSize(),s=n.getComponentHeight(e);return t.positionAndSize.getYInPixelsRounded(i,r,a,s)}function a(t,n,r,a){var s=[],u=e.every(n,{locked:!1});return e.forEach(n,function(e){if(u){var n=r.getOriginalTop(t);s.push(n)}var c=a.getComponentTop(e.fromComp)+(e.type===o.TOP_TOP?0:a.getComponentHeight(e.fromComp))+i.getAnchorMinDistance(e);s.push(c)}),e.max(s)}function s(t,n){var r=[];return e.some(t,"locked")?(e.forEach(t,function(e){var t=n.getComponentTop(e.fromComp)+(e.type===o.TOP_TOP?0:n.getComponentHeight(e.fromComp))+i.getAnchorMinDistance(e);r.push(t)}),e.max(r)):null}function u(e){return t.layout.isDockedToDirection(e,"bottom")}return function(o,c,l,h,d,g){function p(e,t){var i=r(e.id,g[e.id],t,c);c.setComponentTop(e.id,i)}function m(e,i){if(t.layout.isVerticallyStretched(g[e.id])&&!c.isCollapsed(e.id)){var o=n(g[e.id],i,c);c.setComponentHeight(e.id,o)}}function f(e,t){p(e,t.id),m(e,t.id)}function y(t){var i=l.getComponentPushers(t.id);if(!e.isEmpty(i)){var o=s(i,c);null!==o&&c.setComponentTop(t.id,o)}}function w(t){var i=l.getComponentPushers(t.id);if(!d[t.id])if(e.isEmpty(i))c.setComponentTop(t.id,h.getOriginalTop(t.id));else{var o=a(t.id,i,h,c);c.setComponentTop(t.id,o)}}function v(i,o){e.forEach(i,function(e){t.layout.isVerticallyDocked(g[e.id])?f(e,o):w(e)})}function C(i,o){e.forEach(i,function(e){var i=t.layout.isDockedToDirection(g[e.id],"top"),n=t.layout.isDockedToDirection(g[e.id],"bottom");i||n||y(e,o)})}function b(t){function o(e,t){var i=c.getComponentTop(e),o=t-c.getComponentHeight(e);return o>=i?null:(c.setComponentTop(e,o),a=!0,o)}function n(t,r){var a=t.fromComp,s=o(a,r-i.getAnchorMinDistance(t));if(null!==s){var u=l.getComponentPushers(a);e.forEach(u,function(e){n(e,s)})}}function r(t){var i=c.getComponentTop(t),o=l.getComponentPushers(t);e.forEach(o,function(e){n(e,i)})}var a=!1,s=e.filter(t,function(e){return u(g[e.id])});return e.forEach(s,function(e){r(e.id)}),a}function M(e){return!c.isCollapsed(e)}function S(t){var i=t.children;!e.isEmpty(i)&&M(t.id)&&(v(i,t),b(i)&&C(i,t),e.forEach(i,S))}S(o)}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm",["layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight","layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking"],function(e,t){return{enforce:function(i){return e(i.structure,i.measureMapManager,i.anchorsDataManager,i.originalValuesManager,i.lockedCompsMap,i.layoutsMap),t(i.structure,i.measureMapManager,i.anchorsDataManager,i.originalValuesManager,i.lockedCompsMap,i.layoutsMap),i.flatDataMap}}}),define("layout/util/layoutAlgorithm",["lodash","experiment","coreUtils","siteUtils","layout/util/anchors","layout/util/reduceDistancesAlgorithm/generateEnforceData","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm"],function(e,t,i,o,n,r,a){function s(t,o,n){function r(t){e.has(o.height,t.id)&&(a[t.id]=t,e.forEach(i.dataUtils.getChildrenData(t,n),r))}var a={};return r(t),a}return{enforceStructure:function(i,u,c,l,h,d,g,p,m){var f=h?o.constants.VIEW_MODES.MOBILE:o.constants.VIEW_MODES.DESKTOP,y=e.get(c,[i.id,f]);if(y){if(t.isOpen("layout_verbs_with_anchors")){var w=r(i,u,c,l,h,d,g);return w?a.enforce(w):{}}return n.enforceAnchors(i,u,y,h,d,g,p,m)}return s(i,u,h)}}}),define("layout/util/createDOMPatchers",["zepto","lodash","loggingUtils"],function(e,t,i){function o(t,o,n){t[o]?e(t[o]).css(n):i.log.error("Cannot find node with id {"+o+"} to patch css. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function n(t,o,n){t[o]?e(t[o]).attr(n):i.log.error("Cannot find node with id {"+o+"} to patch attributes. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function r(e,o,n){e[o]?t.forEach(t.keys(n),function(t){e[o][t]=n[t]}):i.log.error("Cannot find node with id {"+o+"} to patch events. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function a(o,n,r){if(o[n]){var a=e(o[n]);t.forOwn(r,function(e,t){a.data(t,e)})}else i.log.error("Cannot find node with id {"+n+"} to patch data. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function s(e){return{css:t.partial(o,e),attr:t.partial(n,e),data:t.partial(a,e),events:t.partial(r,e)}}return s}),define("layout/util/rootLayoutUtils",["lodash","siteUtils"],function(e,t){return{getRootWidth:function(e,i,o){return t.layout.getRootWidth(i,o,e.getSiteWidth())},getRootLeft:function(e,i,o){return t.layout.getRootLeft(i,o,e.getSiteX())}}}),define("layout/util/singleCompLayout",["lodash","coreUtils","siteUtils","layout/util/rootLayoutUtils","experiment"],function(e,t,i,o,n){function r(e){return"fixed"===e.position}function a(e){return i.layout.isHorizontallyStretched(e.layout)}function s(e){return P[e.componentType]}function u(e){return i.layout.isVerticallyStretched(e.layout)}function c(e){return P[e.componentType]}function l(e,t,i){var o=i.zIndex;"auto"!==o&&(o=parseFloat(o),isNaN(o)||(e.zIndex[t]=o))}function h(e,t,i,o){r(o)&&(e.fixed[t]=!0,e.top[t]=i.offsetTop,e.left[t]=i.offsetLeft)}function d(t,i,o,n){var r=e.get(n,"layout.width",0);a(n)?t.width[i]=o.offsetWidth:s(n)||!e.get(n,"layout.width")?t.width[i]=Math.max(o.offsetWidth,r):t.width[i]=r}function g(e,t,i){e.top[t]=i.offsetTop}function p(t,i,o,n){var r=e.get(n,"layout.height",0),a=e.get(n,"layout.aspectRatio",0);a&&(r=a*t.width[i]),u(n)?t.height[i]=o.offsetHeight:c(n)||!e.get(n,"layout.height")?t.height[i]=Math.max(o.offsetHeight,r):t.height[i]=r}function m(t,i,o,n){var r=e.get(n,"layout.width",0),a=e.get(n,"layout.height",0);t.width[i]=r,t.height[i]=a}function f(t,i){var o=i.offsetLeft,n=e.get(t,"layout.x",0);return.5===Math.abs(n-o)?n:o}function y(e,t,i,o){if(o.isDeadComp[e])m(o,e,t,i);else{var r=window.getComputedStyle(t);h(o,e,t,r),l(o,e,r),d(o,e,t,i),p(o,e,t,i),(n.isOpen("layout_verbs_with_anchors")||n.isOpen("sv_partialReLayout"))&&g(o,e,t),o.left[e]=f(i,t)}}function w(e){return e.getAttribute("data-dead-comp")}function v(e,t){if(!e)return!1;var i=t(e);return i||!1}function C(e,t,i,o,n,r){var a=t.id,s=v(a,i);s&&(n[a]=s,y(a,s,e,o),w(s)?o.isDeadComp[a]=!0:(E[t.type]&&E[t.type](a,o,n,r,t),L[t.type]&&L[t.type](a,o,n,r,t)))}function b(t,i,o,n,r){var a=t.id,s=v(a,i);if(s&&!w(s)&&D[t.type]){var u=D[t.type];"function"==typeof u&&(u=u(r,a,n,t)),e.forEach(u,function(s){var u=e.isPlainObject(s),c=u?s.pathArray:s,l=i.apply(void 0,[a].concat(c))||i.apply(void 0,[a,"component"].concat(c));if(l){var h=c.join(""),d=a+h;n[d]=l,o.height[d]=l.offsetHeight,o.width[d]=l.offsetWidth,u&&L[s.type]&&L[s.type](d,o,n,r,t)}})}}function M(t,o,n,r){var a={};r&&(i.layout.isVerticallyDocked(r)&&!i.layout.isVerticallyStretchedToScreen(r)||(a.top=x(n.top[t])),i.layout.isVerticallyStretched(r)&&!i.layout.isVerticallyStretchedToScreen(r)||(a.height=x(n.height[t])),e.isEmpty(a)||o.css(t,a))}function S(i,n,r,a,s){var u=a.layout;if(u&&t.dockUtils.isHorizontalDockToScreen(u)){var c=o.getRootWidth(s,r,a.rootId),l=0-o.getRootLeft(s,r,a.rootId),h=t.dockUtils.getDockedStyle(u,s.getPageBottomMargin(),s.getScreenWidth(),c,l),d=e.pick(h,["left","width"]);r.left[i]=parseInt(d.left,10),n.css(i,d)}}function I(e,t,i,o,n){var r=e.id;M(r,t,o,e.layout),S(r,t,o,e,n);var a=o.isDeadComp[r],s=!1;return!a&&A[e.type]?s=A[e.type](r,i,o,e,n):!a&&B[e.type]&&(s=B[e.type](r,t,o,e,n)),s}function T(e,t,i,o){var n=e.id,r=!1;return!i.isDeadComp[n]&&B[e.type]&&(r=B[e.type](n,t,i,e,o)),r}var x=t.style.unitize,A={},L={},P={},D={},E={},B={};return{patchWithoutPositioning:T,patchComponent:I,measureComponent:C,measureComponentChildren:b,isComponentDead:w,registerPatcher:function(e,t){A[e]=t},registerSAFEPatcher:function(e,t){B[e]=t},registerPatchers:function(t,i){A[t]=function(){var t=arguments;e.forEach(i,function(e){e.apply(null,t)})}},registerSAFEPatchers:function(t,i){B[t]=function(){var t=arguments;e.forEach(i,function(e){e.apply(null,t)})}},registerCustomMeasure:function(e,t){L[e]=t},registerRequestToMeasureDom:function(e){P[e]=!0},registerRequestToMeasureChildren:function(e,t){D[e]=t},registerAdditionalMeasureFunction:function(e,t){E[e]=t},maps:{classBasedMeasureChildren:D,classBasedCustomMeasures:L,classBasedPatchers:A}}}),define("layout/util/bodyNodePatcher",["zepto","lodash"],function(e,t){return{updateBodyNodeStyle:function(i){var o=e("body"),n=e("html");if(i.isQaMode()&&o.addClass("qa-mode"),i.isMobileView()?(o.addClass("device-mobile-optimized"),n.addClass("device-mobile-optimized")):i.isMobileDevice()||i.isTabletDevice()?o.addClass("device-mobile-non-optimized"):(o.removeClass("device-mobile-optimized").removeClass("device-mobile-non-optimized"),n.removeClass("device-mobile-optimized")),i.isMobileDevice()){var r=t.assign({},i.os,i.browser),a=t(r).keys().filter(function(e){return!0===r[e]}).map(function(e){return"device-"+e}).join(" ");n.addClass(a)}var s=o.css("overflow"),u=i.renderFlags.allowSiteOverflow?null:"hidden";s!==u&&o.css("overflow",u)}}}),define("layout/util/iframesPatcher",["zepto","lodash"],function(e,t){return{setIframesSrc:function(){var i=e("iframe[data-src]");t.forEach(i,function(e){var t=e.getAttribute("src"),i=e.getAttribute("data-src");i&&(t!==i&&e.setAttribute("src",i),e.removeAttribute("data-src"))})}}}),define("layout/util/layout",["zepto","lodash","layout/util/anchors","layout/util/layoutAlgorithm","coreUtils","loggingUtils","layout/util/createDOMPatchers","layout/util/singleCompLayout","layout/util/bodyNodePatcher","layout/util/iframesPatcher","experiment"],function(e,t,i,o,n,r,a,s,u,c,l){function h(e,i){var o=t.last(e),r=n.dataUtils.getChildrenData(o,i);return t.transform(r,function(e,t){e[t.id]=!0},{})}function d(e,t,i){return e&&Math.max(t,Math.min(i,e))}function g(e,o){if(l.isOpen("sv_partialReLayout"))return!(!e||e[o.id]);var n=e;return n&&!n[o.id]&&!i.HARD_WIRED_COMPS[o.id]&&!t.has(Q,o.type)}function p(e){return e.componentType||e.documentType}function m(e,i,o){var r=i.getSiteData(),a=e.layout,s={dataItem:e.dataItem||null,propertiesItem:e.propertiesItem||null,layout:a,styleItem:null,id:e.id,type:p(e),structure:e,rootId:o};return s.layout&&(t.isFinite(s.layout.height)&&(s.layout.height=d(s.layout.height,n.siteConstants.COMP_SIZE.MIN_HEIGHT,n.siteConstants.COMP_SIZE.MAX_HEIGHT)),t.isFinite(s.layout.width)&&(s.layout.width=d(s.layout.width,n.siteConstants.COMP_SIZE.MIN_WIDTH,n.siteConstants.COMP_SIZE.MAX_WIDTH))),e.dataQuery&&!s.dataItem&&(s.dataItem=r.getDataByQuery(e.dataQuery,o)),e.propertyQuery&&!e.propertiesItem&&(s.propertiesItem=r.getDataByQuery(e.propertyQuery,o,r.dataTypes.PROPERTIES)),(e.behaviorQuery||e.behaviors)&&(s.behaviorsItem=e.behaviors||t.get(r.getDataByQuery(e.behaviorQuery,o,r.dataTypes.BEHAVIORS),"items")),e.designQuery&&(s.designDataItem=r.getDataByQuery(e.designQuery,o,r.dataTypes.DESIGN)),e.styleId&&(s.styleItem=r.getDataByQuery(e.styleId,o,r.dataTypes.THEME)),s}function f(e,t){return Boolean(t.collapsed[e])}function y(e,i,o,n,r,a,u){var c=r.getSiteData(),h=[],d=t(o).keys().filter(function(e){return!f(e,n)}).value();return t.forEach(d,function(t){var d=m(o[t],r,a);!l.isOpen("sv_partialReLayout")&&g(u,d)||s.patchComponent(d,e,i,n,c)&&h.push(t)}),h}function w(e,i,o,n,r,s){var u=[],c=a(o);return t.forEach(e,function(e,t){u=u.concat(y(c,o,n[t],i,r,e.pageId,s))}),u}function v(t,i,o,n,r,a,s){var u=e(i(t.id));u.attr("data-leaving")||(u.attr("data-collapsed")?C(t,i,o,n,r,a,s):Y[t.componentType]?b(t,i,o,n,r,a,s):M(t,i,o,n,r,a,s))}function C(e,t,i,o,n,r,a){var s=n.getSiteData(),u=m(e,n,r);g(a,u)||(S(e,t,o),i.collapsed[e.id]=!0,T(u,t,i,o,s,e,a))}function b(e,t,i,o,n,r,a){var s=n.getSiteData(),u=m(e,n,r);S(e,t,o),I(u,n,t,i,o,r,a),i.collapsed[e.id]=!1,T(u,t,i,o,s,e,a)}function M(e,t,i,o,n,r,a){var s=n.getSiteData(),u=m(e,n,r);S(e,t,o),i.collapsed[e.id]=!1,T(u,t,i,o,s,e,a),I(u,n,t,i,o,r,a)}function S(e,t,i){var o=t(e.id);o&&(i[e.id]=o)}function I(e,i,o,r,a,s,u){var c=i.getSiteData(),l=n.dataUtils.getChildrenData(e.structure,c.isMobileView());t.forEach(l,function(e){v(e,o,r,a,i,s,u)})}function T(e,t,i,o,n,r,a){g(a,e)||(s.measureComponentChildren(e,t,i,o,n),s.measureComponent(r,e,t,i,o,n))}function x(e,i,o,n,r){t.forOwn(e,function(e){v(e.structure,e.getDomNodeFunc,i,o,n,e.pageId,r)})}function A(e,i,n,r,a,s){var u,c={},l=n.getSiteData();l.originalValuesMap=l.originalValuesMap||{};var h=l.isMobileView();return e.inner&&(u=l.isRootIgnoreBottomBottom(t.get(e,"inner.structure.id")),c.inner=o.enforceStructure(e.inner.structure,i,l.anchorsMap,l.originalValuesMap,h,r,a,s,u),i.height.SITE_PAGES&&(i.height.SITE_PAGES=i.height[e.inner.pageId])),t.forOwn(e,function(e,n){"inner"!==n&&(u=l.isRootIgnoreBottomBottom(t.get(e,["structure","id"])),c[n]=o.enforceStructure(e.structure,i,l.anchorsMap,l.originalValuesMap,h,r,a,s,u))}),c}function L(e,i,o,r,a,s){var u=e.id;if(s=s||i.fixed[u],u){var c=i.top[u]||0,l=i.left[u]||0;i.fixed[u]?(r=c,a=l):(r+=c,a+=l),i.absoluteTop[u]=r,i.absoluteLeft[u]=a,s&&(i.shownInFixed[u]=!0)}var h=n.dataUtils.getChildrenData(e,o);t.forEach(h,function(e){L(e,i,o,r,a,s)})}function P(e,i,o){var n=t.sortBy(t.keys(e),function(e){return"inner"===e?1:0});t.forEach(n,function(t){L(e[t].structure,i,o,"inner"===t?i.absoluteTop.SITE_PAGES:0,"inner"===t?i.absoluteLeft.SITE_PAGES:0)})}function D(e,i,o,r,a){var u=e.id&&i(e.id);if(!u||!s.isComponentDead(u)){u&&G[e.componentType]&&r.push({anchorsMap:a,structure:e,getDomNodeFunc:i,domNode:u});var c=o.getSiteData().isMobileView(),l=n.dataUtils.getChildrenData(e,c);t.forEach(l,function(e){D(e,i,o,r,a)})}}function E(e,o,n,r,a,s,u,c){var l=[],h={},d=a.getSiteData(),g=d.isMobileView();return t.forEach(e,function(e){var n=m(e.structure,a),p=G[n.structure.componentType].measure(n,e.domNode,o,r,d,function(t){v(t,e.getDomNodeFunc,o,r,a,n.rootId,c)},function(t){return i.enforceAnchors(t,o,e.anchorsMap,g,u,s,c)});p.needsAdditionalInnerLayout&&l.push(e),p.changedCompsMap&&t.assign(h,p.changedCompsMap)}),t.forEach(e,function(e){var t=m(e.structure,a);e.skipPatch||G[t.structure.componentType].patch(t,o,n,r,a.getSiteData())}),{compsToInnerLayoutAgain:l,changedComps:h}}function B(e,i,o,n,r,s,u){var c=n.getSiteData(),l=c.getViewMode(),h={},d=[];t.forOwn(e,function(e){var i=t.get(e,"structure.id"),o=t.get(c.anchorsMap,[i,l]);D(e.structure,e.getDomNodeFunc,n,d,o)}),d.reverse();for(var g=d,p=0,m=a(o);g.length&&p<3;){var f=E(g,i,m,o,n,r,s,u);g=f.compsToInnerLayoutAgain,h=t.assign(h,f.changedComps),p++}return h}function R(i){var o=(V=e("#SITE_ROOT")).offset()||{top:0},n={pageBottomByComponents:{},collapsed:{},height:{},width:{},availHeight:{},availWidth:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},left:{},absoluteTop:{},absoluteLeft:{},fixed:{},shownInFixed:{},zIndex:{},isDeadComp:{},siteMarginBottom:t.parseInt(V.css("padding-bottom"),10)||0,siteOffsetTop:o.top,clientWidth:0,skipPatch:{},shrinkableContainer:{},injectedAnchors:{}};n.clientWidth=i.getBodyClientWidth(),l.isOpen("onboardingviewportmode")?n.clientHeight=H(i):n.clientHeight=window.document.documentElement.clientHeight,n.width.screen=i.getScreenWidth(),n.width.site=i.getSiteWidth(),n.height.screen=n.clientHeight,n.innerHeight.screen=window.innerHeight,n.innerWidth.screen=window.innerWidth;var r=i.mobile.getScreenDimensions();return n.height.device=r.height,n.width.device=r.width,n.availHeight.device=r.availHeight,n.availWidth.device=r.availWidth,n.devicePixelRatio=i.mobile.getDevicePixelRatio(),n}function H(e){var i=t.get(e.renderFlags,"onboardingViewportMode","auto");return"parent"===i?window.parent.document.documentElement.clientHeight:/fixed:/.test(i)?parseInt(i.split(":")[1],10):window.document.documentElement.clientHeight}function k(e,i){return t.forOwn(i,function(t,i){delete e.top[i]}),e}function O(e,i){var o=q[e.siteId]||{};return t.omitBy(o,t.keys(i))}function W(e,i){var o=t.last(e);return o&&j[o.componentType]?j[o.componentType](e,i):null}function _(e,i,o){var r=t.last(e),a={};i[r.id]&&t.assign(a,W(e,o));var s=n.dataUtils.getChildrenData(r,o);return t.forEach(s,function(n){t.assign(a,_(e.concat([n]),i,o))}),a}function F(e,i,o){var n={};return t.forOwn(i,function(i){t.assign(n,_([i.structure],e,o))}),n}function U(e,o,r,a,s){var u={};return t.assign(u,o,r,i.HARD_WIRED_COMPS,n.arrayUtils.toTrueObj(a)),t.assign(u,F(u,e,s)),u}function N(e){var i=t(e).values().flatMap(t.keys).value();return n.arrayUtils.toTrueObj(i)}function z(e,t,i,o,n){l.isOpen("sv_reportPerformance")&&(r.performance.clearMeasures(Z),r.performance.start(Z));var a=t.getSiteData(),s=a.isMobileView();a.updateScreenSize(),delete e.undefined;var u,h=l.isOpen("sv_partialReLayout")?O(a,n):{},d=!1,g=B(e,u=l.isOpen("sv_partialReLayout")?n?k(a.measureMap,n):R(a):(d=a.measureMap&&o&&i)?k(a.measureMap,o):R(a),h,t,o,i,n);n&&(n=U(e,n,g,t.getAllRenderedRootIds(),s)),l.isOpen("sv_partialReLayout")?x(e,u,h,t,n):x(e,u,h,t,d&&o);var p=A(e,u,t,i,o,n);P(e,u,s);var m=w(e,u,h,p,t,!l.isOpen("sv_partialReLayout")&&d&&o);return a.imageLoader.loadAllImages(a),c.setIframesSrc(),q[a.siteId]=h,l.isOpen("sv_reportPerformance")&&r.performance.finish(Z,a.isViewerMode(),{partialReLayout:l.isOpen("sv_partialReLayout")}),{componentsToRender:m,measureMap:u,reLayoutedCompsMap:N(p)}}var V,q={},G={},Y={},Z="reLayout",j={"wysiwyg.viewer.components.Group":h,"wysiwyg.viewer.components.BoxSlideShow":h,"wysiwyg.viewer.components.StripContainerSlideShow":h,"wysiwyg.viewer.components.StripColumnsContainer":h,"wysiwyg.viewer.components.Column":function(e,i){var o=e[e.length-2],r=n.dataUtils.getChildrenData(o,i),a=[o].concat(r);return t.transform(a,function(e,t){e[t.id]=!0},{})}},Q={"mobile.core.components.Page":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":!0};return{registerLayoutInnerCompsFirst:function(e,t,i){G[e]={measure:t,patch:i}},registerMeasureChildrenFirst:function(e,t){Y[e]=t},registerPatcher:function(e,t){s.registerPatcher(e,t)},registerSAFEPatcher:function(e,t){s.registerSAFEPatcher(e,t)},registerSAFEPatchers:function(e,t){s.registerSAFEPatchers(e,t)},registerPatchers:function(e,t){s.registerPatchers(e,t)},registerCustomMeasure:function(e,t){s.registerCustomMeasure(e,t)},registerAdditionalMeasureFunction:function(e,t){s.registerAdditionalMeasureFunction(e,t)},registerRequestToMeasureDom:function(e){s.registerRequestToMeasureDom(e)},registerRequestToMeasureChildren:function(e,t){s.registerRequestToMeasureChildren(e,t)},updateBodyNodeStyle:u.updateBodyNodeStyle,reLayout:z,measureMediaRichTextInnerComponent:function(e,t,i,o,n,r){s.measureComponentChildren(e,t,i,o,n),s.measureComponent(r,e,t,i,o,n)},patchWithoutPositioning:s.patchWithoutPositioning,enforceAnchors:i.enforceAnchors}}),define("layout/specificComponents/wixHomepageMenuLayout",["layout/util/layout"],function(e){e.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",[["buttonsContainer"]]),e.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",function(e,t){var i=t.height[e+"buttonsContainer"];t.height[e]=Math.max(t.height[e],i),t.minHeight[e]=i})}),define("layout/specificComponents/fiveGridLineLayout",["layout/util/layout","layout/util/rootLayoutUtils"],function(e,t){var i=function(e,i,o,n,r){var a=o.width.screen,s=t.getRootWidth(r,o,n.rootId),u=0,c=s,l=n.propertiesItem;l&&l.fullScreenModeOn&&(a>s&&(u=-(a-s)/2,c=a),i.css(e,{width:c+"px",left:u+"px"}),o.width[e]=c,o.left[e]=u)};e.registerSAFEPatcher("wysiwyg.viewer.components.FiveGridLine",i),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]),e.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"),e.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(e,t,i){var o=t.height[e+"line"],n=window.getComputedStyle(i[e]),r=parseFloat(n.borderBottomWidth);t.height[e]=Math.max(5,r,o),t.minHeight[e]=o})}),define("layout/specificComponents/domainSearchLayout",["lodash","layout/util/layout"],function(e,t){function i(e,t){var i=e+"content";[["width","minWidth"],["height","minHeight"]].forEach(function(o){var n=o[0],r=o[1];t[n][i]>t[n][e]&&(t[r]||(t[r]={}),t[n][e]=t[r][e]=t[n][i])})}return t.registerRequestToMeasureChildren("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",[["content"]]),t.registerCustomMeasure("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",i),{}}),define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(e){return e.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"),e.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments"),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",[["itemsContainer"]]),{}}),define("layout/specificComponents/registerToPureDomMeasure",["layout/util/layout"],function(e){function t(t){e.registerCustomMeasure(t,function(e,t,i){var o=i[e];t.height[e]=o.offsetHeight,t.width[e]=o.offsetWidth})}return t("wysiwyg.viewer.components.FlashComponent"),t("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),t("wysiwyg.viewer.components.WGooglePlusOne"),t("wysiwyg.viewer.components.LinkBar"),t("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"),t("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"),t("wysiwyg.viewer.components.PayPalButton"),t("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),t("wysiwyg.viewer.components.FlickrBadgeWidget"),t("wysiwyg.viewer.components.WTwitterFollow"),t("wysiwyg.viewer.components.WTwitterTweet"),t("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton"),{}}),define("layout/specificComponents/areaTooltipLayout",["layout/util/layout"],function(e){e.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(e,t){var i=e+"content";t.custom[e]=t.height[e]/2-t.height[i]/2}),e.registerSAFEPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(e,t,i,o){var n,r,a,s;if(r=e+"tooltip",i.height[r]){switch(n=e+"content",o.propertiesItem.tooltipPosition){case"top":s=-i.height[n]-14+"px",a=0;break;case"right":s=i.custom[e]+"px",a=i.width[e]+14+"px";break;case"bottom":s=i.height[e]+14+"px",a=0;break;case"left":s=i.custom[e]+"px",a="-414px";break;default:return}t.css(r,{top:s,left:a})}}),e.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",[["tooltip"],["content"]])}),define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","siteUtils","coreUtils"],function(e,t,i,o,n){function r(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e,t){return e+15+t.menuBorderY+t.labelPad+t.menuButtonBorder}function s(e,i,o,n,r,a,s,c,l,h){var d=o.concat("__more__"),g=i.custom[e],p=g.realWidths,m=g.menuItemContainerExtraPixels,f=i.width[e];if(t.findIndex(d,function(e){return e===n})>=0&&p){var y=Math.abs(h.getSiteX())+i.absoluteLeft[e],w=u(m,s,l,f,r,c,y,y+f,i.clientWidth);return{left:w.moreContainerLeft,right:w.moreContainerRight,bottom:g.needToOpenMenuUp?a+"px":"auto"}}}function u(e,t,i,o,n,r,a,s,u){var c="0px",l="auto",h=r.left,d=r.width;return"left"===t?c="left"===n?0:h+e.left+"px":"right"===t?(l="right"===n?0:o-h-d-e.right+"px",c="auto"):"left"===n?c=h+(d+e.left-i)/2+"px":"right"===n?(c="auto",l=(d+e.right-(i+e.width))/2+"px"):c=e.left+h+(d-(i+e.width))/2+"px","auto"!==c&&(c=a+parseInt(c,10)<0?0:c),"auto"!==l&&(l=s-parseInt(l,10)>u?0:l),{moreContainerLeft:c,moreContainerRight:l}}function c(e,t,i,o,n,r,a){for(var s=0,u=null,c=i.custom[e].lineHeight[e],l=r-a.height,h=0;h<o.length;h++){var d=n[h],g=d>0,p=e+o[h];g?(s++,u=p,t.css(p,{width:d+"px",height:l+"px",position:"relative","box-sizing":"border-box",overflow:"visible"}),t.css(p+"label",{"line-height":c})):t.css(p,{height:"0px",overflow:"hidden",position:"absolute"})}1===s&&(t.data(e+"moreContainer",{listposition:"lonely"}),t.data(u,{listposition:"lonely"}))}function l(e,i,o,n,u){var c=o.custom[e],l=c.hoverState,h=M.nonHiddenPageIdsFromMainMenu(n),d=h.indexOf(l);if(r(c.hoverState)||l===S){if(!o.custom[e].realWidths)return;var g=Math.max(u,o.width[-1!==d?e+d:e+S]),p=a(t.isEmpty(c.moreSubItem)?0:c.lineHeight[c.moreSubItem[0]+"label"],c);t.forEach(c.moreSubItem,function(e){i.css(e,{"min-width":g+"px"}),i.css(e+"label",{"min-width":"0px","line-height":p+"px"})});var m=r(c.hoverState)?c.hoverState:"__more__",f={width:o.width[e+m],left:o.left[e+m]},y=s(e,o,h,l,c.hoverListPosition,o.height[e],c.alignButtons,f,g,n);i.css(e+I,{left:y.left,right:y.right}),i.css(e+"dropWrapper",{left:y.left,right:y.right,bottom:y.bottom})}}function h(e,i,o,n,r){var a=o.height[e],s=M.nonHiddenPageIdsFromMainMenu(r),u=s.concat("__more__"),h=o.custom[e];m(e,i,h.needToOpenMenuUp);var d=h.menuItemContainerExtraPixels,g=0;if(h.hoverState===S){var p=h.realWidths.indexOf(0);t(h.realWidths).take(p).forEach(function(t,o){var n=e+I+o;i.css(n,{display:"none"})});var f=p===s.length-1;i.attr(e+I+p,{"data-listposition":f?"dropLonely":"top"});for(var y=p;y<h.realWidths.length-1;y++){var w=e+I+y+"label";g=Math.max(o.width[w],g)}}else h.hoverState&&t.forEach(h.moreSubItem,function(t,i){var n=e+I+i+"label";g=Math.max(o.width[n],g)});l(e,i,o,r,g),h.originalGapBetweenTextAndBtn&&t.forEach(u,function(t){h.hasOriginalGapData[t]||i.data(e+t,{originalGapBetweenTextAndBtn:h.originalGapBetweenTextAndBtn[e+t]})}),c(e,i,o,u,h.realWidths,a,d)}function d(t){var i=t.lastChild;return(parseInt(e(i).css("margin-left"),10)||0)+(parseInt(e(i).css("margin-right"),10)||0)}function g(e){var t=parseFloat(e);return isFinite(t)?t:0}function p(t,i){var o=e(t).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]),n=g(o["border-top-width"])+g(o["padding-top"]),r=g(o["border-bottom-width"])+g(o["padding-bottom"]),a=g(o["border-left-width"])+g(o["padding-left"]),s=g(o["border-right-width"])+g(o["padding-right"]);return i&&(n+=g(o["margin-top"]),r+=g(o["margin-bottom"]),a+=g(o["margin-left"]),s+=g(o["margin-right"])),{top:n,bottom:r,left:a,right:s,height:n+r,width:a+s}}function m(e,t,i){t.data(e,{dropmode:i?"dropUp":"dropDown"})}function f(e){return e.getBoundingClientRect().top>window.innerHeight/2}function y(e){var i=M.nonHiddenPageIdsFromMainMenu(e).concat("__more__"),o=[[]],n=[["moreContainer"],["itemsContainer"],["dropWrapper"]];return t.forEach(o,function(e){n=n.concat(t.map(i,function(t){return[t].concat(e)}))}),n}function w(i,o,n,r,a){var s=o.width[i],u=o.custom[i];u.hasOriginalGapData={},u.originalGapBetweenTextAndBtn={};var c=t.map(a,function(n){var a,s=e(r[i+n]).data("originalGapBetweenTextAndBtn");return t.isUndefined(s)?(u.hasOriginalGapData[n]=!1,a=o.width[i+n]-u.labelWidths[i+n+"label"],u.originalGapBetweenTextAndBtn[i+n]=a):(u.hasOriginalGapData[n]=!0,a=parseInt(s,10)),o.width[i+n]>0?u.labelWidths[i+n+"label"]+a:0}),l=c.pop(),h=n.sameWidthButtons,d=n.stretchButtonsToMenuWidth,g=!1,p=u.menuItemContainerMargins,m=u.menuItemMarginForAllChildren,f=u.menuItemContainerExtraPixels,y=M.getMaxWidth(c),w=M.getDropDownWidthIfOk(s,h,d,c,p,y,m,f);if(!w){for(var v=1;v<=c.length;v++)if(w=M.getDropDownWidthIfOk(s,h,d,c.slice(0,-1*v).concat(l),p,y,m,f)){g=!0;break}w||(g=!0,w=[l])}if(g){var C=w[w.length-1];for(w=w.slice(0,-1);w.length<a.length;)w.push(0);w[w.length-1]=C}return{realWidths:w,moreShown:g}}function v(e,t){return n.style.unitize(e-t.menuBorderY-t.labelPad-t.ribbonEls-t.menuButtonBorder-t.ribbonExtra)}function C(e){var t=window.getComputedStyle(e);return parseInt(t.width,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10)}function b(i,o,n,r,a){var s=e(n[i]),u=e("#"+i+"itemsContainer")[0]||n[i+"itemsContainer"],c=u.childNodes,l=n[i+"moreContainer"],h=l.childNodes,g=o.custom[i]={alignButtons:s.data("dropalign"),hoverListPosition:s.data("drophposition"),menuBorderY:parseInt(s.data("menuborder-y"),10),ribbonExtra:parseInt(s.data("ribbon-extra"),10),ribbonEls:parseInt(s.data("ribbon-els"),10),labelPad:parseInt(s.data("label-pad"),10),menuButtonBorder:parseInt(s.data("menubtn-border"),10),menuItemContainerMargins:d(u),menuItemContainerExtraPixels:p(u,!0),needToOpenMenuUp:f(n[i]),menuItemMarginForAllChildren:!a.propertiesItem.stretchButtonsToMenuWidth||"false"!==u.getAttribute("data-marginAllChildren")};g.moreSubItem=[],g.lineHeight={},g.labelWidths={},t.forEach(h,function(t){n[t.id]=t;var i=e(t).find("p")[0];n[i.id]=i,o.width[i.id]=i.offsetWidth,o.height[i.id]=i.offsetHeight,o.left[i.id]=i.offsetLeft,g.lineHeight[i.id]=parseInt(window.getComputedStyle(i).fontSize,10),g.moreSubItem.push(t.id)}),t.forEach(c,function(t){o.left[t.id]=t.offsetLeft;var i=e(t).find("p")[0];n[i.id]=i,g.labelWidths[i.id]=C(i)});var m=o.height[i];g.lineHeight[i]=v(m,g);var y=M.nonHiddenPageIdsFromMainMenu(r).concat("__more__"),b=w(i,o,a.propertiesItem,n,y);g.realWidths=b.realWidths,g.isMoreShown=b.moreShown,g.hoverState=l.getAttribute("data-hover")}var M=o.menuUtils,S="__more__",I="moreContainer";return i.registerSAFEPatcher("wysiwyg.viewer.components.menus.DropDownMenu",h),i.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",b),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",y),{}}),define("layout/specificComponents/imageLayout",["lodash","coreUtils","layout/util/layout"],function(e,t,i){function o(e,i,o){return t.imageUtils.getImageComputedProperties(e,i.getMediaFullStaticUrl.bind(i),i.currentUrl,i.mobile.getDevicePixelRatio(),o)}function n(t,i,o){i.css(t+h,e.get(o,["css","img"]))}function r(e,t,i,o,n){var r=i.custom[e]&&i.custom[e].isSvgImage,a=i.custom[e]&&i.custom[e].filterId;if(!o.containerWidth||!o.containerHeight||!o.imageData.uri)return null;t.css(e+d,{width:o.containerWidth,height:o.containerHeight}),r&&(t.attr(e+d,n.attr.container),t.attr(e+h,n.attr.img),t.attr(e+h,{"xlink:href":n.uri,filter:"url(#"+a+")"}))}function a(t){return e.pickBy(t,function(e){return""!==e})}function s(t,i,o,n,r){var s=a(i),u=t.css.container,c=e.assign({position:"absolute",width:o,height:n},u,s);return e.isNumber(r)&&(c.opacity=r),c}function u(e){return e&&e.split?e.split(";").reduce(function(e,t){var i=t.split(":");return i[0]&&i[1]&&(e[i[0].trim()]=i[1].trim()),e},{}):{}}function c(t,i,a,c,l,h,d){var g=u(a.custom[t].renderedStyles),p=a.custom[t]&&a.custom[t].isZoomed,m={imageData:l,containerWidth:p?l.width:h.width,containerHeight:p?l.height:h.height,displayMode:l.displayMode,alignType:d},f=o(m,c,"img"),y=s(f,g,h.width,h.height,l.opacity);i.css(t,y),n(t,i,f),a.custom[t].hasSvgNode&&r(t,i,a,m,o(m,c,"svg"));var w={patchers:i,id:t,src:e.get(f,"uri"),absoluteTop:a.absoluteTop[a.custom[t].parentId]||0,height:h.height||a.height[t],currentSrc:a.custom[t].imgSrc};c.imageLoader.loadImage(w)}function l(t,i,o,n,r){var a,s=!1;o[t+h]=o[t].querySelector("img")||o[t].querySelector("image"),o[t+d]=o[t].querySelector("svg"),o[t+h]&&"image"===o[t+h].nodeName.toLowerCase()&&(s=!0,a=e.get(o[t].querySelector("filter"),"id")),i.custom[t]={isZoomed:o[t].getAttribute("data-image-zoomed"),isSvgImage:s,filterId:a,hasSvgNode:Boolean(o[t+d]),imgSrc:o[t+h].getAttribute("src"),parentId:r.id,renderedStyles:o[t].getAttribute("data-style")}}var h="image",d="svg";return i.registerCustomMeasure("core.components.Image",l),{patchNodeImage:c,measureNodeImage:l}}),define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","coreUtils","imageClientApi","zepto","lodash","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){function a(e,t,i,o,n){var r=Math.floor(t+e);return h.getSizeAfterScaling({itemHeight:r,itemWidth:Math.floor(r*(n&&n.aspectRatio?n.aspectRatio:1)),displayerData:i,imageMode:n?n.imageMode:"clipImage",heightDiff:o.heightDiff,widthDiff:o.widthDiff,bottomGap:o.bottomGap})}function s(e,t,r,s,u,c,l){var h=o(c),g={imageIndex:h.data("image-index"),width:h.data("displayer-width"),height:h.data("displayer-height"),uri:h.data("displayer-uri")},p={heightDiff:parseInt(h.data("height-diff"),10)||0,widthDiff:parseInt(h.data("width-diff"),10)||0,bottomGap:parseInt(h.data("bottom-gap"),10)||0},m=u&&u[g.imageIndex]?u[g.imageIndex]:g,f=a(r,t,m=n.assign(m,{displayMode:i.fittingTypes.SCALE_TO_FILL}),p,s.propertiesItem);return{imageData:m,imageNodeId:e+"displayer"+l+"image",imageWrapperId:e+"displayer"+l+"imageWrapper",containerSize:d.getContainerSize(f.imageWrapperSize,h),sizeAfterScaling:f}}function u(e,t,i,r,a){var u=i[e+"images"],c=o(u).children(),l=n.get(a,"dataItem.items"),h=parseInt(o(i[e]).data("additional-height"),10)||0;t.custom[e]={displayers:n.map(c,n.partial(s,e,t.height[e],h,a,l)),additionalHeight:h}}function c(e,t,i,o,a){var s=i.height[e];t.css(e,{height:s});var u=i.custom[e];n.forEach(u.displayers,function(e){d.updateImageWrapperSizes(t,e.imageWrapperId,e.sizeAfterScaling),r.patchNodeImage(e.imageNodeId,t,i,a,e.imageData,e.containerSize)})}function l(e,t){var i=[["images"],["itemsContainer"]],r=o("#"+t+"images").children();return n.forEach(r,function(e,t){var o="displayer"+t,n={pathArray:[o,"image"],type:"core.components.Image"},r=[o,"imageWrapper"];i.push(n,r)}),i}var h=t.matrix.scalingCalculations,d=t.galleriesCommonLayout;return e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",l),e.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",u),e.registerSAFEPatcher("wysiwyg.viewer.components.SliderGallery",c),{}}),define("layout/specificComponents/verticalMenuLayout",["zepto","lodash","layout/util/layout","coreUtils","siteUtils","skinExports"],function(e,t,i,o,n,r){function a(e){var t=e.dataset;return{border:t&&t.paramBorder?parseInt(t.paramBorder,10):0,separator:t&&t.paramSeparator?parseInt(t.paramSeparator,10):0}}function s(){return window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight}function u(e,t){return e-t}function c(t,i,o){var n={"line-height":o+"px"};i&&(n["text-overflow"]="ellipsis"),e(t).css(n)}function l(e,t){return Math.floor(e/2)>t?"down":"up"}function h(e,i,a,s,h){var d=a.custom[e],g="subMenuOpenDir-"+l(d.screenHeight,u(a.absoluteTop[e],d.pageYOffset));i.css(e,{width:a.width[e]}),i.attr(e,{"data-open-direction":g});var p=n.menuUtils.getSiteMenuWithoutRenderedLinks(h),m=r[s.styleItem.skin],f=o.verticalMenuCalculations.getVisibleItemsCount(p),y=Math.max(a.minHeight[e],s.layout.height),w=o.verticalMenuCalculations.getItemHeight(y,d.params.separator,f,m),v=o.verticalMenuCalculations.getLineHeight(w,d.params.separator,d.params.border,m);t.forEach(d.linksInfo,function(e){c(e.node,e.hasOverflow,v)}),t.forEach(d.liNodes,function(e){e.style.height=w+"px"})}function d(i,o,n){var r=n[i],u=e(r),c=u.find("a.level0"),l=0,h=0;t.forEach(c,function(e){e.offsetWidth>l&&(l=e.offsetWidth),h+=e.offsetHeight}),o.custom[i]={linksInfo:t.map(u.find("a"),function(e){return{node:e,hasOverflow:e.offsetWidth>l}}),liNodes:u.find("li"),params:a(r),screenHeight:s(),pageYOffset:window.pageYOffset};var d=parseInt(r.getAttribute("data-param-border")||0,10),g=parseInt(r.getAttribute("data-param-padding")||0,10),p=l+2*g+2*d;p>o.width[i]&&(o.width[i]=p),o.minHeight[i]=h}return i.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",d),i.registerSAFEPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",h),{}}),define("layout/specificComponents/loginButtonLayout",["lodash","layout/util/layout"],function(e,t){function i(e,t){var i=e+"container";t.minHeight[e]=t.height[i],t.height[i]>t.height[e]&&(t.height[e]=t.height[i])}function o(e,t,i){var o=e+"container",n=(i.height[e]-i.height[o])/2;t.css(o,{"margin-top":n+"px"})}t.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginButton",[["container"]]),t.registerCustomMeasure("wysiwyg.viewer.components.LoginButton",i),t.registerSAFEPatcher("wysiwyg.viewer.components.LoginButton",o)}),define("layout/util/spaceCalculationsRegardingWixAds",[],function(){function e(e){var t=parseInt(e,10);return isNaN(t)?0:t}function t(t){return e(t.height.WIX_ADS)+e(t.top.WIX_ADS)}function i(t){return t.height.WIX_ADSdesktopWADTop||t.top.WIX_ADSdesktopWADTop?e(t.height.WIX_ADSdesktopWADTop)+e(t.top.WIX_ADSdesktopWADTop):e(t.height.WIX_ADS)+e(t.top.WIX_ADS)}function o(t){var i,o,n=t.height.screen;return t.height.WIX_ADSdesktopWADTop||t.height.WIX_ADSdesktopWADBottom?(i=e(t.height.WIX_ADSdesktopWADTop)+e(t.top.WIX_ADSdesktopWADTop),o=e(t.height.WIX_ADSdesktopWADBottom),n-i-o):(i=e(t.height.WIX_ADS)+e(t.top.WIX_ADS),n-i)}return{getFirstVisibleTopCoordinate:t,getFirstUnoccupiedTopCoordinate:i,getScreenHeightExcludingAds:o}}),define("layout/specificComponents/dialogLayout",["lodash","layout/util/layout","layout/util/spaceCalculationsRegardingWixAds"],function(e,t,i){function o(e,t,o){var n=e+"dialog",r=o.height[n],a=o.height.screen,s=i.getFirstUnoccupiedTopCoordinate(o),u=i.getScreenHeightExcludingAds(o);t.css(e,{height:a+"px"});var c=(u-r)/2;t.css(n,{top:Math.max(c,20)+s+"px"})}t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",[["dialog"]]),t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",[["dialog"]]),t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",[["dialog"]]),t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",[["dialog"]]),t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",[["dialog"]]),t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog",[["dialog"]]),t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog",o),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.CreditsDialog",[["dialog"]]),t.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.CreditsDialog",o)}),define("layout/specificComponents/html5VideoLayout",["lodash","coreUtils","layout/specificComponents/imageLayout","imageClientApi"],function(e,t,i,o){function n(t,i,o,n,u){var c={position:"absolute",minWidth:0,minHeight:0,top:0,left:0},l=t.mediaRef;if(!l||"WixVideo"!==l.type||o.isTouchDevice())return c;var h=e.find(l.qualities,{quality:n}),g=r(i.width,i.height,h.width,h.height),p=a(t.fittingType,g,h.width,h.height),m=s(t.alignType,p,i);return c={position:"absolute",minWidth:p.width,minHeight:p.height,left:m.left,top:d.isFullScreenByEffect(u,o.renderFlags.renderFixedPositionBackgrounds)?"":m.top}}function r(e,t,i,o){return{wScale:e/i,hScale:t/o}}function a(e,t,i,n){var r,a,s,u=o.fittingTypes;switch(e){case u.SCALE_TO_FILL:s=Math.max(t.wScale,t.hScale),r=Math.round(i*s),a=Math.round(n*s);break;case u.SCALE_TO_FIT:s=Math.min(t.wScale,t.hScale),r=Math.round(i*s),a=Math.round(n*s)}return{width:r,height:a}}function s(e,t,i){var n=i.width,r=i.compRootHeight,a=Math.floor((r-t.height)/2),s=Math.floor((n-t.width)/2),u={},c=o.alignTypes;switch(e){case c.CENTER:u.left=s,u.top=a;break;case c.LEFT:u.left=0,u.top=a;break;case c.RIGHT:u.left=n-t.width,u.top=a;break;case c.TOP:u.left=s,u.top=0;break;case c.BOTTOM:u.left=s,u.top=r-t.height;break;case c.TOP_LEFT:u.left=0,u.top=0;break;case c.TOP_RIGHT:u.left=n-t.width,u.top=0;break;case c.BOTTOM_LEFT:u.left=0,u.top=r-t.height;break;case c.BOTTOM_RIGHT:u.left=n-t.width,u.top=r-t.height}return u}function u(e,i,o){return i?i.url?t.urlUtils.joinURL(o.getStaticVideoUrl(),i.url):t.urlUtils.joinURL(o.getStaticVideoUrl(),e.videoId,i,"mp4","file.mp4"):""}function c(e){return e.designDataItem&&e.designDataItem.background?e.designDataItem.background:e.dataItem.background}function l(e,t,o,n,r){var a=e+g.POSTER,s=o[e],u=s.firstChild;o[e+"video"]=u,t.custom[e]={},t.custom[a]={};var c=u.firstChild;o[e+"mp4"]=c,t.custom[e]={quality:s.getAttribute("data-quality"),src:c.src,videoNode:u},i.measureNodeImage(a,t,o,n,r)}function h(t,o,r,a,s,l,h){var g=c(a),p=!s.isTouchDevice(),m=d.getBgEffectName(a.behaviorsItem,p,s.isMobileView()),f=h.width,y=h.height,w=r.custom[t],v=w.quality,C=n(g,{width:f,height:l,compRootHeight:y},s,v,m);o.attr(t+"video",{width:C.minWidth,height:C.minHeight}),o.css(t+"video",C);var b=u(g.mediaRef,v,s);w.src!==b&&(o.attr(t+"mp4",{src:b}),w.videoNode.load());var M={width:f,height:l,top:0},S=e.assign({displayMode:g.fittingType},g.mediaRef.posterImageRef);i.patchNodeImage(t+"poster",o,r,s,S,M,g.alignType)}var d=t.containerBackgroundUtils,g=t.balataConsts;return{patchBgVideo:h,measureBgVideo:l}}),define("layout/util/optimizedCssImageLayout",["lodash","zepto","coreUtils"],function(e,t,i){function o(t,i){return!e.includes(t,i)||Boolean(t)!==Boolean(i)}function n(e,t){return e?i.urlUtils.isExternalUrl(e)?e:i.urlUtils.joinURL(t.getStaticMediaUrl(),e):""}function r(i,o){var n=t(o);i.type=n.data("type"),i.currentCss=n.data("image-css"),i.currentCss&&e.isString(i.currentCss)&&(i.currentCss=JSON.parse(i.currentCss)),i.previousBackgroundImageCssUrl=n.css("backgroundImage")}function a(e,t,i,o){o===h.BG_IMAGE?e.css(t,{backgroundImage:i?'url("'+i+'")':""}):e.attr(t,{src:i})}function s(t,i,o,n,r){var s=o.previousBackgroundImageCssUrl;r.imageResizeHandlers=r.imageResizeHandlers||{},s&&n?(r.imageResizeHandlers[t]||(r.imageResizeHandlers[t]=e.debounce(a,l,{trailing:!0})),r.imageResizeHandlers[t](i,t,n,o.type)):a(i,t,n,o.type)}function u(t,i){return i&&(!t||e.some(i,function(e,i){return e!==t[i]}))}function c(t,i,r,a,c,l){if(u(t.currentCss,a)){r.css(i,a);var h=e.defaults(a,t.currentCss);r.data(i,{"image-css":JSON.stringify(h)})}var d=n(c,l);o(t.previousBackgroundImageCssUrl,d)&&s(i,r,t,d,l)}var l=250,h=i.balataConsts;return{cacheCssImageMeasureData:r,patchCssImage:c}}),define("layout/specificComponents/siteBackgroundLayout",["lodash","zepto","layout/util/layout","imageClientApi","layout/specificComponents/imageLayout","layout/specificComponents/html5VideoLayout","layout/util/optimizedCssImageLayout","experiment"],function(e,t,i,o,n,r,a,s){function u(e,t,i,o,n){i.top[e]=m(i),i.width[e]=f(i,n),i.height[e]=p(i,n),i.height.currentImage=i.height.masterPage,t.css(e,{top:i.top[e]+"px",height:i.height[e]+"px",width:i.width[e]+"px"});var u=i.custom[e];if(s.isOpen("sv_mobileBG")){var c=n.isMobileView(),h=n.isMobileDevice(),d={width:c?i.width.screen:"100%",height:c&&"fixed"===u.bgPosition?l(i,c,h).availHeight:"100%"};t.css(S,d),t.css(I,d)}var y=g(u,n,i);if(a.patchCssImage(u,b,t,y.css,y.uri,n),i.custom[e+T]){var w={designDataItem:{background:u.bgData}},v={width:i.width.screen,height:i.height.screen};r.patchBgVideo(e+T,t,i,w,n,v.height,v)}}function c(e,t){var i=e.getDataByQuery(t),o=e.isMobileView()?"mobile":"desktop";return{bgData:i.pageBackgrounds[o].ref,mediaSizing:i.pageBackgrounds[o].mediaSizing}}function l(e,t,i){var o={availWidth:e.width.screen,availHeight:e.height.screen,pixelAspectRatio:e.devicePixelRatio};if(t&&i){var n=Math.min(e.availWidth.device,e.availHeight.device),r=Math.max(e.availWidth.device,e.availHeight.device);o.availHeight=Math.round(o.availWidth*(r/n))}return o}function h(e,t,i){return!!s.isOpen("sv_mobileBG")&&(i&&e.mediaRef&&"viewport"===t)}function d(t,i,n,r,a){var s={},u=e.at(o.fittingTypes,["LEGACY_BG_NORMAL","LEGACY_BG_FIT_AND_TILE","LEGACY_BG_FIT_AND_TILE_HORIZONTAL","LEGACY_BG_FIT_AND_TILE_VERTICAL"]),c=e.includes(u,i.fittingType);if(r&&!c)s.width=n.availWidth,s.height=n.availHeight,s.pixelAspectRatio=n.pixelAspectRatio;else{var l=a?C:v;s.width=Math.min(l,t.width),s.height=Math.min(l,Math.round(s.width/(t.width/t.height)))}return s.htmlTag="bg",s.alignment=i.alignType,s}function g(t,i,n){var r=t.bgData,a=r.mediaRef,s={backgroundSize:"",backgroundPosition:"",backgroundRepeat:""},u="";if(a){"WixVideo"===a.type&&(a=a.posterImageRef);var c=i.isMobileView(),g=l(n,c,i.isMobileDevice()),p=h(r,t.mediaSizing,c),m={id:a.uri,width:a.width,height:a.height},f=d(a,r,g,p,c),y=e.defaults({quality:85},a.quality||{}),w=o.getData(r.fittingType,m,f,y,i.browser);u=w.uri,s={backgroundSize:w.css.container.backgroundSize,backgroundPosition:w.css.container.backgroundPosition,backgroundRepeat:w.css.container.backgroundRepeat},p&&("fill"===r.fittingType&&(s.backgroundSize="auto 100%",s.height=g.availHeight),s.backgroundPosition=s.backgroundPosition.replace(/(center|bottom)$/,"top"))}return{css:s,uri:u}}function p(e,t){var i=e.height[t.getStructureCompId()],o=e.height.screen-m(e);return Math.max(o,i)}function m(e){var t=parseInt(e.height.WIX_ADS,10);t=isNaN(t)?0:t;var i=parseInt(e.top.WIX_ADS,10);return i=isNaN(i)?0:i,t+i}function f(e,t){var i=e.width[t.getStructureCompId()];return Math.ceil(Math.max(e.width.screen,i))}function y(e){return[[e.getPrimaryPageId()]]}function w(i,o,r,u,l){r[b]=window.document.querySelector("."+b),s.isOpen("sv_mobileBG")&&(r[S]=window.document.querySelector("."+S),r[I]=window.document.querySelector("."+I));var d=c(u,u.getPrimaryPageId());if(o.custom[i]={bgData:d.bgData,mediaSizing:d.mediaSizing},h(d.bgData,d.mediaSizing,u.isMobileView())&&(o.custom[i].bgPosition=t(r[S]).data("position")),a.cacheCssImageMeasureData(o.custom[i],r[b]),"WixVideo"===e.get(d.bgData.mediaRef,"type")&&!u.isTouchDevice()){r[M]=window.document.querySelector("."+M),r[i+A]=r[M].querySelector("."+A),r[i+x]=r[M].querySelector("."+x),r[i+L]=r[i+A].firstChild;var g=r[i+A];o.custom[i+T]={bgData:d.bgData,videoNode:g,quality:r[M].getAttribute("data-quality"),src:r[i+L].getAttribute("src")},n.measureNodeImage(i+x,o,r,u,l)}}var v=1920,C=1e3,b="siteBackgroundcurrentImage",M="siteBackgroundcurrentVideo",S="siteBackgroundcurrent",I="siteBackgroundprevious",T="bgVideo",x=T+"poster",A=T+"video",L=T+"mp4";return i.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",y),i.registerSAFEPatcher("wysiwyg.viewer.components.SiteBackground",u),i.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground",w),{testAPI:{getDeviceScreenDimensions:l,calculateTargetImageSize:d,getCssImageData:g}}}),define("layout/specificComponents/wPhotoLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout","coreUtils","siteUtils","imageClientApi"],function(e,t,i,o,n,r,a){function s(e){return e===a.fittingTypes.LEGACY_FIT_WIDTH?a.fittingTypes.LEGACY_FIT_HEIGHT:h[e]||e}function u(e,t,i){var o=t.height[e]-(t.custom[e].marginHeight||0),n=t.width[e]-(t.custom[e].marginWidth||0),r={width:n>0?n:t.width[e],height:o>0?o:t.height[e]},s=t.custom[e].exactHeight-(t.custom[e].marginHeight||0);return i===a.fittingTypes.LEGACY_FIT_HEIGHT&&Math.ceil(s)===r.height&&(r.height=s),r}function c(t,i,o){var n=e(o[t]),r=parseInt(n.data("content-padding-horizontal"),10),a=parseInt(n.data("content-padding-vertical"),10),s=parseFloat(n.data("exact-height"));i.height[t]=i.custom[t]&&i.custom[t].thisIsMyHeight||o[t].offsetHeight,i.custom[t]={marginWidth:r,marginHeight:a,exactHeight:s}}function l(e,i,a,c,l){var h=e+"img",d=e+"link",g=c.dataItem,p=c.propertiesItem,m=s(p&&p.displayMode||"fill"),f=n.imageUtils.getContainerSize(u(e,a,m),{width:g.width,height:g.height},m),y=r.layout.isVerticallyStretched(c.layout),w={width:r.layout.isHorizontallyStretched(c.layout)?"":f.width+a.custom[e].marginWidth,height:y?"":f.height+a.custom[e].marginHeight},v=t.assign({},t.pick(g,["width","height","uri","quality"]),{displayMode:m,crop:t.get(p,"overrideCrop")||g.crop});o.patchNodeImage(h,i,a,l,v,f),i.css(e,w),i.css(d,f)}var h={fitWidthStrict:a.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:a.fittingTypes.LEGACY_FIT_HEIGHT},d={pathArray:["img"],type:"core.components.Image"};i.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[d,["link"]]),i.registerSAFEPatcher("wysiwyg.viewer.components.WPhoto",l),i.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",c),i.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[d,["link"]]),i.registerSAFEPatcher("wysiwyg.viewer.components.ClipArt",l),i.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",c)}),define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","imageClientApi","layout/specificComponents/imageLayout"],function(e,t,i,o,n){function r(e,i,r,a,s){var u=t.defaults({displayMode:o.fittingTypes.LEGACY_FULL},a.dataItem);n.patchNodeImage(e+"img",i,r,s,u,r.custom[e].containerSize),i.css(e,{width:r.width[e]})}function a(t,i,o){var n=e(o[t]),r=t+"label",a=i.width[r],s=i.height[r],u=Math.max(i.width[t],a),c=n.data("content-padding-left"),l=n.data("content-padding-right"),h=n.data("content-padding-top"),d=n.data("content-image-height"),g={width:u-c-l,height:Math.max(d-h-s,1)};i.custom[t]={containerSize:g},i.width[t]=u,i.minWidth[t]=a}i.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]),i.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",a),i.registerSAFEPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",r)}),define("layout/util/calculateScreenWidthDimensions",["siteUtils","layout/util/rootLayoutUtils"],function(e,t){var i=e.layout.stretchInCenteredContainer;return function(e,o,n){var r=Math.max(e.width.screen,t.getRootWidth(o,e,n));return i(t.getRootWidth(o,e,n),r)}}),define("layout/specificComponents/bgImageLayout",["zepto","lodash","layout/util/layout","coreUtils","imageClientApi","layout/util/optimizedCssImageLayout","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r,a){function s(e){return!e||o.urlUtils.isExternalUrl(e)}function u(e,i,o,r,a,s){var u=a.mobile.getDevicePixelRatio(),c={width:r.width,height:r.height,alignment:i,htmlTag:s||"bg",pixelAspectRatio:u},l={id:o.uri,width:o.width,height:o.height},h=t.defaults({quality:85},o.quality||{});return n.getData(e,l,c,h,a.browser)}function c(e,t,i){var o=e+"bg";i[o]&&(t.custom[e]={},r.cacheCssImageMeasureData(t.custom[e],i[o]))}function l(t,i,o,n,s){var u=t+f.MEDIA+f.CONTENT,c=o[u].getAttribute("data-type");if(i.custom[t]=i.custom[t]||{},i.custom[t].type=c,c===f.IMAGE)a.measureNodeImage(u,i,o,n,s);else{var l=u+"image";o[l]=e(o[u]).find("#"+l)[0];var h=o[l];i.custom[u]={},r.cacheCssImageMeasureData(i.custom[u],h)}}function h(e,t,i,o,n){var r=i.width,a=o||i.height,c=p(e);if(c&&!s(c.uri))return u(e.fittingType,e.alignType,c,{width:r,height:a},n,t)}function d(e,i,o,n,s,u,c,l){var d=n.custom[e].type,m=g(s);if(d===f.IMAGE){var y={width:l.width,height:c},w=t.assign({displayMode:m.fittingType},p(m));a.patchNodeImage(i,o,n,u,w,y,m.alignType)}else{var v=i+"image",C=h(m,"bg",l,c,u),b=t.assign({height:c},C.css.container);r.patchCssImage(n.custom[i],v,o,b,C.uri,u)}}function g(e){return t.isUndefined(e.designDataItem)?e.dataItem.background:e.designDataItem.background}function p(e){var t=e.mediaRef;return t&&"WixVideo"===t.type&&(t=t.posterImageRef),t}function m(e,t,i,o,n,a){var c=i.custom[e],l=e+"bg";if(c){var h=o.dataItem;if(!h||s(h.uri))return;var d=u(o.propertiesItem.fittingType,o.propertiesItem.alignType,h,a,n);r.patchCssImage(c,l,t,d.css.container,d.uri,n)}}var f=o.balataConsts;return i.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage",[["image"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip",[["bg"]]),{measureLegacyBgImageStrip:c,measureBgImageBalata:l,patchBgImage:d,patchLegacyBgImageStrip:m}}),define("layout/specificComponents/youtubeVideoLayout",["lodash","coreUtils","layout/specificComponents/imageLayout"],function(e,t,i){function o(e){return e.designDataItem&&e.designDataItem.background?e.designDataItem.background:e.dataItem.background}function n(e,t,o,n,r){var s=e+a.POSTER,u=o[e];o[e+"video"]=u.firstChild,t.custom[e]={},t.custom[s]={},i.measureNodeImage(s,t,o,n,r)}function r(t,n,r,a,s,u,c){var l=o(a),h=c.width,d=c.height;n.attr(t+"video",{"min-width":h,"min-height":d,width:h,height:d}),n.css(t+"video",{position:"absolute"});var g={width:h,height:u,top:0},p=l.mediaRef.posterImage||{uri:"//img.youtube.com/vi/"+l.mediaRef.videoId+"/hqdefault.jpg"},m=e.assign({displayMode:l.fittingType},p);i.patchNodeImage(t+"poster",n,r,s,m,g,l.alignType)}var a=t.balataConsts;return{patchBgVideo:r,measureBgVideo:n}}),define("layout/specificComponents/balataLayout",["lodash","coreUtils","layout/specificComponents/bgImageLayout","layout/specificComponents/html5VideoLayout","layout/specificComponents/youtubeVideoLayout"],function(e,t,i,o,n){function r(t,i,o,n,r){var a=t[n][o];return e.isNumber(a)?a:(a=i[o][r],e.isNumber(a)?a:0)}function a(t,i,o,n,a,u){var c=h(t),l=i.custom[c]={},d=c+g.MEDIA;l.hasBalata=Boolean(o[c]),l.hasMedia=Boolean(o[d]),l.hasBalata&&(l.enableVideo="true"===o[c].getAttribute("data-enable-video"),e.forEach(u,function(e,t){i[t][c]=e}),i.left[c]=r(i,o,c,"left","offsetLeft"),i.top[c]=r(i,o,c,"top","offsetTop"),s(c,i,o,n,a))}function s(e,t,r,a,s){var u=d(s).mediaRef,c=t.custom[e].enableVideo;u&&("Image"!==u.type&&c?"WixVideo"===u.type?o.measureBgVideo(e+g.MEDIA+g.CONTENT,t,r,a,s):"Video"===u.type&&"YOUTUBE"===u.videoType&&n.measureBgVideo(e+g.MEDIA+g.CONTENT,t,r,a,s):i.measureBgImageBalata(e,t,r,a,s))}function u(t,i,o,n,r,a,s){var u=h(t),d=o.custom[u];if(d.hasBalata){var m=u+g.MEDIA,f=!r.isTouchDevice(),y=p.getBgEffectName(n.behaviorsItem,f,r.isMobileView()),w=p.getHeightByEffect(y,o,a.height),v={overflow:"hidden",left:a.left,width:a.width,clip:"rect(0px,"+a.width+"px,"+a.height+"px,0px)"};s&&(v=e.omit(v,["left","width"])),i.css(u,v),d.hasMedia&&(i.css(m,{width:a.width+"px",left:c(y,a,r),height:w+"px"}),l(u,i,o,n,r,w,a))}}function c(e,t,i){return p.isFullScreenByEffect(e,i.renderFlags.renderFixedPositionBackgrounds)?Math.floor(t.absoluteLeft||0):0}function l(e,t,r,a,s,u,c){var l=e+g.MEDIA+g.CONTENT,h=d(a).mediaRef,p=r.custom[e].enableVideo;h&&("Image"!==h.type&&p?"WixVideo"===h.type?o.patchBgVideo(l,t,r,a,s,u,c):"Video"===h.type&&"YOUTUBE"===h.videoType&&n.patchBgVideo(l,t,r,a,s,u,c):i.patchBgImage(e,l,t,r,a,s,u,c))}function h(e){return e+g.BALATA}function d(t){return e.get(t,["designDataItem","background"],e.get(t,["dataItem","background"]))||{}}var g=t.balataConsts,p=t.containerBackgroundUtils;return{BALATA_PATHS_TO_REQUEST_MEASURE:[[g.BALATA],[g.BALATA,g.MEDIA],[g.BALATA,g.MEDIA,g.CONTENT],[g.BALATA,g.MEDIA,g.CONTENT,g.POSTER],[g.BALATA,g.OVERLAY],[g.BALATA,g.OVERLAY,g.OVERLAY]],measure:a,patch:u}}),define("layout/specificComponents/containerAndScreenWidthLayout",["lodash","zepto","layout/util/layout","coreUtils","siteUtils","layout/util/rootLayoutUtils","layout/util/calculateScreenWidthDimensions","layout/specificComponents/bgImageLayout","layout/specificComponents/balataLayout"],function(e,t,i,o,n,r,a,s,u){function c(e,t,i){t.height[e]=i[e].offsetHeight,p(e,t,i)}function l(e){return e.isMobileView()?"mobile":"desktop"}function h(t,i){return e.get(t.dataItem,["pageBackgrounds",l(i),"ref"])}function d(i,o,r,a,s){c(i,o,r),o.shrinkableContainer[i]=!0;var u=n.layout.getPageBottomChildEnd(o,r,a,s)+o.containerHeightMargin[i],l=a.getPageMinHeight(),d=e.get(s,["propertiesItem",a.isMobileView()?"mobile":"desktop"]);if(d&&d.minHeight&&(l=d.minHeight),o.pageBottomByComponents[i]=u,o.minHeight[i]=l,o.height[i]=Math.max(l,u),o.width[i]=r[i].offsetWidth,r.POPUPS_ROOT=t("#POPUPS_ROOT"),s.dataItem.isPopup){var g={background:h(s,a)},p=e.clone(s);p.id+=H,p.designDataItem=g,o.top[i]=0,m(i,o,r,a,p)}}function g(e,t,i){var o=t.height[e+"inlineContent"]||0;t.containerHeightMargin[e]=o?i[e].offsetHeight-o:0}function p(e,t,i){t.left[e]=0,g(e,t,i)}function m(e,t,i,o,n){p(e,t,i),R(n)&&u.measure(e,t,i,o,n,{left:Math.max(0,.5*(t.clientWidth-t.width.screen)),width:t.width.screen,height:t.innerHeight.screen})}function f(e,t,i,o,n){if(p(e,t,i),R(n)){var r=a(t,o,n.rootId);t.width[e]=r.width;var s={width:r.width,left:r.left,height:t.height[e]};u.measure(e,t,i,o,n,s)}}function y(e,t,i,o,n){t.custom[e]={isFixedPosition:n.layout.fixedPosition},p(e,t,i)}function w(e,t){t.css(e,{left:0})}function v(e,t,i,o,n,r){t.css(r,{width:i.width.screen,left:E(n.getSiteWidth(),i.width.screen,n)}),w(e,t)}function C(e,t,i,o,n){v(e,t,i,o,n,e+"screenWidthBackground")}function b(e,i,o){p(e,i,o);var n=t(o[e+"navigationArrows"]);i.custom[e]={offset:parseInt(n.attr("data-navigation-button-margin"),10)}}function M(e,i,o,n,r){var a=t(o[e]),s=a.data("parent-id");i.minHeight[e]=a.data("min-height"),i.height[e]=i.height[s],f(e,i,o,n,r)}function S(e,t,i,o,n){var s=e+"inlineContent",u=s+"Parent",c=a(i,o,n.rootId);t.css(u,{left:c.left,width:c.width}),t.css(s,{left:-1*c.left,width:r.getRootWidth(o,i,n.rootId)})}function I(e,t,i,o,n){S(e,t,i,n,o)}function T(e,t,i,o,n){w(e,t,i),S(e,t,i,n,o);var r=E(o.layout.width,i.width.screen,n)+i.custom[e].offset;t.css(e,{width:n.getSiteWidth()}),t.css(e+"prevButton",{left:r}),t.css(e+"nextButton",{right:r})}function x(t,i,o,n,r){if(n.dataItem.isPopup){i.css("POPUPS_ROOT",{width:o.innerWidth.screen,height:o.innerHeight.screen});var a=t+H,s=e.defaultsDeep({id:a,rootId:"masterPage",structure:{behaviors:[]}},n),c=h(n,r);s.designDataItem={background:c},u.patch(t,i,o,s,r,{left:o.left[a],top:o.top[a],width:o.width[a],height:o.height[a]})}}function A(t,i,o,n,s,c){if(R(n)){w(t,i);var l=a(o,s,n.rootId),h=e.assign({top:0,left:l.left,width:l.width,height:o.height[t],absoluteLeft:0},c);i.css(t,{width:r.getRootWidth(s,o,n.rootId)}),u.patch(t,i,o,n,s,h)}}function L(t){return"Image"===e.get(t,["dataItem","type"])}function P(e,t,i,o,n){var r=a(t,o,n.rootId);t.width[e]=r.width,t.left[e]=r.left,L(n)&&s.measureLegacyBgImageStrip(e,t,i,o,n)}function D(e,t,i,o,n){if(t.css(e,{width:i.width[e]+"px",left:i.left[e]+"px"}),L(o)){var r={width:i.width[e],height:i.height[e]};s.patchLegacyBgImageStrip(e,t,i,o,n,r)}else{var a=e+"bg";t.css(a,{backgroundImage:"none"})}}function E(e,t,i){return i.isMobileView()||i.isMobileDevice()?0:Math.min(parseInt(Math.floor((e-t)/2),10),0)}function B(e,t,i,o){var n=o.layout&&o.layout.fixedPosition;t.css(e,{height:i.height[e],bottom:n?i.siteMarginBottom:"auto",top:n?"auto":i.top[e]})}function R(t){return e.isUndefined(t.designDataItem)?t.dataItem.background:t.designDataItem.background}var H=o.balataConsts.BALATA;return i.registerRequestToMeasureDom("mobile.core.components.Container"),i.registerRequestToMeasureDom("mobile.core.components.Page"),i.registerRequestToMeasureDom("wixapps.integration.components.AppPage"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShow"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainer"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripColumnsContainer"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.Column"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShowSlide"),i.registerMeasureChildrenFirst("mobile.core.components.Page",!0),i.registerMeasureChildrenFirst("wixapps.integration.components.AppPage",!0),i.registerRequestToMeasureChildren("mobile.core.components.Container",[["inlineContent"]]),i.registerRequestToMeasureChildren("mobile.core.components.Page",function(e,t,i,o){return o.dataItem.isPopup?[["inlineContent"]].concat(u.BALATA_PATHS_TO_REQUEST_MEASURE):[["inlineContent"]]}),i.registerRequestToMeasureChildren("wixapps.integration.components.AppPage",[["inlineContent"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer",[["screenWidthBackground"],["inlineContent"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer",[["screenWidthBackground"],["inlineContent"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer",[["screenWidthBackground"],["inlineContent"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer",[["screenWidthBackground"],["inlineContent"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShow",[["background"],["inlineContentParent"],["inlineContent"],["shownOnAllSlides"],["navigationArrows"],["prevButton"],["nextButton"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer",[["inlineContent"]].concat(u.BALATA_PATHS_TO_REQUEST_MEASURE)),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(u.BALATA_PATHS_TO_REQUEST_MEASURE)),i.registerCustomMeasure("mobile.core.components.Container",g),i.registerCustomMeasure("mobile.core.components.Page",d),i.registerCustomMeasure("wixapps.integration.components.AppPage",d),i.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer",y),i.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer",c),i.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer",y),i.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",p),i.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShow",b),i.registerCustomMeasure("wysiwyg.viewer.components.StripContainer",f),i.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShowSlide",M),i.registerCustomMeasure("wysiwyg.viewer.components.BgImageStrip",P),i.registerSAFEPatchers("wysiwyg.viewer.components.FooterContainer",[C,B]),i.registerSAFEPatcher("wysiwyg.viewer.components.HeaderContainer",C),i.registerSAFEPatcher("mobile.core.components.Page",x),i.registerSAFEPatcher("wysiwyg.viewer.components.PagesContainer",C),i.registerSAFEPatcher("wysiwyg.viewer.components.ScreenWidthContainer",C),i.registerSAFEPatcher("wysiwyg.viewer.components.StripContainerSlideShow",T),i.registerSAFEPatcher("wysiwyg.viewer.components.StripContainer",A),i.registerSAFEPatchers("wysiwyg.viewer.components.StripContainerSlideShowSlide",[I,A]),i.registerSAFEPatcher("wysiwyg.viewer.components.BgImageStrip",D),{measureContainer:g,measureStripContainer:f,patchStripContainer:A}}),define("layout/specificComponents/groupLayout",["lodash","layout/util/layout","coreUtils"],function(e,t,i){function o(t,o,r,a,s){var u=i.dataUtils.getChildrenData(s.structure,a.isMobileView()),c=n(u,o);o.left[t]=s.layout.x,u.length>0&&(o.width[t]=c.right-c.left,o.height[t]=c.bottom-c.top,o.top[t]=s.layout.y+c.top,o.left[t]=s.layout.x+c.left,e.forEach(u,function(e){o.top[e.id]=e.layout.y-c.top,o.left[e.id]=e.layout.x-c.left}))}function n(t,o){var n,r,a,s;return n=a=Number.MAX_VALUE,r=s=-Number.MAX_VALUE,e.forEach(t,function(e){var t=e.layout,u=o.left&&o.left[e.id]?o.left[e.id]:t.x,c=o.width&&o.width[e.id]?o.width[e.id]:t.width,l=o.top&&o.top[e.id]?o.top[e.id]:t.y,h=o.height&&o.height[e.id]?o.height[e.id]:t.height,d=i.boundingLayout.getBoundingLayout({x:u,y:l,width:c,height:h,rotationInDegrees:t.rotationInDegrees});n=Math.min(n,d.x),r=Math.max(r,d.x+d.width),a=Math.min(a,d.y),s=Math.max(s,d.y+d.height)}),{left:n,right:r,top:a,bottom:s}}function r(t,o,n,r,a){o.css(t,{width:n.width[t],height:n.height[t],top:n.top[t],left:n.left[t]});var s=i.dataUtils.getChildrenData(r.structure,a.isMobileView());e.forEach(s,function(e){o.css(e.id,{top:n.top[e.id],left:n.left[e.id]})})}t.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",!0),t.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"),t.registerCustomMeasure("wysiwyg.viewer.components.Group",o),t.registerSAFEPatcher("wysiwyg.viewer.components.Group",r)}),define("layout/wixappsLayout/proxyLayoutRegistrar",[],function(){var e={};return{registerCustomMeasure:function(t,i){e[t]=i},getProxiesToMeasure:function(){return e}}}),define("layout/specificComponents/wixappsLayout",["zepto","lodash","coreUtils","layout/wixappsLayout/proxyLayoutRegistrar","layout/util/layout","layout/util/singleCompLayout","experiment"],function(e,t,i,o,n,r){function a(){var i=t.toArray(arguments),o=i.join(""),n=i.slice(1).join("");return e("#"+o)[0]||e("#"+n)[0]}function s(e,t,i){return i.custom[e]&&i.custom[e].appPartShouldRenderAgain}function u(e,t,i,o){r.measureComponentChildren(e,a,o,i,t)}function c(e,t,i,o){var n=e.compId,s=a(n);t[n]=s;var c=e.structureInfo;c.id=n,c.type=e.compType,u(c,o,t,i),r.maps.classBasedCustomMeasures[e.compType]&&r.maps.classBasedCustomMeasures[e.compType](n,i,t,o,e.structureInfo)}function l(e,o,n){var r=e+m,a=t.get(n,[e,"attributes","data-state","value"]);i.stringUtils.isTrue(n[e].getAttribute("data-dynamic-height"))&&"loading"!==a&&(o.height[e]=o.height[r],o.minHeight[e]=o.height[r])}function h(e,i,n,r,a){var s=e.id,u=s+m,l=i.querySelector("#"+u);n.custom[s]=n.custom[s]||{};var h=!1;t.forEach(o.getProxiesToMeasure(),function(e,i){var o=p(i,l);n.custom[s][i]=n.custom[s][i]||[],t.forEach(o,function(t,o){var u=e(t,a,n);n.custom[s][i][o]=u,u.comp&&c(u.comp,r,n,a),u.needsRelayout&&!n.custom[s][i][o].didRelayout&&(h=!0,n.custom[s][i][o].didRelayout=!0)})});var d={};return d[e.id]=!0,{needsAdditionalInnerLayout:h,changedCompsMap:d}}function d(e,i,n,a,s){var u=e.id;i.custom[u].appPartShouldRenderAgain=t.reduce(o.getProxiesToMeasure(),function(e,o,c){var l=i.custom[u][c],h=t.reduce(l,function(e,t){g(t.domManipulations);var o=t.shouldRenderAgain,u=t.comp;return u&&(o=o||r.patchComponent(u.structureInfo,n,a,i,s)),e||o},!1);return e||h},!1)}function g(i){t.forEach(i,function(i){var o=e(i.node),n=i.funcName,r=t.isArray(i.params)?i.params:[i.params];t.isFunction(o[n])&&o[n].apply(o,r)})}function p(t,i){return e("[data-proxy-name="+t+"]",i)}var m="inlineContent";return n.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart",h,d),n.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2",h,d),n.registerRequestToMeasureChildren("wixapps.integration.components.AppPart",[[m]]),n.registerRequestToMeasureDom("wixapps.integration.components.AppPart"),n.registerCustomMeasure("wixapps.integration.components.AppPart",l),n.registerSAFEPatcher("wixapps.integration.components.AppPart",s),n.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2",[[m]]),n.registerRequestToMeasureDom("wixapps.integration.components.AppPart2"),n.registerCustomMeasure("wixapps.integration.components.AppPart2",l),n.registerSAFEPatcher("wixapps.integration.components.AppPart2",s),{appPartMeasureFunction:l,appPartPatcherFunction:s,inlineContentId:m,preMeasureProxies:h,postPatchProxies:d}}),define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){return{trim:function(e){return e.replace(/^\s+|\s+$/g,"")},round:function(e){return Math.round(1e6*e)/1e6}}}),define("layout/specificComponents/svgShape/svgPathParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(e,t){return{getParsedPath:function(i){var o=t.trim(i);return""===o?[]:o.match(/[a-z][^a-z]*/gi).map(function(i){for(i=i.replace(/-/g," -").replace(/,/g," ").replace(/(-?\d*[\.\-]\d+)/g,function(e,t){return" "+t});e.includes(i,"  ");)i=i.replace(/ {2}/g," ");return[i.substring(0,1),t.trim(i.substring(1))]}).map(function(t){var i,o=[];return e.includes("QSCL",t[0].toUpperCase())&&1===t[1].split(",").length?(i=t[1].split(" ")).length%2!=0?t:(i.forEach(function(e,t,i){t%2==0&&o.push(e+" "+i[t+1])}),[t[0],o.join(",")]):t})},stringifyParsedPath:function(e){var t="";return e.forEach(function(e){e.forEach(function(e){t+=e})}),t}}}),define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(e){var t=function(t,i){return e.round(parseFloat(t)*i)},i=function(e,i,o){var n=e.split(/[\s,]+/);return t(n[0],i)+" "+t(n[1],o)};return{scaleSingleValue:t,scalePairString:i,scaleMultiplePairStrings:function(t,o,n){return""===t?"":t.split(",").map(function(t){return i(e.trim(t),o,n)}).join(",")},scaleMultipleSingleStrings:function(i,o){return""===i?"":i.split(/[\s,]+/).map(function(i){return t(e.trim(i),o)}).join(",")}}}),define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler","loggingUtils"],function(e,t,i,o){var n=function(){return""},r=function(e,t,o){return i.scaleSingleValue(e,o/(360*t))},a=function(e,t,n){return 7!==e.length?(o.log.verbose("incorrect arc string, should have exactly 7 parameters. (value was "+e.join(" ")),e.join(" ")):(e[0]=i.scaleSingleValue(e[0],t),e[1]=i.scaleSingleValue(e[1],n),e[2]=r(e[2],t,n),e[5]=i.scaleSingleValue(e[5],t),e[6]=i.scaleSingleValue(e[6],n),e.join(" "))},s=function(t,i,o){var n=t.split(/[\s,]+/),r=e.chunk(n,7),s=[];return e.forEach(r,function(e){s.push(a(e,i,o))}),s.join(" ")},u=function(i,o,n){var r=t.getParsedPath(i.getAttribute("d"));e.forEach(r,function(e){var t=[e[1]],i=e[0].toUpperCase();"V"===i?t.push(n):"H"===i?t.push(o):(t.push(o),t.push(n)),e[1]=c[e[0].toUpperCase()].apply(null,t)}),i.setAttribute("d",t.stringifyParsedPath(r))},c={M:i.scaleMultiplePairStrings,L:i.scaleMultiplePairStrings,H:i.scaleMultipleSingleStrings,V:i.scaleMultipleSingleStrings,Z:n,C:i.scaleMultiplePairStrings,S:i.scaleMultiplePairStrings,Q:i.scaleMultiplePairStrings,T:i.scaleMultiplePairStrings,A:s};return{scale:u}}),define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(e){return{getParsedPoints:function(t){var i,o=e.trim(t),n=o.split(/[\s,]+/),r=[];if(""===o)return[];for(i=0;i<n.length;i+=2)r.push([n[i],n[i+1]]);return r},stringifyPoints:function(t){var i="";return t.forEach(function(e){i+=e.join(",")+" "}),e.trim(i)}}}),define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(e,t,i){return{scale:function(o,n,r){var a=i.getParsedPoints(o.getAttribute("points"));e.forEach(a,function(e){e[0]=t.scaleSingleValue(e[0],n),e[1]=t.scaleSingleValue(e[1],r)}),o.setAttribute("points",i.stringifyPoints(a))}}}),define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){return{scale:function(t,i,o){var n=t.getAttribute("cx"),r=t.getAttribute("cy"),a=t.getAttribute("r"),s=Math.min(i,o);n&&r&&(t.setAttribute("cx",e.scaleSingleValue(n,s)),t.setAttribute("cy",e.scaleSingleValue(r,s)),t.setAttribute("r",e.scaleSingleValue(a,s)))}}}),define("layout/specificComponents/svgShape/svgRectScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){var t=function(t,i,o,n){o&&t.setAttribute(i,e.scaleSingleValue(o,n))};return{scale:function(e,i,o){var n=e.getAttribute("width"),r=e.getAttribute("height"),a=e.getAttribute("rx"),s=e.getAttribute("ry"),u=e.getAttribute("x"),c=e.getAttribute("y");t(e,"width",n,i),t(e,"height",r,o),t(e,"rx",a,i),t(e,"ry",s,o),t(e,"x",u,i),t(e,"y",c,o)}}}),define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){return{scale:function(t,i,o){var n=t.getAttribute("cx"),r=t.getAttribute("cy"),a=t.getAttribute("rx"),s=t.getAttribute("ry");n&&a&&(t.setAttribute("cx",e.scaleSingleValue(n,i)),t.setAttribute("rx",e.scaleSingleValue(a,i))),r&&s&&(t.setAttribute("cy",e.scaleSingleValue(r,o)),t.setAttribute("ry",e.scaleSingleValue(s,o)))}}}),define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(e,t){return{getParsedPoints:function(e){var i,o=t.trim(e),n=o.split(/[\s,]+/),r=[];if(""===o)return[];for(i=0;i<n.length;i+=2)r.push([n[i],n[i+1]]);return r},stringifyPoints:function(e){var i="";return e.forEach(function(e){i+=e.join(",")+" "}),t.trim(i)}}}),define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(e,t,i){return{scale:function(o,n,r){var a=i.getParsedPoints(o.getAttribute("points"));a=e.map(a,function(i){return e.map(i,function(e,i){return t.scaleSingleValue(e,i?r:n)})}),o.setAttribute("points",i.stringifyPoints(a))}}}),define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){return{scale:function(t,i,o){var n=t.getAttribute("x1"),r=t.getAttribute("y1"),a=t.getAttribute("x2"),s=t.getAttribute("y2");n&&r&&a&&s&&(t.setAttribute("x1",e.scaleSingleValue(n,i)),t.setAttribute("x2",e.scaleSingleValue(a,i)),t.setAttribute("y1",e.scaleSingleValue(r,o)),t.setAttribute("y2",e.scaleSingleValue(s,o)))}}}),define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(e,t,i,o,n,r,a,s,u){var c=function(t){return e.includes(["path","polygon","rect","circle","ellipse","polyline","line"],t.toLowerCase())},l=function(e,i,o,n){var r,a,s=i.width/i.height,u=s>n,c=s<n;return r=e.width?o&&u?i.height*n/e.width:i.width/e.width:1,a=e.height?o&&c?i.width/n/e.height:i.height/e.height:1,{scaleX:t.round(r),scaleY:t.round(a)}},h=function(e,t,i){return Math.abs(e.width-t.width)<i&&Math.abs(e.height-t.height)<i},d=function(e,t,i){e.setAttribute("transform","translate("+parseFloat(-1*i.x+.5*t)+","+parseFloat(-1*i.y+.5*t)+")")},g=function(e){var t=e.getAttribute("data-original-aspect-ratio");return t?Number(t):null},p=function(e,t){e.hasAttribute("data-original-aspect-ratio")||(e.setAttribute("data-original-aspect-ratio",t),e.setAttribute("viewBox",""),e.removeAttribute("viewBox"))};return{scale:function(t,m,f,y,w){var v=t.getElementsByTagName("g")[0],C=e.pick(f,["width","height"]),b=C.width/C.height,M=e.pick(f,["x","y"]),S={path:i,polygon:o,rect:r,circle:n,ellipse:a,polyline:s,line:u};if(v){var I=g(t);if(I||(I=f.width/f.height,p(t,I)),!h(m,C,1)||w&&b!==I){var T=l(C,m,w,I);e(v.childNodes).filter(function(e){return c(e.nodeName)}).forEach(function(e){var t=e.nodeName.toLowerCase();S[t].scale(e,T.scaleX,T.scaleY)}),d(v,y,{x:M.x*T.scaleX,y:M.y*T.scaleY}),t.style.width=Math.ceil(C.width*T.scaleX+y)+"px",t.style.height=Math.ceil(C.height*T.scaleY+y)+"px"}}}}}),define("layout/specificComponents/shapeLayout",["lodash","zepto","siteUtils","layout/util/layout","layout/specificComponents/svgShape/svgScaler"],function(e,t,i,o,n){function r(t,i,o){o.shapesBoundaries=o.shapesBoundaries||{};var n;o.shapesBoundaries[i]||(n=e.pick(t.getBBox(),["x","y","width","height"]),e.some(n)&&(o.shapesBoundaries[i]={boxBoundaries:n}))}function a(e,t,i){var o=i.width/i.height;e.shapesOriginalAspectRatio=e.shapesOriginalAspectRatio||{},e.shapesOriginalAspectRatio[t]=e.shapesOriginalAspectRatio[t]||o}function s(e,t,o,n){var r,a=t,s=n?"xMidYMid meet":"none",l=o,h=i.svgFeatureDetection.flags().isVectorEffect;return t?h?r=c(e,t,o,n):(r=c(e,t,o,n),a=u(e,t,o)):r=e,{viewBox:g(r),strokeWidth:a,size:l,preserveAspectRatio:s}}function u(e,t,i){return t*(1/Math.min((i.width-t)/e.width,(i.height-t)/e.height))}function c(e,t,i,o){var n,r,a,s;return o?n=r=Math.min((i.width-t)/e.width,(i.height-t)/e.height):(n=(i.width-t)/e.width,r=(i.height-t)/e.height),a=i.width/n,s=i.height/r,{width:a,height:s,x:e.x-(a-e.width)/2,y:e.y-(s-e.height)/2}}function l(e,t){var o=i.svgFeatureDetection.flags().isVectorEffect;return e>0&&!1===t&&!o}function h(t,i,o,n,s){var u=e.get(s,["styleItem","skin"]),c=o[t]&&o[t].getElementsByTagName("svg")[0];if(u&&c){o[t+"svg"]=c;var h=e.get(s,["propertiesItem","maintainAspectRatio"]);if(l(parseInt(e.get(s,["styleItem","style","properties","strokewidth"],1),10),h)){i.custom[t]={};var d=o[t+"svg-g"]=c.getElementsByTagName("g")[0];i.custom[t].boundingBox=d?d.getBBox():{},a(n,u,i.custom[t].boundingBox)}else r(c,u,n)}}function d(i,o,r,a,u){var c=o[i+"svg"],h=a.styleItem;if(c&&h){var d,g=a.propertiesItem,p=g&&g.maintainAspectRatio,m=parseInt(e.get(h,["style","properties","strokewidth"],1),10);if(l(m,p))d={width:r.width[i]-m,height:r.height[i]-m},n.scale(c,d,r.custom[i].boundingBox,m,p);else{var f=e.get(u,["shapesBoundaries",h.skin]);if(!f)return;d={width:r.width[i],height:r.height[i]};var y=s(f.boxBoundaries,m,d,p);t(c).css(e.pick(y,["strokeWidth","size"])),t(c).attr(e.pick(y,["preserveAspectRatio","viewBox"]))}}}var g=e.template("${x} ${y} ${width} ${height}");return o.registerCustomMeasure("wysiwyg.viewer.components.svgshape.SvgShape",h),o.registerPatcher("wysiwyg.viewer.components.svgshape.SvgShape",d),o.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseIconButton",h),o.registerPatcher("wysiwyg.viewer.components.PopupCloseIconButton",d),{}}),define("layout/specificComponents/richtextLayout",["lodash","layout/util/layout","experiment"],function(e,t,i){function o(e,t){t.css(e,{height:""})}var n="wysiwyg.viewer.components.WRichText";return t.registerSAFEPatcher(n,o),t.registerCustomMeasure(n,function(t,o,n,r,a){var s=n[t],u=e.get(a,"propertiesItem.minHeight"),c=e.get(a,"propertiesItem.packed",!1),l=s.offsetHeight,h=r.isMobileView(),d=i.isOpen("sv_unpackTextMeasureByMinHeight"),g=d&&!h?Math.max(u||0,l):l;o.minHeight[t]=g,d&&(c=c||!e.isUndefined(u)),c&&(o.height[t]=g)}),t.registerRequestToMeasureDom(n),{}}),define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","imageClientApi","lodash","coreUtils","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){function a(e,t,i,o,n){return g.getSizeAfterScaling({itemHeight:t,itemWidth:i,displayerData:e,imageMode:o.imageMode,heightDiff:parseInt(n.data("height-diff"),10)||0,widthDiff:parseInt(n.data("width-diff"),10)||0,bottomGap:parseInt(n.data("bottom-gap"),10)||0})}function s(e,n,r,s,u,c,l){var g=t(c),p=g.data("image-index"),m=o.defaults({displayMode:i.fittingTypes.SCALE_TO_FILL},u[p]),f=a(m,r,n,s,g),y=d.getContainerSize(f.imageWrapperSize,g),w=h.getItemPosition(l,n,r,s.margin,s.numCols);return{id:c.id,imageData:m,imageNodeId:c.id+"image",imageWrapperId:c.id+"imageWrapper",containerSize:y,sizeAfterScaling:f,position:w}}function u(e,i,n,r,a){d.measureFlexibleHeightGallery(e,i,n);var u=t(n[e]),c=n[e+"itemsContainer"],l=t(c).children(),g=a.dataItem.items;i.width[e]=Math.max(m,i.width[e]),i.height[e]=Math.max(p,i.height[e]);var f=parseInt(u.data("height-diff"),10)||0,y=parseInt(u.data("width-diff"),10)||0,w=parseInt(u.data("presented-row"),10)||0,v=a.propertiesItem,C=h.getItemWidth(v.margin,v.numCols,i.width[e],y),b=h.getItemHeight(v.margin,i.height[e],w,f);i.custom[e]={displayers:o.map(l,o.partial(s,e,C,b,a.propertiesItem,g))}}function c(e,t,i,n,a){var s=i.height[e],u=i.width[e],c=i.custom[e];t.css(e+"itemsContainer",{height:s,width:u}),t.css(e,{height:s,width:u}),o.forEach(c.displayers,function(e){var o=e.sizeAfterScaling;t.css(e.id,{height:o.displayerSize.height,width:o.displayerSize.width,left:e.position.left,top:e.position.top}),d.updateImageWrapperSizes(t,e.imageWrapperId,o),r.patchNodeImage(e.imageNodeId,t,i,a,e.imageData,e.containerSize)})}function l(e,t,i,n){var r=[["itemsContainer"]];return o.forEach(n.dataItem.items,function(e){var t={pathArray:[e.id,"image"],type:"core.components.Image"},i=[e.id,"imageWrapper"],o=[e.id];r.push(t,i,o)}),r}var h=n.matrix.calculations,d=n.galleriesCommonLayout,g=n.matrix.scalingCalculations,p=70,m=45;return e.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),e.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",u),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",l),e.registerSAFEPatcher("wysiwyg.viewer.components.MatrixGallery",c),{}}),define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","coreUtils","imageClientApi","lodash","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){function a(e,i,o,n,r){var a=t(r);return h.getSizeAfterScaling({itemHeight:i,itemWidth:o,displayerData:e,imageMode:n.imageMode,heightDiff:parseInt(a.data("height-diff"),10)||0,widthDiff:parseInt(a.data("width-diff"),10)||0,bottomGap:parseInt(a.data("bottom-gap"),10)||0})}function s(e,i,r,s,u,c){var l=t(c),h=l.data("image-index"),g=n.defaults({displayMode:o.fittingTypes.SCALE_TO_FILL},u[h]),p=a(g,i,r,s,l),m=d.getContainerSize(p.imageWrapperSize,l);return{id:c.id,imageData:g,imageNodeId:c.id+"image",imageWrapperId:c.id+"imageWrapper",containerSize:m,sizeAfterScaling:p}}function u(e,i,o,r,a){d.measureFlexibleHeightGallery(e,i,o);var u=o[e+"itemsContainer"],c=t(u).children(),l=t(o[e]),h=i.height[e]-parseInt(l.data("height-diff"),10)||0,g=i.width[e]-parseInt(l.data("height-diff"),10)||0,p=a.dataItem.items;i.custom[e]={displayers:n.map(c,n.partial(s,e,h,g,a.propertiesItem,p))}}function c(e,t,i,o,a){var s=o.propertiesItem,u=i.height[e],c=i.width[e],l=a.isMobileDevice()||a.isMobileView(),h=i.custom[e].displayers;if(!n.isEmpty(h)){if("flexibleHeight"===s.imageMode){var g=n.last(h);u=g.sizeAfterScaling.displayerSize.height}t.css(e,{height:u,width:c}),n.forEach(h,function(e){t.css(e.id,{height:u,width:c}),d.updateImageWrapperSizes(t,e.imageWrapperId,e.sizeAfterScaling),r.patchNodeImage(e.imageNodeId,t,i,a,e.imageData,e.containerSize,l)})}}function l(e,t,i,o){var r=[["itemsContainer"]];return n.forEach(o.dataItem.items,function(e){var t={pathArray:[e.id,"image"],type:"core.components.Image"},i=[e.id,"imageWrapper"],o=[e.id];r.push(t,i,o)}),r}var h=i.matrix.scalingCalculations,d=i.galleriesCommonLayout;return e.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),e.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",u),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",l),e.registerSAFEPatcher("wysiwyg.viewer.components.SlideShowGallery",c),{}}),define("layout/specificComponents/anchorLayout",["layout/util/layout"],function(e){function t(e,t){t.css(e,{width:"0px"})}e.registerSAFEPatcher("wysiwyg.common.components.anchor.viewer.Anchor",t)}),define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","coreUtils","layout/util/rootLayoutUtils","lodash"],function(e,t,i,o,n){function r(e,t,i,r,a){var c,p,m=o.getRootWidth(a,i,r.rootId),f=m-2*d,y=r.layout.fixedPosition,w=+n.get(i,["top","WIX_ADS"],0)+n.get(i,["height","WIX_ADS"],0);if(y?(p="calc(50% + "+(r.layout.x-m/2)+"px)",c=-r.layout.x+d):(p=r.layout.x+"px",c=-i.custom[e].menuContainerLeft),t.css(e,{left:p}),y&&t.css(e+u,{marginTop:w+"px"}),n.get(r,["styleItem","skin"],g)!==g){var v=i.height[e+l]-i.top[e+s];return t.css(e+s,{marginTop:w+"px",maxHeight:v+"px"}),void t.css(e+h,{height:i.height.screen+1+"px"})}var C=e+s;t.css(C,{maxHeight:(y?i.clientHeight-w:i.height.masterPage)-n.get(i,["custom",e,"menuContainerTop"],0)}),t.css(e+s,{width:f+"px",left:c+"px"})}function a(t,o,n){var r=e("#SITE_ROOT")[0],a=i.domMeasurements.getElementRect(n[t],r);if(o.custom[t]={menuContainerTop:a.bottom,menuContainerLeft:a.left-d},o.top[t+s]=i.domMeasurements.getBoundingRect(n[t+s]).top,n[t+l]&&(o.height[t+l]=i.domMeasurements.getElementRect(n[t+l]).height),o.height[t]=o.height[t+u],/_open\b/.test(n[t+u].className)){var h=i.domMeasurements.getElementRect(n[t+c],r);o.minHeight.masterPage=Math.max(o.minHeight.masterPage||0,h.bottom)}}var s="menuContainer",u="menuButton",c="menuItems",l="menuBackground",h="fullScreenOverlay",d=20,g="wysiwyg.viewer.skins.mobile.TinyMenuSkin";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",[[s],[u],[c],[h],[l]]),t.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",a),t.registerSAFEPatcher("wysiwyg.viewer.components.mobile.TinyMenu",r)}),define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","coreUtils","imageClientApi"],function(e,t,i,o,n,r){function a(e){return e.dataItem||e.structure.compData}function s(e,t){return e.getNonPageItemZoomData()||e.getDataByQuery(t)}function u(e){var t=e.getNonPageItemZoomData();return e.getExistingRootNavigationInfo(e.getFocusedRootId()).pageItemId||t&&t.id}function c(t,i,n,a,c){var l=u(c),h=!c.isMobileView()&&c.isMobileDevice()||c.isTabletDevice(),d=s(c,l),g=e.defaults({displayMode:r.fittingTypes.LEGACY_FULL},d);g.quality=e.defaults({quality:90},g.quality||{});var p=n.custom[t],m={width:p.imageContainerWidth,height:p.imageContainerHeight};if(o.patchNodeImage(t+l+"image",i,n,c,g,m),n.custom[t].hasPanel){var f=h?p.dialogBoxWidth:m.width;i.css(t+d.id+"panel",{width:f})}}function l(e,t,i,o,n){var r=i.custom[e];t.css(e+"dialogBox",{width:r.imageContainerWidth,minHeight:r.dialogBoxHeight,paddingTop:r.paddingTop}),c(e,t,i,o,n);var a=u(n);if(r.showDescription&&r.descriptionHeight>r.descriptionHeightLimit){var s=e+a+"description";t.css(s,{height:r.descriptionHeightLimit}),t.data(s,{expandable:"true"}),t.css(s,{height:r.descriptionHeightLimit}),t.css(e+a+"ellipsis",{display:""})}}function h(e,i,o,n){var r=u(n),a=s(n,r),c=!n.isMobileView()&&n.isMobileDevice()||n.isTabletDevice()?f.getNonOptimizedViewDimensions:f.getDesktopViewDimensions,l=t(o[e]),h=d(t(o[e+"dialogBox"])),g=e+r+"panel",p={width:parseInt(l.data("width-spacer"),10),height:parseInt(l.data("height-spacer"),10)},m={isMobileDevice:n.isMobileDevice(),isTabletDevice:n.isTabletDevice(),siteWidth:n.getSiteWidth()},y={width:i.width.screen,height:i.height.screen,innerHeight:i.innerHeight.screen};i.custom[e]=c(a,m,y,p,i.height[g],h),i.custom[e].hasPanel=Boolean(o[g])}function d(e){var t=g(e,"padding-bottom")+g(e,"padding-top");return{horizontal:g(e,"padding-right")+g(e,"padding-left"),vertical:t}}function g(e,t){return e&&t?parseInt(e.css(t),10)||0:0}function p(e,i){var o=t(i);if("none"!==o.css("display")){var n=parseInt(o.css("line-height"),10);e.showDescription=!0,e.descriptionHeight=o.height(),e.descriptionHeightLimit=Math.floor(3*n)}}function m(e,t,i,o,n){var r=u(o),a=s(o,r),c=f.getMobileViewDimensions(a,o,t);p(c,i[e+r+"description"]),c.isMobileZoom=n,t.custom[e]=c}var f=n.mediaZoomCalculations;i.registerCustomMeasure("wysiwyg.components.imageZoom",function(e,t,i,o,n){var r=a(n).id;(o.isMobileView()?m:h)(e+r,t,i,o)}),i.registerSAFEPatcher("wysiwyg.components.imageZoom",function(e,t,i,o,n){var r=a(o).id;(n.isMobileView()?l:c)(e+r,t,i,o,n)}),i.registerRequestToMeasureChildren("wysiwyg.components.imageZoom",function(e,t,i,o){var n=a(o).id,r=u(e),s={pathArray:[n,r,"image"],type:"core.components.Image"};return e.isMobileView()?[[n],s,[n,"dialogBox"],[n,r,"description"],[n,r,"ellipsis"]]:[[n],s,[n,"dialogBox"],[n,"buttonPrev"],[n,"buttonNext"],[n,r,"panel"]]})}),define("layout/specificComponents/tpaGalleryLayout",["zepto","lodash","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(e,t,i,o){function n(e){return function(t,i,o,n,r){e.forEach(function(e){e(t,i,o,n,r)})}}function r(e,t){t.width[e]=Math.max(10,t.width[e]),t.minHeight[e]=10}function a(e,t,i){t.css(e+"iframe",{width:i.width[e],height:i.height[e]})}function s(e,t,i,n,r){var a=o(i,n,r.rootId);t.css(e,{width:a.width+"px",left:a.left+"px"}),t.attr(e+"iframe",{style:{width:a.width+"px"}}),i.width[e]=a.width,i.left[e]=a.left}function u(e,t){t.height[e]=.33*t.width[e]}function c(e,t,i,n,r){if(r.propertiesItem.fitToScreenWidth){var a=i[e],s=o(t,n,r.rootId);a.style.width=s.width+"px",a.style.left=s.left+"px",t.width[e]=s.width,t.left[e]=s.left}}function l(e,t,i,o,n){"vertical"===n.propertiesItem.orientation&&h(e,t,i)}function h(i,o,n){o.height[i]=t.head(e(n[i]).find("iframe")).offsetHeight}function d(e,t,i,o,n){s(e,t,i,n,o)}i.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.Honeycomb",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.Accordion",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.Masonry",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.Impress",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.Freestyle",[["iframe"]]),i.registerRequestToMeasureChildren("tpa.viewer.components.Thumbnails",[["iframe"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DGallery",[["iframe"]]),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DCarousel",[["iframe"]]),i.registerSAFEPatcher("tpa.viewer.components.StripShowcase",d),i.registerSAFEPatcher("tpa.viewer.components.StripSlideshow",d),i.registerSAFEPatcher("tpa.viewer.components.Collage",a),i.registerSAFEPatcher("tpa.viewer.components.Accordion",a),i.registerSAFEPatcher("tpa.viewer.components.Impress",a),i.registerSAFEPatcher("tpa.viewer.components.Freestyle",a),i.registerSAFEPatcher("tpa.viewer.components.Thumbnails",a),i.registerSAFEPatcher("tpa.viewer.components.Honeycomb",a),i.registerSAFEPatcher("tpa.viewer.components.Masonry",a),i.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DGallery",a),i.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DCarousel",a),i.registerCustomMeasure("tpa.viewer.components.Collage",n([h,c,r])),i.registerCustomMeasure("tpa.viewer.components.Masonry",n([h,r])),i.registerCustomMeasure("tpa.viewer.components.Honeycomb",r),i.registerCustomMeasure("tpa.viewer.components.Accordion",r),i.registerCustomMeasure("tpa.viewer.components.Impress",r),i.registerCustomMeasure("tpa.viewer.components.Freestyle",n([l,r])),i.registerCustomMeasure("tpa.viewer.components.StripShowcase",r),i.registerCustomMeasure("tpa.viewer.components.StripSlideshow",r),i.registerCustomMeasure("tpa.viewer.components.Thumbnails",r),i.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DGallery",r),i.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DCarousel",n([r,u]))}),define("layout/specificComponents/youTubeSubscribeButtonLayout",["layout/util/layout"],function(e){function t(e,t,o,n,r){var a=r.propertiesItem.layout,s=i[a+(n.browser.ie?"IE":"")];t.width[e]=s.width,t.height[e]=s.height}var i={default:{width:145,height:33},defaultIE:{width:145,height:33},full:{width:212,height:55},fullIE:{width:212,height:67}};return e.registerRequestToMeasureDom("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"),e.registerCustomMeasure("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",t),{}}),define("layout/specificComponents/wFacebookCommentLayout",["layout/util/layout","zepto"],function(e,t){function i(e,i,o){var n=t(o[e]).find("iframe")[0];n&&(i.height[e]=Math.max(i.height[e],n.offsetHeight))}e.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment",i)}),define("layout/specificComponents/facebookLikeLayout",["layout/util/layout"],function(e){function t(e){var t=e?e.layout:n.layout;t=e&&e.show_faces?t+"_showFaces":t;var i=e?e.action:n.action;return r[t][i]}function i(e,i,o,n,r){var a=t(r.propertiesItem);i.width[e]=a.w,i.height[e]=a.h}function o(e,t,i){var o=i.width[e],n=i.height[e];t.css(e+"iframe",{width:o,height:n})}var n={layout:"box_count",show_faces:"box_count",action:"like"},r={standard:{like:{w:250,h:40},recommend:{w:290,h:40}},standard_showFaces:{like:{w:250,h:85},recommend:{w:290,h:85}},button_count:{like:{w:170,h:20},recommend:{w:137,h:20}},box_count:{like:{w:106,h:65},recommend:{w:125,h:65}},box_count_showFaces:{like:{w:85,h:65},recommend:{w:125,h:65}},button_count_showFaces:{like:{w:137,h:20},recommend:{w:137,h:20}}};return e.registerRequestToMeasureChildren("wysiwyg.viewer.components.WFacebookLike",[["iframe"]]),e.registerCustomMeasure("wysiwyg.viewer.components.WFacebookLike",i),e.registerSAFEPatcher("wysiwyg.viewer.components.WFacebookLike",o),{}}),define("layout/specificComponents/formMixinLayout",["layout/util/layout"],function(e){function t(e,t){var i=t.height[e+"wrapper"];i&&(t.height[e]=i)}function i(e,i,o){t(e,i,o);i.width[e]=Math.max(i.width[e],180),i.minWidth[e]=180,i.minHeight[e]=180}function o(e,t){var i=t.height[e+"wrapper"];i&&(t.height[e]=i)}["wysiwyg.viewer.components.ContactForm","wysiwyg.viewer.components.DynamicContactForm"].forEach(function(t){e.registerCustomMeasure(t,i),e.registerRequestToMeasureChildren(t,[["wrapper"]])}),e.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm"),e.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",[["wrapper"]]),e.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",o)}),define("layout/specificComponents/backOfficeTextLayout",["layout/util/layout"],function(e){function t(e,t,i){var o=i[e].childNodes[0];o&&(t.height[e]=Math.max(t.height[e],o.offsetHeight))}e.registerCustomMeasure("wysiwyg.common.components.backofficetext.viewer.BackOfficeText",t)}),define("layout/specificComponents/vkShareLayout",["layout/util/layout"],function(e){function t(e,t,i){var o=i[e];o&&(t.height[e]=o.offsetHeight,t.width[e]=o.offsetWidth)}e.registerCustomMeasure("wysiwyg.viewer.components.VKShareButton",t),e.registerRequestToMeasureDom("wysiwyg.viewer.components.VKShareButton")}),define("layout/specificComponents/adminLoginLayout",["zepto","layout/util/layout"],function(e,t){function i(t,i,n){var r=e(n[t+"label"]);i.width[t]=Math.max(r.offset().width,i.width[t]),i.height[t]=Math.max(o,i.height[t]),i.minWidth[t]=r.offset().width}var o=17;t.registerCustomMeasure("wysiwyg.viewer.components.AdminLoginButton",i),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.AdminLoginButton",[["label"]])}),define("layout/specificComponents/homePageLoginLayout",["zepto","layout/util/layout"],function(e,t){function i(t,i,o){var n=e(o[t+"memberTitle"]),r=e(o[t+"actionTitle"]);i.width[t]=Math.max(n.offset().width,r.offset().width,i.width[t]),i.height[t]=Math.max(n.offset().height+r.offset().height,i.height[t])}t.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.HomePageLogin",i),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.HomePageLogin",[["memberTitle"],["actionTitle"]])}),define("layout/specificComponents/iTunesButtonLayout",["layout/util/layout"],function(e){function t(e,t){t.minWidth[e]=110,t.width[e]=Math.min(400,t.width[e]),t.height[e]=40*t.width[e]/110}e.registerCustomMeasure("wysiwyg.viewer.components.ItunesButton",t)}),define("layout/specificComponents/paypalLayout",["layout/util/layout"],function(e){return e.registerCustomMeasure("wysiwyg.viewer.components.PayPalButton",function(e,t,i){t.height[e]=i[e+"submitImage"].offsetHeight,t.width[e]=i[e+"submitImage"].offsetWidth}),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PayPalButton",[["submitImage"]]),{}}),define("layout/specificComponents/wixSiteLayout",["zepto","layout/util/layout"],function(e,t){function i(){var t=e("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),i=e("<div>").css({width:"100%"}).appendTo(t).width();return t.remove(),100-i}function o(e){return"WixSite"===e.rendererModel.siteInfo.documentType}function n(e){return e.isTabletDevice()&&o(e)}function r(e,t){e.css("body",{width:t.width.body})}function a(e,t){c=c||i();var o=window.document.body.clientWidth,n=window.innerWidth,r=o;n>o+c&&(r=n),e.body=window.document.body,t.width.body=r}function s(e,t,i,o,a){n(a)&&r(t,i)}function u(e,t,i,o){n(o)&&a(i,t)}var c;t.registerCustomMeasure("document",u),t.registerSAFEPatcher("document",s)}),define("layout/specificComponents/buttonLayout",["zepto","lodash","layout/util/layout"],function(e,t,i){function o(e){return parseInt(e.paddingTop,10)+parseInt(e.paddingBottom,10)}function n(e){return parseInt(e.marginRight,10)+parseInt(e.marginLeft,10)}function r(t,i,r){var a=t+"label",s=e(r[t]),u=s.text(),c=s.data("should-use-flex"),l=window.getComputedStyle(r[t]),h=window.getComputedStyle(r[a]),d=l.minHeight;d&&parseInt(d,10)||(d=i.height[a]),i.minHeight[t]=parseInt(d,10),i.minWidth[t]=c?i.width[a]:i.width[a]+n(h);var g=s.data("shouldPreventWidthMeasurement");g||(i.width[t]=function(){return u!==""+s.data("prevText")}()&&function(){return i.minWidth[t]<s.data("prevMinWidth")}()&&function(){return s.data("prevWidth")===s.data("prevMinWidth")}()&&i.width[a]>0?i.minWidth[t]:Math.max(i.width[t],i.minWidth[t])),i.height[t]=Math.max(i.height[t],i.minHeight[t]),i.custom[t]={align:s.attr("data-align"),margin:parseInt(s.attr("data-margin"),10),shouldPreventWidthMeasurement:g,shouldUseFlex:c,text:u},i.custom[a]={verticalPadding:o(h)};var p=i.width[a]+i.custom[t].margin>i.width[t],m=i.custom[t].align;"center"!==m&&(c?i.custom[a].margin=p?i.width[t]-i.width[a]:i.custom[t].margin:i.custom[a]["margin-"+m]=p?i.width[t]-i.width[a]:i.custom[t].margin)}function a(e,i,o){var n;if(o.custom[e].shouldUseFlex){n={};var r=o.custom[e].align;return"center"!==r&&o.custom[i].margin&&(n["margin-"+r]=o.custom[i].margin),n}return n={"line-height":o.height[e]-o.custom[i].verticalPadding+"px"},t.reduce(["margin-left","margin-right"],function(e,n){return t.isUndefined(o.custom[i][n])||(e[n]=o.custom[i][n]),e},n)}function s(e,t,i){var o={height:i.height[e],"min-height":i.minHeight[e]};i.custom[e].shouldPreventWidthMeasurement||(o.width=i.width[e]),t.css(e,o);var n=e+"label",r=a(e,n,i);t.css(n,r),t.data(e,{prevText:i.custom[e].text,prevMinWidth:i.minWidth[e],prevWidth:i.width[e]})}i.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton",[["label"]]),i.registerCustomMeasure("wysiwyg.viewer.components.SiteButton",r),i.registerSAFEPatcher("wysiwyg.viewer.components.SiteButton",s),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupCloseTextButton",[["label"]]),i.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseTextButton",r),i.registerSAFEPatcher("wysiwyg.viewer.components.PopupCloseTextButton",s)}),define("layout/wixappsLayout/proxyLayout/util/masonryCalculations",["lodash"],function(e){return{getColumnSidePadding:function(e,t,i,o){var n="rtl"===o,r=Math.floor(i/t),a=e*r,s=(t-1-e)*r;return{right:n?a:s,left:n?s:a}},getMasonryRowsAndColumns:function(t,i){for(var o=[],n=[],r=[],a=0;a<i;a++)n.push(0),r.push(0);for(var s=0;s<t.length;s++){var u=e.indexOf(n,e.min(n));o.push({col:u,row:r[u],topOffset:n[u]}),n[u]+=t[s],r[u]++}return o}}}),define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/util/masonryCalculations"],function(e,t,i,o){function n(t){return{columns:parseInt(e(t).attr("data-columns"),10),direction:e(t).attr("data-direction"),horizontalGap:parseInt(e(t).attr("data-horizontal-gap"),10),verticalGap:parseInt(e(t).attr("data-vertical-gap"),10)}}function r(e){return t.map(e.childNodes,"clientHeight")}function a(e){var i=r(e),a=n(e),s=e.childNodes,u=o.getMasonryRowsAndColumns(i,a.columns),c=Math.floor(e.clientWidth/a.columns),l={domManipulations:[],needsRelayout:!0},h=l.domManipulations,d=[];t.forEach(s,function(e,t){var i=u[t],n=i.row*a.verticalGap+i.topOffset,r=o.getColumnSidePadding(i.col,a.columns,a.horizontalGap,a.direction),s=i.col*c;d.push(n);var l={position:"absolute",top:n+"px","padding-right":r.right+"px","padding-left":r.left+"px"};"rtl"===a.direction?l.right=s+"px":l.left=s+"px",h[t]={node:e,funcName:"css",params:l}});var g=t(s).map(function(e,t){return d[t]+i[t]}).max();return h.push({node:e,funcName:"css",params:{height:g+"px"}}),l}i.registerCustomMeasure("PaginatedColumnGalleryProxy",a)}),define("layout/wixappsLayout/proxyLayout/galleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(e,t,i){function o(e,t,i){var o=i+"itemsContainer";t.height[o]=e.offsetHeight,t.width[o]=e.offsetWidth,t.height[i]=e.offsetHeight,t.width[i]=e.offsetWidth}function n(i,n,r){var a=i.id+"itemsContainer",s=e("#"+a),u=e(i),c=Number(u.attr("data-total-columns")),l=Number(u.attr("data-total-rows")),h=Number(u.attr("data-gap")),d=u.data("autoscale"),g=Number(u.data("width")),p=Number(u.data("height")),m=[],f=s.children();if(f.length){var y=f[0],w=y.offsetWidth,v=y.offsetHeight;m=t.map(f,function(t){var i=parseInt(e(t).attr("data-index"),10),o=Math.floor(i/c)%l,n=i%c;return{node:t,funcName:"css",params:{top:o*v+o*h,left:n*w+n*h}}})}var C=!1;if(d){var b=i.parentNode;(C=p!==b.offsetHeight||g!==b.offsetWidth)&&m.push({node:i,funcName:"data",params:["width",b.offsetWidth]},{node:i,funcName:"data",params:["height",b.offsetHeight]}),o(b,r,i.id)}else o(i,r,i.id);return{domManipulations:m,shouldRenderAgain:C}}i.registerCustomMeasure("GalleryProxy",n)}),define("layout/wixappsLayout/proxyLayout/imageProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(e,t,i){function o(t,i,o){var n=e(t),r=t.firstChild.id,a={width:parseInt(n.attr("data-width"),10),height:parseInt(n.attr("data-height"),10),uri:n.attr("data-uri"),quality:i.getGlobalImageQuality()},s={displayMode:n.attr("data-display-mode")};return o.width[r]=t.offsetWidth,o.height[r]=t.offsetHeight,o.custom[r]={thisIsMyHeight:o.height[r]},{comp:{compType:"wysiwyg.viewer.components.WPhoto",compId:r,structureInfo:{dataItem:a,propertiesItem:s,layout:null,styleItem:null}},domManipulations:[]}}i.registerCustomMeasure("Image",o)}),define("layout/wixappsLayout/proxyLayout/buttonProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(e){function t(e,t,i){var o=e.id;return i.width[o]=e.offsetWidth,i.height[o]=e.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SiteButton",compId:o,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}}e.registerCustomMeasure("Button",t),e.registerCustomMeasure("Button2",t)}),define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(e){e.registerCustomMeasure("MediaLabel",function(e,t,i){var o=e.id;return i.width[o]=e.offsetWidth,i.height[o]=e.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.MediaRichText",compId:o,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(e,t){function i(t,i,o){var n=e(t),r=t.firstChild.id,a={aspectRatio:n.attr("data-aspect-ratio"),imageMode:n.attr("data-image-mode")};return o.width[r]=t.offsetWidth,o.height[r]=t.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SliderGallery",compId:r,structureInfo:{dataItem:null,propertiesItem:a,layout:null,styleItem:null}},domManipulations:[]}}t.registerCustomMeasure("SliderGallery",i)}),define("layout/specificComponents/imageButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout","imageClientApi"],function(e,t,i,o){function n(e,t){return{width:t.width[e],height:t.height[e]}}function r(t,n,r,a,s,u,c){var l=s.dataItem[t];if(l){var h=n+t,d=e.defaults({displayMode:o.fittingTypes.LEGACY_FULL},l);i.patchNodeImage(h,r,a,u,d,c)}}function a(t,i,o,a,u){var c=n(t,o);e.forEach(s,function(e){r(e,t,i,o,a,u,c)});var l=t+"link";i.css(l,{width:c.width,height:c.height})}var s=["defaultImage","hoverImage","activeImage"];t.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton"),t.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton",function(){var t=e.map(s,function(e){return{pathArray:[e],type:"core.components.Image"}});return t.push(["link"]),t}()),t.registerSAFEPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton",a)}),define("layout/specificComponents/mediaRichTextLayout",["layout/util/layout","zepto","lodash"],function(e,t,i){function o(){var e=i.toArray(arguments);return window.document.getElementById(e.join(""))}e.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText"),e.registerCustomMeasure("wysiwyg.viewer.components.MediaRichText",function(n,r,a,s){function u(t){e.measureMediaRichTextInnerComponent(t,o,r,a,s,t.structure)}var c=t(a[n]);r.custom[n]={prevWidth:c.data("width")};var l=s.getMediaRichTextInnerComponents(n),h=i.mapValues(l,"structureInfo");i.forEach(h,u)}),e.registerSAFEPatcher("wysiwyg.viewer.components.MediaRichText",function(t,o,n,r,a){function s(t){e.patchWithoutPositioning(t,o,n,a)}var u=n.custom[t].prevWidth,c=parseInt(n.width[t],10),l=a.getMediaRichTextInnerComponents(t),h=i.mapValues(l,"structureInfo");return i.forEach(h,s),u&&parseInt(u,10)===c?(o.css(t,{height:""}),!1):(o.data(t,{width:c}),!0)})}),define("layout/specificComponents/backToTopButtonLayout",["layout/util/layout"],function(e){function t(e,t,i){t.custom[e]={siteStructureBoundingClientRect:i.masterPage.getBoundingClientRect()}}function i(e,t,i,o,n){var r=e+"bg",a=n.mobile.getMobileZoomByScreenProperties();t.css(e,{zoom:a}),t.css(r,{right:i.custom[e].siteStructureBoundingClientRect.left})}e.registerRequestToMeasureChildren("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",[["bg"]]),e.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",t),e.registerSAFEPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",i)}),define("layout/specificComponents/appPartZoomLayout",["lodash","layout/util/layout","layout/specificComponents/wixappsLayout"],function(e,t,i){function o(e){return e.appPartName?e.id:e.dataItemRef.id}function n(e,t){return e+t.id+o(t)}function r(e,t,i){var o=e+"inlineContent",n=Math.max(i.height[e],i.height.screen);t.css(o,{height:n})}function a(e,t,i,o){var n=Math.max(o.height[t],o.height.screen);i.css(e,{height:n})}function s(t,i){var o=e.has(t,"dataItemRef")?t.dataItemRef.appInnerID:t.appInnerID;return!!i.getClientSpecMapEntry(o)}t.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom",function(e,t,n,r){if(!s(r.dataItem,e))return null;var a=o(r.dataItem),u=r.dataItem.id;return[[u,a],[u,a,i.inlineContentId]]}),t.registerCustomMeasure("wixapps.integration.components.AppPartZoom",function(e,t,o,r,a){if(!s(a.dataItem,r))return null;var u=n(e,a.dataItem);i.appPartMeasureFunction(u,t,o,r),t.custom[e]={marginTop:Math.max((t.height.screen-t.height[u])/2,0),height:t.height[u]}}),t.registerSAFEPatcher("wixapps.integration.components.AppPartZoom",function(e,t,o,u,c){if(s(u.dataItem,c)){var l=n(e,u.dataItem);c.isMobileView()?(a(e,l,t,o),r(l,t,o)):i.appPartPatcherFunction(l,t,o,null,c)}}),t.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom",function(e,t,o,r,a){if(!s(e.dataItem,a))return null;var u=n(e.id,e.dataItem),c={id:u},l=window.document.getElementById(u),h={};return h[e.id]=!0,{needsAdditionalInnerLayout:i.preMeasureProxies(c,l,o,r,a),changedCompsMap:h}},function(e,t,o,r,a){if(!s(e.dataItem,a))return null;var u={id:n(e.id,e.dataItem)};return i.postPatchProxies(u,t,o,r,a)})}),define("layout/specificComponents/facebookShareLayout",["layout/util/layout"],function(e){function t(e,t,i){var o=i[e].children[0];o&&(t.height[e]=Math.max(t.height[e],o.offsetHeight),t.width[e]=Math.max(t.width[e],o.offsetWidth))}function i(e,t,i){var o=i.width[e],n=i.height[e];t.css(e,{width:o,height:n})}e.registerCustomMeasure("wysiwyg.viewer.components.FacebookShare",t),e.registerSAFEPatcher("wysiwyg.viewer.components.FacebookShare",i),e.registerRequestToMeasureDom("wysiwyg.viewer.components.FacebookShare")}),define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","imageClientApi","coreUtils","layout/specificComponents/imageLayout"],function(e,t,i,o,n,r){function a(e,t,n,a,s,u,c,l,d){i.forEach(e,function(e,l){var g=h.getItemPosition(l,t,n,a.margin,a.numCols);u.css(e.imageItemId,{width:t,height:n,left:g.left,top:g.top});var p=i.assign({},d.dataItem.items[e.imageIndex],{displayMode:o.fittingTypes.SCALE_TO_FILL});r.patchNodeImage(e.imageItemId,u,c,s,p,{width:t,height:n})})}function s(e,t,o,n){var r=[["itemsContainer"]];return i.forEach(n.dataItem.items,function(e){r.push({pathArray:[e.id],type:"core.components.Image"})}),r}function u(e){return i.map(e,function(e){return{imageItemId:e.id,imageIndex:t(e).data("image-index")}})}function c(e,i,o){var n=i.custom[e]={},r=t(o[e]);n.heightDiff=parseInt(r.data("height-diff"),10),n.widthDiff=parseInt(r.data("width-diff"),10);var a=t(o[e+"itemsContainer"]);n.nextItemsData=u(a.children('div[data-page-desc="next"]')),n.prevItemsData=u(a.children('div[data-page-desc="prev"]')),n.currItemsData=u(a.children('div[data-page-desc="curr"]'))}function l(e,t,i,o,n){var r=i.height[e],s=i.width[e],u=i.custom[e],c=o.propertiesItem;t.css(e+"itemsContainer",{width:s-u.widthDiff,height:r-u.heightDiff});var l=h.getItemWidth(c.margin,c.numCols,s,u.widthDiff),d=h.getAvailableRowsNumber(c.maxRows,c.numCols,o.dataItem.items.length),g=h.getItemHeight(c.margin,r,d,u.heightDiff);a(u.nextItemsData,l,g,c,n,t,i,e,o),a(u.prevItemsData,l,g,c,n,t,i,e,o),a(u.currItemsData,l,g,c,n,t,i,e,o)}var h=n.matrix.calculations;return e.registerSAFEPatcher("wysiwyg.viewer.components.PaginatedGridGallery",l),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",s),e.registerCustomMeasure("wysiwyg.viewer.components.PaginatedGridGallery",c),{}}),define("layout/specificComponents/PinterestFollowLayout",["layout/util/layout"],function(e){return e.registerCustomMeasure("wysiwyg.viewer.components.PinterestFollow",function(e,t,i){t.height[e]=i[e+"followButtonTag"].offsetHeight,t.width[e]=i[e+"followButtonTag"].offsetWidth}),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PinterestFollow",[["followButtonTag"]]),{}}),define("layout/specificComponents/videoLayout",["lodash","layout/util/layout"],function(e,t){function i(t,i,o){var n=new RegExp("([?&])"+i+"=.*?(&|$)","i"),r=e.includes(t,"?")?"&":"?";return t.match(n)?t.replace(n,"$1"+i+"="+o+"$2"):t+r+i+"="+o}function o(e,t,o,n){if("FACEBOOK"===n.dataItem.videoType){var r=i(o.custom[e].src,"width",o.width[e]);r=i(r,"height",o.height[e]),t.attr(e+"FACEBOOK",{src:r})}}function n(e,t,i,o,n){var s=n.dataItem.videoType,u=r[s]||a;t.minWidth[e]=u.WIDTH,t.minHeight[e]=u.HEIGHT,t.width[e]=Math.max(t.width[e],u.WIDTH),t.height[e]=Math.max(t.height[e],u.HEIGHT),"FACEBOOK"===s&&(i[e+"FACEBOOK"]=i[e].getElementsByTagName("iframe")[0],t.custom[e]={src:i[e].getElementsByTagName("iframe")[0].src})}var r={VIMEO:{WIDTH:100,HEIGHT:100},YOUTUBE:{WIDTH:200,HEIGHT:200}},a={WIDTH:10,HEIGHT:10};t.registerCustomMeasure("wysiwyg.viewer.components.Video",n),t.registerSAFEPatcher("wysiwyg.viewer.components.Video",o)}),define("layout/specificComponents/soundCloudLayout",["layout/util/layout"],function(e){function t(e,t){t.minWidth[e]=250,t.minHeight[e]=50,t.width[e]=Math.max(t.width[e],250),t.height[e]=Math.max(t.height[e],50)}e.registerCustomMeasure("wysiwyg.viewer.components.SoundCloudWidget",t)}),define("layout/specificComponents/verticalLineLayout",["layout/util/layout"],function(e){e.registerCustomMeasure("wysiwyg.viewer.components.VerticalLine",function(e,t,i){t.height[e]=Math.min(t.height[e],2e3),t.width[e]=parseInt(i[e].style.width,10),t.left[e]=parseInt(i[e].style.left,10)})}),define("layout/specificComponents/boxSlideShowLayout",["zepto","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i,o){function n(e,t){t.height[e]=Math.max(s,t.height[e]),t.minHeight[e]=s}function r(t,i,n,r,a){i.top[t]=0,i.left[t]=0;var s=e(n[t]),c=s.data("parent-id");if(i.minHeight[t]=s.data("min-height"),i.height[t]=i.height[c],a.designDataItem.background){var l=t+u.BALATA;i.width[l]=i.width[t],i.height[l]=i.height[t],i.left[l]=i.left[t];var h=n[t].getBoundingClientRect();i.custom[t]={absoluteLeft:h.left},o.measure(t,i,n,r,a)}}function a(e,t,i,n,r){if(n.designDataItem.background){var a={top:i.top[e],left:i.left[e],width:i.width[e],height:i.height[e],absoluteLeft:i.custom[e].absoluteLeft};o.patch(e,t,i,n,r,a)}}var s=50,u=t.balataConsts;i.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow",n),i.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide",r),i.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShow"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShowSlide"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.BoxSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(o.BALATA_PATHS_TO_REQUEST_MEASURE)),i.registerSAFEPatcher("wysiwyg.viewer.components.BoxSlideShowSlide",a)}),define("layout/specificComponents/mediaContainerLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/balataLayout","experiment"],function(e,t,i,o,n){function r(i,r,a,s,c){if(c.designDataItem.background&&("wysiwyg.viewer.components.MediaPlayer"===c.type&&(r.custom[i]={alignments:{"wysiwyg.viewer.components.MediaOverlayControls":{vertical:"center",horizontal:"center",maxWidthFactor:.65,maxHeightFactor:.65},"wysiwyg.viewer.components.MediaControls":{vertical:"bottom",horizontal:"stretch",verticalMargin:2,horizontalMargin:2}}}),o.measure(i,r,a,s,c),n.isOpen("sv_cssDesignData"))){var l=i+u;a[l]=a[l]||t(a[i]).find("#"+l)[0];var h=window.getComputedStyle(a[l]),d=parseInt(h.getPropertyValue("border-left-width"),10);e.isUndefined(r.borderWidth)&&(r.borderWidth={}),r.borderWidth[i]=d,r.width[i]=c.layout.width||a[i].clientWidth||r.width[i]}}function a(e,t,i,r,a){if(r.designDataItem.background){n.isOpen("sv_cssDesignData")&&t.css(e+u,{left:-i.borderWidth[e],top:-i.borderWidth[e]});var s={top:0,left:0,width:i.width[e],height:i.height[e],absoluteLeft:i.absoluteLeft[e]};o.patch(e,t,i,r,a,s)}}var s=["wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.MediaPlayer"],u="container";e.forEach(s,function(e){i.registerCustomMeasure(e,r),i.registerRequestToMeasureChildren(e,o.BALATA_PATHS_TO_REQUEST_MEASURE),i.registerSAFEPatcher(e,a)})}),define("layout/util/mediaLayoutUtils",["lodash"],function(e){function t(e,t,i,o){var n=i.verticalMargin||0,r=i.horizontalMargin||0;switch(i.vertical){case"top":o.top[e]=0+n;break;case"center":o.top[e]=(o.height[t]-o.height[e])/2;break;case"bottom":o.top[e]=o.height[t]-o.height[e]-n}switch(i.horizontal){case"left":o.left[e]=0+r;break;case"center":o.left[e]=(o.width[t]-o.width[e])/2;break;case"right":o.left[e]=o.width[t]-o.width[e]-r;break;case"stretch":o.left[e]=0+r,o.width[e]=o.width[t]-2*r}}function i(t,i,o){var n="data-element-query-",r={};return e.forEach(o,function(o,a){var s=e.get(i,[a,t]);s&&(r[n+a]="",e.forEach(o,function(e){e.min<s&&e.max>s&&(r[n+a]&&(r[n+a]+=" "),r[n+a]+=e.name)}))}),r}return{updateAligmentsToMeasureMap:t,getElementQueries:i}}),define("layout/specificComponents/mediaControlsLayout",["lodash","layout/util/layout","layout/util/mediaLayoutUtils","coreUtils"],function(e,t,i,o){function n(e,t,i){var o=i[e].getAttribute("data-player-id");t.custom[e]={playerId:o,audio:i[e].getAttribute("data-audio")};var n=i[e].getAttribute("data-element-queries-def");n&&(t.custom[e].elementQueriesDefinition=a.elementQueries[n])}function r(t,o,n){var r=n.custom[t].playerId,a=e.get(n,["custom",r,"alignments",s],{}),u=e.get(n,["custom",t,"audio"]);i.updateAligmentsToMeasureMap(t,r,a,n);var c={top:n.top[t],left:n.left[t],width:n.width[t]},l=e.get(n.custom,[t,"elementQueriesDefinition"],{});o.css(t,c),o.attr(t,i.getElementQueries(t,n,l)),o.attr(t,{"data-element-query-parts":u})}var a=o.mediaConsts,s="wysiwyg.viewer.components.MediaControls",u=[["controls"],["play"],["volume"],["fullscreen"],["progress"],["time"]];t.registerCustomMeasure("wysiwyg.viewer.components.MediaControls",n),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.MediaControls",u),t.registerSAFEPatcher("wysiwyg.viewer.components.MediaControls",r)}),define("layout/util/svgUtils",["lodash","siteUtils"],function(e,t){function i(e){var t=e.split(" ");return{x:t[0],y:t[1],width:t[2],height:t[3]}}function o(t,i,o){o.shapesBoundaries=o.shapesBoundaries||{};var n;e.get(o.shapesBoundaries,[i,"boxBoundaries"])||(n=e.pick(t.getBBox(),["x","y","width","height"]),e.some(n)&&e.set(o.shapesBoundaries,[i,"boxBoundaries"],n))}function n(t,o,n){n.shapesBoundaries=n.shapesBoundaries||{};var r;e.get(n,["shapesBoundaries",o,"viewbox"])||(r=t.getAttribute("viewBox"))&&e.set(n.shapesBoundaries,[o,"viewbox"],i(r))}function r(e,i,o,n){var r,u=i,l=n?"xMidYMid meet":"none",h=o,d=t.svgFeatureDetection.flags().isVectorEffect;return i?d?r=s(e,i,o,n):(r=s(e,i,o,n),u=a(e,i,o)):r=e,{viewBox:c(r),strokeWidth:u,width:h.width,height:h.height,preserveAspectRatio:l}}function a(e,t,i){return t*(1/Math.min((i.width-t)/e.width,(i.height-t)/e.height))}function s(e,t,i,o){var n,r,a,s;return o?n=r=Math.min((i.width-t)/e.width,(i.height-t)/e.height):(n=(i.width-t)/e.width,r=(i.height-t)/e.height),a=i.width/n,s=i.height/r,{width:a,height:s,x:e.x-(a-e.width)/2,y:e.y-(s-e.height)/2}}function u(t){var i=e.get(t,["style","properties","strokewidth"]);return i?parseInt(i,10):0}var c=e.template("${x} ${y} ${width} ${height}");return{storeSVGMeasuresInSiteData:o,storeSVGViewboxInSiteData:n,getStrokeValue:u,getScaledViewBox:s,getScaledStroke:a,getSvgScaleProps:r}}),define("layout/specificComponents/svgPrimitiveLayout",["lodash","layout/util/svgUtils","layout/util/layout"],function(e,t,i){function o(i,o,n,a,s,u){var c=e.get(s,["shapesBoundaries",u]);if(c&&n.custom[i+r]){var l=t.getStrokeValue(a.styleItem),h={width:n.width[i],height:n.height[i]},d=t.getSvgScaleProps(c.viewbox,l,h,!0);o.css(i+r,e.pick(d,["strokeWidth"])),o.attr(i+r,e.pick(d,["preserveAspectRatio","viewBox"]))}}function n(e,i,o,n,a){var s=o[e].querySelector("svg");s&&(i.custom[e+r]={},o[e+r]=s,t.storeSVGViewboxInSiteData(s,a,n))}var r="svg";return i.registerCustomMeasure("wysiwyg.viewer.components.svgPrimitive",n),{measureNodeSvg:n,patchNodeSvg:o}}),define("layout/specificComponents/mediaOverlayControlsLayout",["lodash","layout/util/layout","layout/util/mediaLayoutUtils","layout/specificComponents/svgPrimitiveLayout"],function(e,t,i,o){function n(t,i,n,r,u){var c=n[t].getAttribute("data-player-id");n[t+a]=n[t].querySelector("#"+t+a);var l=e.get(u,["styleItem","style","properties","playButton"]);i.custom[t]={playerId:c,svgName:l},o.measureNodeSvg(t+s,i,n,r,l)}function r(t,n,r,c,l){var h=r.custom[t].playerId,d=e.get(r,["custom",h,"alignments",u],{}),g=r.width[h]*d.maxWidthFactor,p=r.height[h]*d.maxHeightFactor,m=r.width[t]/r.height[t];r.width[t]>g&&(r.width[t]=g,r.height[t]=r.width[t]*(1/m)),r.height[t]>p&&(r.height[t]=p,r.width[t]=r.height[t]*m),i.updateAligmentsToMeasureMap(t,h,d,r);var f={top:r.top[t],left:r.left[t],width:r.width[t],height:r.height[t]},y={top:-r.top[t],left:-r.left[t],width:r.width[h],height:r.height[h]};n.css(t,f),n.css(t+a,y);var w=r.custom[t].svgName;o.patchNodeSvg(t+s,n,r,c,l,w)}var a="catcher",s="indicator",u="wysiwyg.viewer.components.MediaOverlayControls",c=[{pathArray:[s]}];t.registerCustomMeasure("wysiwyg.viewer.components.MediaOverlayControls",n),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.MediaOverlayControls",c),t.registerSAFEPatcher("wysiwyg.viewer.components.MediaOverlayControls",r)}),define("layout/specificComponents/verticalAnchorsMenuLayout",["zepto","lodash","layout/util/layout"],function(e,t,i){function o(i,o,n){var r=e(n[i]),a=r.find("[class*=link]"),s=r.find("[class*=label]"),u=r.find("[class*=symbol]"),c=a.length,l=u.width(),h=Math.ceil(a.height()*c),d=0;t.forEach(s,function(t){d=Math.max(d,e(t).width())});var g=d+l;o.width[i]=Math.max(o.width[i],g),o.height[i]=Math.max(o.height[i],h),o.custom[i]={minHeight:h,minWidth:g}}function n(e,t,i){t.css(e,{width:i.width[e],height:i.height[e]})}i.registerCustomMeasure("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",o),i.registerSAFEPatcher("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",n)}),define("layout/specificComponents/columnsLayout",["lodash","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i,o){function n(t,i,o,n,r,a,s){var u=t.structure,c=u.id;a(u),o.minHeight[c]=0,o.height[c]=u.layout.height;var l=s(u);return r.isMobileView()&&(o.top[c]=n[c].offsetTop),{needsAdditionalInnerLayout:!1,changedCompsMap:e.mapValues(l,e.constant(!0))}}function r(i,n,r,a,s){var u=a.isMobileView(),l=t.dataUtils.getChildrenData(s.structure,u),h=e.map(l,"id");if(u){var d=2*s.propertiesItem.rowMargin+(l.length-1)*s.propertiesItem.columnsMargin;e.forEach(h,function(e,t){d+=n.height[e],n.minHeight[e]=n.height[e];var o=t===h.length-1;n.injectedAnchors[e]=o?[{fromComp:e,distance:s.propertiesItem.rowMargin,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:i}]:[{fromComp:e,distance:s.propertiesItem.columnsMargin,locked:!0,originalValue:0,targetComponent:h[t+1],topToTop:0,type:"BOTTOM_TOP"}]}),n.height[i]=d,n.height[i+c.BALATA]=d}else{var g=e(n.height).pick(h).values().max();e.forEach(h,function(e){n.top[e]=s.propertiesItem.rowMargin,n.minHeight[e]=g,n.injectedAnchors[e]=[{fromComp:e,distance:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:i}]}),n.height[i]=g+2*s.propertiesItem.rowMargin,n.containerHeightMargin[i]=s.propertiesItem.rowMargin,n.height[i+c.BALATA]=g+2*s.propertiesItem.rowMargin}o.measure(i,n,r,a,s);var p=r[i].getBoundingClientRect(),m=r[i+c.BALATA].offsetLeft;n.custom[i]={absoluteLeft:p.left+m,backgroundLeft:r[i+c.BALATA].offsetLeft,backgroundWidth:r[i+c.BALATA].offsetWidth}}function a(e,t,i,n,r){t.css(e,{height:i.height[e],left:0});var a={top:0,left:i.custom[e].backgroundLeft,width:i.custom[e].backgroundWidth,height:i.height[e],absoluteLeft:i.custom[e].absoluteLeft};o.patch(e,t,i,n,r,a,!0)}function s(e,t,i,n,r){t.height[e+c.BALATA]=t.minHeight[e],t.height[e]=t.minHeight[e],t.width[e]=i[e].offsetWidth,o.measure(e,t,i,n,r);var a=i[e].getBoundingClientRect(),s=i[e+c.BALATA].offsetLeft;t.custom[e]={absoluteLeft:a.left+s,backgroundLeft:i[e+c.BALATA].offsetLeft,backgroundWidth:i[e+c.BALATA].offsetWidth}}function u(e,t,i,n,r){t.css(e,{height:i.height[e]});var a={top:0,left:i.custom[e].backgroundLeft,width:i.custom[e].backgroundWidth,height:i.height[e],absoluteLeft:i.custom[e].absoluteLeft};o.patch(e,t,i,n,r,a,!0)}var c=t.balataConsts;i.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripColumnsContainer",o.BALATA_PATHS_TO_REQUEST_MEASURE),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.Column",o.BALATA_PATHS_TO_REQUEST_MEASURE),i.registerLayoutInnerCompsFirst("wysiwyg.viewer.components.Column",n,e.noop),i.registerCustomMeasure("wysiwyg.viewer.components.StripColumnsContainer",r),i.registerSAFEPatcher("wysiwyg.viewer.components.StripColumnsContainer",a),i.registerCustomMeasure("wysiwyg.viewer.components.Column",s),i.registerSAFEPatcher("wysiwyg.viewer.components.Column",u)}),define("layout/util/popupContainerDocking",["layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/balataLayout","siteUtils"],function(e,t,i){function o(e,t){return{top:0,left:0,width:e,height:t,absoluteLeft:0}}var n={NINE_GRID:"nineGrid",FULL_HEIGHT:"fullHeight",FULL_WIDTH:"fullWidth"};return{measure:function(o,r,a,s,u){var c=u.propertiesItem,l={};c.alignmentType!==n.FULL_WIDTH?(c.alignmentType===n.FULL_HEIGHT&&(r.minHeight[o]=r.innerHeight.screen,r.shrinkableContainer[o]=!0),l.width=r.width[o],r.left[o]=i.compAlignmentUtils.getLeft(c,r.width[o],r.width.screen,s.getSiteWidth()),t.measure(o,r,a,s,u,l)):e.measureStripContainer(o,r,a,s,u)},patch:function(r,a,s,u,c){var l,h=u.propertiesItem,d=c.getCurrentPopupId(),g=i.compAlignmentUtils.getTop(h,s.height[r],s.innerHeight.screen);s.top[r]=g,l=s.height[d]=g+s.height[r],a.css(d,{height:l}),a.css(r,{left:s.left[r],top:g,width:s.width[r],height:s.height[r]}),h.alignmentType===n.FULL_WIDTH?e.patchStripContainer(r,a,s,u,c,{width:s.width[r]}):t.patch(r,a,s,u,c,o(s.width[r],s.height[r]))}}}),define("layout/specificComponents/popupContainerLayout",["lodash","layout/util/layout","layout/util/popupContainerDocking","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/balataLayout"],function(e,t,i,o,n){function r(e,t,n,r,a){o.measureContainer(e,t,n,r,a),i.measure(e,t,n,r,a);var s=a.propertiesItem;t.width["ROOT_"+a.rootId]="fullWidth"===s.alignmentType?r.getSiteWidth():t.width[e],t.left["ROOT_"+a.rootId]=Math.floor(t.left[e]-r.getSiteX())}function a(e,t,o,n,r){i.patch(e,t,o,n,r)}t.registerMeasureChildrenFirst("wysiwyg.viewer.components.PopupContainer",!0),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupContainer",[["inlineContent"]].concat(n.BALATA_PATHS_TO_REQUEST_MEASURE)),t.registerRequestToMeasureDom("wysiwyg.viewer.components.PopupContainer"),t.registerCustomMeasure("wysiwyg.viewer.components.PopupContainer",r),t.registerSAFEPatcher("wysiwyg.viewer.components.PopupContainer",a)}),define("layout/specificComponents/comboBoxInputLayout",["lodash","zepto","layout/util/layout"],function(e,t,i){function o(i,o,n){var r=e.head(t(n[i]).find("select"));o.height[i]=r.offsetHeight,o.width[i]=r.offsetWidth}function n(e,t,i){var o=i.height[e],n=i.width[e];t.css(e,{height:o,width:n})}i.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.ComboBoxInput",[["select"]]),i.registerCustomMeasure("wysiwyg.viewer.components.inputs.ComboBoxInput",o),i.registerSAFEPatcher("wysiwyg.viewer.components.inputs.ComboBoxInput",n)}),define("layout/specificComponents/textComponentsLayout",["lodash","layout/util/layout"],function(e,t){function i(e,t,i){var o=i[e+"textarea"];t.height[e]=o.offsetHeight,t.width[e]=o.offsetWidth}function o(e,t,i){var o=i[e+"input"];t.height[e]=o.offsetHeight,t.width[e]=o.offsetWidth}function n(e,t,i){t.css(e,{height:i.height[e],width:i.width[e]})}t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextInput",[["input"]]),t.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextInput",o),t.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextInput",n),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextAreaInput",[["textarea"]]),t.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextAreaInput",i),t.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextAreaInput",n)}),define("layout/specificComponents/radioButtonLayout",["lodash","layout/util/layout","zepto"],function(e,t,i){function o(t,i){return e(t.css(i)).map(function(e){return parseInt(e.split("px")[0],10)}).sum()}function n(e,t){var n=i("#"+e);t.height[e]=n.offset().height+o(n,["margin-bottom","margin-top"]);var r=i("#"+e+"container").offset().width,a=o(n,["margin-right","margin-left"]);t.width[e]=r+a}t.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioButton",n)}),define("layout/specificComponents/datePickerLayout",["zepto","layout/util/layout"],function(e,t){function i(t,i,o){var n=o[t+"icon"],r=o[t+"input"],a=o[t+"inputWrapper"],s=n.height.baseVal.value+16,u=parseInt(e(r).css("line-height"),10)||0,c=2*(parseInt(e(a).css("border-width"),10)||0);i.height[t]=Math.max(a.offsetHeight,s),i.width[t]=Math.max(a.offsetWidth,56),i.minHeight[t]=Math.max(u,s)+c,i.minWidth[t]=56+c}function o(e,t,i){t.css(e,{height:i.height[e],width:i.width[e]})}t.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.DatePicker",[["icon"],["inputWrapper"],["input"]]),t.registerCustomMeasure("wysiwyg.viewer.components.inputs.DatePicker",i),t.registerSAFEPatcher("wysiwyg.viewer.components.inputs.DatePicker",o)}),define("layout/specificComponents/radioGroupLayout",["lodash","zepto","layout/util/layout"],function(e,t,i){function o(t,i,o){return e.filter(t[i],function(t,i){return e.startsWith(i,o+"radio")})}function n(i,n){var r=arguments[4],a=r.dataItem.options.length,s="vertical"===r.propertiesItem.layout,u=o(n,"height",i),c=s?e.sum(u):e.max(u);n.height[i]=c;var l=o(n,"width",i),h=s?e.max(l):e.sum(l),d=s?60:60*a;n.width[i]=e.max([d,h,t("#"+i).offset().width])}function r(e,t,i){t.css(e,{width:i.width[e]})}function a(t,i,o,n){return e.map(n.dataItem.options,function(e,t){return{type:"wysiwyg.viewer.components.inputs.RadioButton",pathArray:["radio"+t]}}).concat([["items"]])}i.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.RadioGroup",a),i.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioGroup",n),i.registerSAFEPatcher("wysiwyg.viewer.components.inputs.RadioGroup",r)}),define("layout/specificComponents/gridLayout",["lodash","layout/util/layout"],function(e,t){function i(e,t){return e.styleItem.style.properties[t]||""}function o(e){var t=e.propertiesItem.pagination;return e.dataItem.numberOfDisplayedRows||(t&&t.type===a.PAGES?t.rowsPerPage:e.dataItem.rows.length)}function n(e,t,n,a,l){var h=n[e];t.width[e]=h.offsetWidth,t.height[e]=h.offsetHeight;var d=l.propertiesItem,g=d.rowHeight+Number(i(l,c)),p=Math.min(o(l),r),m=d.showHeader?d.headerHeight+Number(i(l,u)):0,f=Number(l.styleItem.style.properties.containerBrw)||0,y=m+p*g+2*f,w=d.heightLayout===s.AUTOMATIC,v=h.getElementsByClassName("ag-bl-center ag-bl-full-height-center");if(v.length){var C=h.getElementsByClassName("ag-body"),b=w?y:v[0].clientHeight;C[0].style.height=b-2*f-m+"px"}y&&w&&(t.height[e]=y)}var r=200,a={PAGES:"pagination",SCROLL:"virtual",NONE:"normal"},s={MANUAL:"manual",AUTOMATIC:"auto"},u="headerDivider_w",c="rowDivider_w";t.registerCustomMeasure("wysiwyg.viewer.components.Grid",n)}),define("layout/specificComponents/fileUploaderLayout",["zepto","lodash","layout/util/layout"],function(e,t,i){function o(t,i,o){var n=e(o[t]),r=n.find("#"+t+"files"),a=n.find("#"+t+"buttonLabel"),s=n.find("#"+t+"chooseFileButton"),u=window.getComputedStyle(r[0]),c=window.getComputedStyle(s[0]),l=2*parseInt(c.borderLeftWidth,10);i.minHeight[t]=parseInt(u.height,10)+parseInt(u.marginTop,10)+Math.max(a[0].offsetHeight,23)+l,i.width[t]=Math.max(a[0].offsetWidth+l+16+20,i.width[t])}function n(e,t,i){var o={height:Math.max(i.minHeight[e],i.height[e]),width:i.width[e]};t.css(e,o)}i.registerCustomMeasure("wysiwyg.viewer.components.inputs.FileUploader",o),i.registerSAFEPatcher("wysiwyg.viewer.components.inputs.FileUploader",n)}),define("layout/specificComponents/appControllerLayout",["layout/util/layout"],function(e){e.registerCustomMeasure("platform.components.AppController",function(e,t,i){i[e+"inlineContent"]&&(t.width[e]=t.width[e+"inlineContent"],t.height[e]=t.height[e+"inlineContent"])}),e.registerRequestToMeasureChildren("platform.components.AppController",[["inlineContent"]])}),define("layout/specificComponents/linkBarLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(e,t,i){function o(t,i,o,n){var a=n.dataItem.items;return e.map(a,function(e,t){return{type:"core.components.Image",pathArray:[""+t,r]}})}function n(t,o,n,a,s){var u=e.get(a,["propertiesItem","iconSize"]),c={width:u,height:u},l=a.dataItem.items;e.forEach(l,function(e,a){i.patchNodeImage(t+a+r,o,n,s,e,c,e.alignType)})}var r="image";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.LinkBar",o),t.registerSAFEPatcher("wysiwyg.viewer.components.LinkBar",n)}),define("layout/specificComponents/flashComponentLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(e,t,i){function o(e,t,o,n,r){i.patchNodeImage(e+"noFlashImg",t,o,r,n.dataItem.placeHolderImage,{width:n.dataItem.placeHolderImage.width,height:n.dataItem.placeHolderImage.height},n.dataItem.placeHolderImage.alignType)}t.registerRequestToMeasureChildren("wysiwyg.viewer.components.FlashComponent",[{type:"core.components.Image",pathArray:["noFlashImg"]}]),t.registerSAFEPatcher("wysiwyg.viewer.components.FlashComponent",o)}),define("layout/specificComponents/rssButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(e,t,i){function o(t,i,o,n){return[{type:"core.components.Image",pathArray:[e.get(n,["dataItem","image","id"])]}]}function n(t,o,n,r,a){var s=e.get(r,"layout"),u=e.get(r,["dataItem","image"]);e.assign(u,{displayMode:"full"}),i.patchNodeImage(t+e.get(u,"id"),o,n,a,u,s)}t.registerRequestToMeasureChildren("wysiwyg.common.components.rssbutton.viewer.RSSButton",o),t.registerSAFEPatcher("wysiwyg.common.components.rssbutton.viewer.RSSButton",n)}),define("layout/specificComponents/quickActionBarLayout",["lodash","layout/util/layout"],function(e,t){function i(e,t,i,o,n){t.custom[e]={isZoomed:o.mobile.isZoomed()&&"preview"!==o.viewMode},t.top[e]=t.clientHeight-t.height[e]-16,t.left[e]=n.layout.x+(t.clientWidth-t.width.screen)/2}function o(e,t,i){t.css(e,{top:"",bottom:16,left:i.left[e],display:i.custom[e].isZoomed?"none":"","z-index":1})}t.registerCustomMeasure("wysiwyg.viewer.components.QuickActionBar",i),t.registerSAFEPatcher("wysiwyg.viewer.components.QuickActionBar",o)}),define("layout/specificComponents/touchMediaZoomLayout",["zepto","lodash","siteUtils","layout/util/layout"],function(e,t,i,o){function n(i,o,n){var r=e(n[i]);if(r.data("firstrender")){o.custom[i]={imageIds:[]};var a=t.toArray(r.find("img"));t.forEach(a,function(t,r){var a=i+"_image"+r;n[a]=t,o.custom[i].imageIds.push(a),o.custom[a]={imageData:e(t).data("imgdata"),scale:e(t).data("imgscale")}});var s=u.exec(i)[1];n[i+"imageContainer"]=r.find("#"+s+"imageContainer"),n[i+"info"]=r.find("#"+s+"info")}}function r(e,i,o,n,r){o.custom[e]&&(t.forEach(o.custom[e].imageIds,function(e){var t={pixelAspectRatio:r.mobile.getDevicePixelRatio(),browser:r.getBrowser(),staticMediaUrl:r.getStaticMediaUrl(),screenSize:{width:o.width.screen,height:o.height.screen}},n=o.custom[e],a=s.getImageApiData(n.imageData,t,n.scale);i.css(e,a.css.img),i.attr(e,{src:a.uri})}),i.css(e,{width:(1+2*c)*o.width.screen}),i.css(e+"imageContainer",{width:o.width.screen}),i.css(e+"info",{width:o.width.screen}))}function a(e,i,o,n,a){i.css(e,{top:0,position:"absolute",width:"100%",height:"100%"}),t.forEach(["imageZoomCompstage_LEFT","imageZoomCompstage_CENTER","imageZoomCompstage_RIGHT"],function(e){r(e,i,o,n,a)})}var s=i.touchMediaZoomUtils,u=/^imageZoomComp(.*)$/,c=.2;o.registerCustomMeasure("wysiwyg.viewer.components.TouchMediaZoomItem",n),o.registerRequestToMeasureChildren("wysiwyg.viewer.components.TouchMediaZoomSlideshow",[{pathArray:["stage_LEFT"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"},{pathArray:["stage_CENTER"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"},{pathArray:["stage_RIGHT"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"}]),o.registerSAFEPatcher("wysiwyg.viewer.components.TouchMediaZoomSlideshow",a)}),define("layout/specificComponents/viewerLayout",[],function(){return function(e){function t(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p=".",t(0)}([function(e,t,i){var o,n;o=[],void 0!==(n=function(){"undefined"!=typeof window&&window.document&&window.santaBase&&!window.editorBase&&!document.querySelector('link[href$="viewer.css"]')&&i(1)}.apply(t,o))&&(e.exports=n)},function(e,t,i){var o=i(2);"string"==typeof o&&(o=[[e.id,o,""]]);i(4)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,i){(e.exports=i(3)()).push([e.id,"html, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, font, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  vertical-align: baseline;\n  background: transparent; }\n\nbody {\n  font-size: 10px;\n  font-family: Arial, Helvetica, sans-serif; }\n\ntextarea, input, select {\n  font-family: Helvetica, Arial, sans-serif;\n  box-sizing: border-box; }\n\nol, ul {\n  list-style: none; }\n\nblockquote, q {\n  quotes: none; }\n\n:focus {\n  outline: 0; }\n\nins {\n  text-decoration: none; }\n\ndel {\n  text-decoration: line-through; }\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\na {\n  cursor: pointer;\n  text-decoration: none; }\n\nhtml, body {\n  height: 100%; }\n\nbody {\n  overflow-x: auto;\n  overflow-y: scroll; }\n\n.testStyles {\n  overflow-y: hidden; }\n\n.wixSiteProperties {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  overflow: hidden; }\n\n.SITE_ROOT {\n  min-height: 100%;\n  position: relative;\n  margin: 0 auto; }\n\n.POPUPS_ROOT {\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow-x: auto;\n  overflow-y: scroll;\n  position: fixed;\n  z-index: 99999; }\n  .POPUPS_ROOT.mobile {\n    z-index: 1005;\n    -webkit-overflow-scrolling: touch; }\n\n.POPUPS_WRAPPER {\n  position: relative;\n  overflow: hidden; }\n  .POPUPS_WRAPPER > div {\n    /* page */\n    margin: 0 auto; }\n\n.auto-generated-link {\n  color: inherit; }\n\n.warmup .hidden-on-warmup {\n  visibility: hidden; }\n\nhtml.device-phone body {\n  overflow-y: auto; }\n\nhtml.device-mobile-optimized.device-android {\n  margin-bottom: 1px; }\n\nhtml.device-mobile-optimized.blockSiteScrolling > body {\n  position: fixed;\n  width: 100%; }\n\nhtml.device-mobile-optimized.media-zoom-mode > body {\n  touch-action: manipulation; }\n  html.device-mobile-optimized.media-zoom-mode > body > #SITE_CONTAINER {\n    height: 100%;\n    overflow: hidden; }\n    html.device-mobile-optimized.media-zoom-mode > body > #SITE_CONTAINER > .noop {\n      height: 100%; }\n      html.device-mobile-optimized.media-zoom-mode > body > #SITE_CONTAINER > .noop > .siteAspectsContainer {\n        height: 100%;\n        z-index: 1005; }\n\n.siteAspectsContainer {\n  position: absolute;\n  top: 0;\n  margin: 0 auto;\n  left: 0;\n  right: 0; }\n\nbody.device-mobile-optimized {\n  overflow-x: hidden;\n  overflow-y: scroll; }\n  body.device-mobile-optimized.qa-mode {\n    overflow-y: auto; }\n  body.device-mobile-optimized #SITE_CONTAINER {\n    width: 320px;\n    overflow-x: visible;\n    margin: 0 auto;\n    position: relative; }\n  body.device-mobile-optimized > * {\n    max-width: 100% !important; }\n  body.device-mobile-optimized .SITE_ROOT {\n    overflow-x: hidden;\n    overflow-y: hidden; }\n\nbody.device-mobile-non-optimized #SITE_CONTAINER > :not(.mobile-non-optimized-overflow) .SITE_ROOT {\n  overflow-x: hidden;\n  overflow-y: auto; }\n\nbody.device-mobile-non-optimized.fullScreenMode {\n  background-color: #5f6360; }\n  body.device-mobile-non-optimized.fullScreenMode .SITE_ROOT,\n  body.device-mobile-non-optimized.fullScreenMode #SITE_BACKGROUND,\n  body.device-mobile-non-optimized.fullScreenMode #MOBILE_ACTIONS_MENU {\n    visibility: hidden; }\n\nbody.fullScreenMode {\n  overflow-x: hidden !important;\n  overflow-y: hidden !important; }\n  body.fullScreenMode.device-mobile-optimized #TINY_MENU {\n    opacity: 0;\n    pointer-events: none; }\n\nbody.fullScreenMode-scrollable.device-mobile-optimized {\n  overflow-x: hidden !important;\n  overflow-y: auto !important; }\n  body.fullScreenMode-scrollable.device-mobile-optimized .SITE_ROOT,\n  body.fullScreenMode-scrollable.device-mobile-optimized #masterPage {\n    overflow-x: hidden !important;\n    overflow-y: hidden !important; }\n  body.fullScreenMode-scrollable.device-mobile-optimized #masterPage,\n  body.fullScreenMode-scrollable.device-mobile-optimized #SITE_BACKGROUND {\n    height: auto !important; }\n\n.fullScreenOverlay {\n  z-index: 1005;\n  position: fixed;\n  left: 0;\n  top: -60px;\n  right: 0;\n  bottom: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  overflow-y: hidden; }\n  .fullScreenOverlay > .fullScreenOverlayContent {\n    margin: 0 auto;\n    position: absolute;\n    right: 0;\n    top: 60px;\n    left: 0;\n    bottom: 0;\n    overflow: hidden;\n    -webkit-transform: translateZ(0);\n            transform: translateZ(0); }\n\n.mobile-actions-menu-wrapper {\n  z-index: 1000; }\n\nbody[contenteditable] {\n  overflow-x: auto;\n  overflow-y: auto; }\n\n.bold {\n  font-weight: bold; }\n\n.italic {\n  font-style: italic; }\n\n.underline {\n  text-decoration: underline; }\n\n.lineThrough {\n  text-decoration: line-through; }\n\n.singleLineText {\n  white-space: nowrap;\n  text-overflow: ellipsis; }\n\n.alignLeft {\n  text-align: left; }\n\n.alignCenter {\n  text-align: center; }\n\n.alignRight {\n  text-align: right; }\n\n.alignJustify {\n  text-align: justify; }\n\nul.font_100, ol.font_100 {\n  color: #080808;\n  font-family: 'Arial, Helvetica, sans-serif', serif;\n  font-size: 10px;\n  font-style: normal;\n  font-variant: normal;\n  font-weight: normal;\n  margin: 0;\n  text-decoration: none;\n  line-height: normal;\n  letter-spacing: normal; }\n  ul.font_100 li, ol.font_100 li {\n    margin-bottom: 12px; }\n\nletter {\n  position: relative;\n  display: inline-block; }\n\nword {\n  display: inline-block;\n  white-space: nowrap; }\n\nword.space,\nletter.space {\n  display: inline; }\n\nol.wix-list-text-align, ul.wix-list-text-align {\n  list-style-position: inside; }\n  ol.wix-list-text-align p, ol.wix-list-text-align h1, ol.wix-list-text-align h2, ol.wix-list-text-align h3, ol.wix-list-text-align h4, ol.wix-list-text-align h5, ol.wix-list-text-align h6, ul.wix-list-text-align p, ul.wix-list-text-align h1, ul.wix-list-text-align h2, ul.wix-list-text-align h3, ul.wix-list-text-align h4, ul.wix-list-text-align h5, ul.wix-list-text-align h6 {\n    display: inline; }\n\n.wixapps-less-spacers-align.ltr {\n  text-align: left; }\n\n.wixapps-less-spacers-align.center {\n  text-align: center; }\n\n.wixapps-less-spacers-align.rtl {\n  text-align: right; }\n\n.wixapps-less-spacers-align > div,\n.wixapps-less-spacers-align > a {\n  display: inline-block !important; }\n\n.flex_display {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex; }\n\n.flex_vbox {\n  box-sizing: border-box;\n  padding-top: 0.01em;\n  padding-bottom: 0.01em; }\n\na.wixAppsLink img {\n  cursor: pointer; }\n\n.singleLine {\n  white-space: nowrap;\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  word-wrap: normal; }\n\n[data-z-counter] {\n  z-index: 0; }\n\n[data-z-counter=\"0\"] {\n  z-index: auto; }\n\n.circle-preloader {\n  -webkit-animation: semi-rotate 1s 1ms linear infinite;\n          animation: semi-rotate 1s 1ms linear infinite;\n  height: 30px;\n  left: 50%;\n  margin-left: -15px;\n  margin-top: -15px;\n  overflow: hidden;\n  position: absolute;\n  top: 50%;\n  -webkit-transform-origin: 100% 50%;\n          transform-origin: 100% 50%;\n  width: 15px; }\n  .circle-preloader::before {\n    content: '';\n    top: 0;\n    left: 0;\n    right: -100%;\n    bottom: 0;\n    border: 3px solid currentColor;\n    border-color: currentColor transparent transparent currentColor;\n    border-radius: 50%;\n    position: absolute;\n    -webkit-transform: rotate(-45deg);\n            transform: rotate(-45deg);\n    -webkit-animation: inner-rotate 0.5s 1ms linear infinite alternate;\n            animation: inner-rotate 0.5s 1ms linear infinite alternate;\n    color: #7fccf7; }\n  .circle-preloader::after {\n    content: '';\n    top: 0;\n    left: 0;\n    right: -100%;\n    bottom: 0;\n    border: 3px solid currentColor;\n    border-color: currentColor transparent transparent currentColor;\n    border-radius: 50%;\n    position: absolute;\n    -webkit-transform: rotate(-45deg);\n            transform: rotate(-45deg);\n    -webkit-animation: inner-rotate 0.5s 1ms linear infinite alternate;\n            animation: inner-rotate 0.5s 1ms linear infinite alternate;\n    color: #3899ec;\n    opacity: 0; }\n  .circle-preloader.white::before {\n    color: #f0f0f0; }\n  .circle-preloader.white::after {\n    color: #dcdcdc; }\n\n@-webkit-keyframes inner-rotate {\n  to {\n    opacity: 1;\n    -webkit-transform: rotate(115deg);\n            transform: rotate(115deg); } }\n\n@keyframes inner-rotate {\n  to {\n    opacity: 1;\n    -webkit-transform: rotate(115deg);\n            transform: rotate(115deg); } }\n\n@-webkit-keyframes semi-rotate {\n  from {\n    -webkit-animation-timing-function: ease-out;\n            animation-timing-function: ease-out;\n    -webkit-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  45% {\n    -webkit-transform: rotate(198deg);\n            transform: rotate(198deg); }\n  55% {\n    -webkit-transform: rotate(234deg);\n            transform: rotate(234deg); }\n  to {\n    -webkit-transform: rotate(540deg);\n            transform: rotate(540deg); } }\n\n@keyframes semi-rotate {\n  from {\n    -webkit-animation-timing-function: ease-out;\n            animation-timing-function: ease-out;\n    -webkit-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  45% {\n    -webkit-transform: rotate(198deg);\n            transform: rotate(198deg); }\n  55% {\n    -webkit-transform: rotate(234deg);\n            transform: rotate(234deg); }\n  to {\n    -webkit-transform: rotate(540deg);\n            transform: rotate(540deg); } }\n\n.hidden-comp-ghost-mode {\n  opacity: 0.5; }\n\n.collapsed-comp-mode::after {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  content: '';\n  background: -webkit-repeating-linear-gradient(135deg, transparent, transparent 49%, #2b5672 40%, #2b5672 40%, transparent 51%);\n  background: repeating-linear-gradient(-45deg, transparent, transparent 49%, #2b5672 40%, #2b5672 40%, transparent 51%);\n  background-size: 6px 6px;\n  background-repeat: repeat; }\n\n.g-transparent-a:link, .g-transparent-a:visited {\n  border-color: transparent; }\n\n.transitioning-comp * {\n  transition: inherit !important;\n  -webkit-transition: inherit !important; }\n\n.selectionSharerContainer {\n  position: absolute;\n  background-color: #ffffff;\n  box-shadow: 0px 4px 10px 0px rgba(57, 86, 113, 0.24);\n  width: 142px;\n  height: 45px;\n  border-radius: 100px;\n  text-align: center; }\n  .selectionSharerContainer:after {\n    content: \"\";\n    position: absolute;\n    bottom: -10px;\n    left: 42%;\n    /*controls horizontal position */\n    border-width: 10px 10px 0;\n    /* vary these values to change the angle of the vertex */\n    border-style: solid;\n    border-color: #ffffff transparent;\n    /* reduce the damage in FF3.0 */\n    display: block;\n    width: 0; }\n  .selectionSharerContainer .selectionSharerOption {\n    display: inline-block;\n    cursor: pointer;\n    vertical-align: top;\n    padding: 13px 11px 11px 13px;\n    margin: 1px;\n    z-index: -1; }\n  .selectionSharerContainer .selectionSharerVerticalSeparator {\n    margin-top: 9px;\n    margin-bottom: 18px;\n    background-color: #eaf7ff;\n    height: 26px;\n    width: 1px;\n    display: inline-block; }\n/*# sourceMappingURL=viewer.css.map */",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(o[r]=!0)}for(n=0;n<t.length;n++){var a=t[n];"number"==typeof a[0]&&o[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(e,t,i){function o(e,t){for(var i=0;i<e.length;i++){var o=e[i],n=g[o.id];if(n){n.refs++;for(a=0;a<n.parts.length;a++)n.parts[a](o.parts[a]);for(;a<o.parts.length;a++)n.parts.push(c(o.parts[a],t))}else{for(var r=[],a=0;a<o.parts.length;a++)r.push(c(o.parts[a],t));g[o.id]={id:o.id,refs:1,parts:r}}}}function n(e){for(var t=[],i={},o=0;o<e.length;o++){var n=e[o],r=n[0],a={css:n[1],media:n[2],sourceMap:n[3]};i[r]?i[r].parts.push(a):t.push(i[r]={id:r,parts:[a]})}return t}function r(e,t){var i=f(),o=v[v.length-1];if("top"===e.insertAt)o?o.nextSibling?i.insertBefore(t,o.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var i,o,n;if(t.singleton){var r=w++;i=y||(y=s(t)),o=l.bind(null,i,r,!1),n=l.bind(null,i,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=u(t),o=d.bind(null,i),n=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=s(t),o=h.bind(null,i),n=function(){a(i)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}function l(e,t,i,o){var n=i?"":o.css;if(e.styleSheet)e.styleSheet.cssText=C(t,n);else{var r=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function h(e,t){var i=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function d(e,t){var i=t.css,o=t.sourceMap;o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var n=new Blob([i],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(n),r&&URL.revokeObjectURL(r)}var g={},p=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},m=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),f=p(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,w=0,v=[];e.exports=function(e,t){void 0===(t=t||{}).singleton&&(t.singleton=m()),void 0===t.insertAt&&(t.insertAt="bottom");var i=n(e);return o(i,t),function(e){for(var r=[],a=0;a<i.length;a++){var s=i[a];(u=g[s.id]).refs--,r.push(u)}e&&o(n(e),t);for(a=0;a<r.length;a++){var u=r[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete g[u.id]}}}};var C=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()}])}),define("layout",["layout/util/layout","layout/specificComponents/wixHomepageMenuLayout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/domainSearchLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/registerToPureDomMeasure","layout/specificComponents/areaTooltipLayout","layout/specificComponents/menuLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginButtonLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/wPhotoLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/groupLayout","layout/specificComponents/wixappsLayout","layout/specificComponents/shapeLayout","layout/specificComponents/richtextLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/anchorLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaGalleryLayout","layout/specificComponents/youTubeSubscribeButtonLayout","layout/specificComponents/wFacebookCommentLayout","layout/specificComponents/facebookLikeLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/backOfficeTextLayout","layout/specificComponents/vkShareLayout","layout/specificComponents/adminLoginLayout","layout/specificComponents/homePageLoginLayout","layout/specificComponents/iTunesButtonLayout","layout/specificComponents/paypalLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/wixSiteLayout","layout/specificComponents/buttonLayout","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout","layout/wixappsLayout/proxyLayout/galleryProxyLayout","layout/wixappsLayout/proxyLayout/imageProxyLayout","layout/wixappsLayout/proxyLayout/buttonProxyLayout","layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout","layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout","layout/specificComponents/imageButtonLayout","layout/specificComponents/mediaRichTextLayout","layout/specificComponents/backToTopButtonLayout","layout/specificComponents/appPartZoomLayout","layout/specificComponents/facebookShareLayout","layout/specificComponents/paginatedGridGalleryLayout","layout/specificComponents/PinterestFollowLayout","layout/specificComponents/videoLayout","layout/specificComponents/soundCloudLayout","layout/specificComponents/verticalLineLayout","layout/specificComponents/boxSlideShowLayout","layout/specificComponents/mediaContainerLayout","layout/specificComponents/mediaControlsLayout","layout/specificComponents/mediaOverlayControlsLayout","layout/specificComponents/verticalAnchorsMenuLayout","layout/specificComponents/columnsLayout","layout/specificComponents/popupContainerLayout","layout/specificComponents/comboBoxInputLayout","layout/specificComponents/textComponentsLayout","layout/specificComponents/radioButtonLayout","layout/specificComponents/datePickerLayout","layout/specificComponents/radioGroupLayout","layout/specificComponents/gridLayout","layout/specificComponents/fileUploaderLayout","layout/specificComponents/appControllerLayout","layout/specificComponents/linkBarLayout","layout/specificComponents/flashComponentLayout","layout/specificComponents/rssButtonLayout","layout/specificComponents/quickActionBarLayout","layout/specificComponents/touchMediaZoomLayout","layout/specificComponents/svgPrimitiveLayout","layout/specificComponents/viewerLayout"],function(e){return e});
//# sourceMappingURL=layout.min.js.map